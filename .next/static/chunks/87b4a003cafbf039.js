(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,25461,e=>{"use strict";e.s(["default",()=>t]);var a=e.i(43476),l=e.i(71645);function t(e){let{filename:t="siklusku-report.png",stats:i,legend:n}=e,[o,r]=(0,l.useState)(!1),[s,u]=(0,l.useState)(!1),[c,d]=(0,l.useState)(null),f=(0,l.useMemo)(()=>Array.isArray(n)?n.filter(e=>e&&Number(e.count)>0).map(e=>({label:e.label||e.mood||"-",mood:e.mood||e.label||"-",count:Number(e.count)||0,color:e.color||"#94a3b8"})).sort((e,a)=>a.count-e.count).slice(0,5):[],[n]);function g(){let e=Math.max(1,Math.floor(window.devicePixelRatio||1)),a=document.createElement("canvas");a.width=1080*e,a.height=1080*e;let l=a.getContext("2d");return l.scale(e,e),!function(e){var a,l,t,i;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e.createLinearGradient(0,0,1080,1080);r.addColorStop(0,"#fdf2f8"),r.addColorStop(1,"#fce7f3"),e.fillStyle=r,e.fillRect(0,0,1080,1080),e.fillStyle="#ec4899",e.font="bold 68px 'Poppins','Arial',sans-serif",e.fillText("Ringkasan Siklusku",80,160);let s=[{label:"Rata-rata Siklus",value:"".concat(null!=(a=null==n?void 0:n.averageCycleLength)?a:"-"," hari")},{label:"Rata-rata Menstruasi",value:"".concat(null!=(l=null==n?void 0:n.averagePeriodLength)?l:"-"," hari")},{label:"Mood Dominan",value:null!=(t=null==n?void 0:n.dominantMood)?t:"-"},{label:"Total Log Mood",value:null!=(i=null==n?void 0:n.moodEntries)?i:0}];e.font="28px 'Inter','Arial',sans-serif",s.forEach((a,l)=>{let t=260+120*l;e.fillStyle="#ec4899",e.fillText(a.label,80,t),e.fillStyle="#1f2937",e.font="bold 42px 'Inter','Arial',sans-serif",e.fillText(String(a.value),80,t+52),e.font="28px 'Inter','Arial',sans-serif"}),o.length&&(e.font="bold 32px 'Inter','Arial',sans-serif",o.forEach((a,l)=>{let t=260+90*l;e.fillStyle=a.color,e.fillRect(640,t-28,36,36),e.fillStyle="#1f2937",e.fillText(a.label,692,t),e.font="24px 'Inter','Arial',sans-serif",e.fillStyle="#6b7280",e.fillText("".concat(a.count,"x"),692,t+26),e.font="bold 32px 'Inter','Arial',sans-serif"})),e.fillStyle="#6b7280",e.font="24px 'Inter','Arial',sans-serif",e.fillText("Generated with RISA Siklusku",80,960),e.fillText(new Date().toLocaleDateString(),80,1e3)}(l,i,f),a}return(0,l.useEffect)(()=>{if(!c)return;let e=setTimeout(()=>d(null),3500);return()=>clearTimeout(e)},[c]),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("button",{type:"button",className:"rounded-full border border-pink-200 bg-white px-4 py-2 text-sm font-medium text-pink-600 shadow-sm transition hover:scale-[1.01] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-500 disabled:opacity-50",onClick:function(){if(!o){r(!0);try{let e=g().toDataURL("image/png"),a=document.createElement("a");a.href=e,a.download=t,a.click()}finally{r(!1)}}},disabled:o,"aria-label":"Unduh ringkasan PNG",children:o?"Menyiapkan...":"Export PNG"}),(0,a.jsx)("button",{type:"button",className:"rounded-full border border-pink-200 bg-white px-4 py-2 text-sm font-medium text-pink-600 shadow-sm transition hover:scale-[1.01] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-500 disabled:opacity-50",onClick:function(){if(s)return;if("undefined"==typeof navigator)return void d("Bagikan tidak tersedia di perangkat ini");u(!0);let e=g(),a=function(){var e,a,l,t;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=["Ringkasan Siklusku","Rata-rata siklus: ".concat(null!=(e=null==i?void 0:i.averageCycleLength)?e:"-"," hari"),"Rata-rata menstruasi: ".concat(null!=(a=null==i?void 0:i.averagePeriodLength)?a:"-"," hari"),"Mood dominan: ".concat(null!=(l=null==i?void 0:i.dominantMood)?l:"-"),"Total log mood: ".concat(null!=(t=null==i?void 0:i.moodEntries)?t:0)];if(n.length){let e=n.slice(0,3).map(e=>"".concat(e.label," (").concat(e.count,"x)")).join(", ");o.push("Mood terbanyak 30 hari terakhir: ".concat(e))}return o.push("Unduh PNG di aplikasi Siklusku ðŸ’—"),o.join("\n")}(i,f);e.toBlob(async e=>{if(!e){d("Gagal menyiapkan ringkasan"),u(!1);return}try{let l=new File([e],t,{type:"image/png"});navigator.canShare&&navigator.canShare({files:[l]})?(await navigator.share({files:[l],title:"Ringkasan Siklusku",text:a}),d("Berhasil dibagikan")):navigator.clipboard&&"function"==typeof navigator.clipboard.writeText?(await navigator.clipboard.writeText(a),d("Ringkasan teks tersalin")):d("Bagikan tidak tersedia di perangkat ini")}catch(e){d("Gagal membagikan. Coba lagi ya.")}finally{u(!1)}},"image/png")},disabled:s,"aria-label":"Bagikan ringkasan",children:s?"Menyiapkan...":"Bagikan"})]}),c?(0,a.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:c}):null]})}},72592,e=>{e.n(e.i(25461))}]);