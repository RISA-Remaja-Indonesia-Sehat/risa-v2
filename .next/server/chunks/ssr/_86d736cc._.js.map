{"version":3,"sources":["turbopack:///[project]/node_modules/prop-types/lib/ReactPropTypesSecret.js","turbopack:///[project]/node_modules/prop-types/factoryWithThrowingShims.js","turbopack:///[project]/node_modules/prop-types/index.js","turbopack:///[project]/node_modules/styled-jsx/dist/index/index.js","turbopack:///[project]/node_modules/styled-jsx/style.js","turbopack:///[project]/src/lib/siklus/achievements.js","turbopack:///[project]/src/app/components/siklusku/FirstPeriodGuide.jsx","turbopack:///[project]/src/lib/siklus/localStore.js","turbopack:///[project]/src/lib/siklus/cycleMath.js","turbopack:///[project]/src/lib/siklus/streak.js","turbopack:///[project]/src/app/components/siklusku/Tabs.jsx","turbopack:///[project]/src/app/siklusku/page.js","turbopack:///[project]/src/app/store/useSiklusStore.js","turbopack:///[project]/src/app/components/siklusku/CalendarRange.jsx","turbopack:///[project]/src/app/components/siklusku/CycleOnboarding.jsx","turbopack:///[project]/src/app/components/siklusku/MoodDistributionCard.jsx","turbopack:///[project]/src/app/components/siklusku/MoodPatternCard.jsx","turbopack:///[project]/src/app/components/siklusku/LoveLetterModal.jsx","turbopack:///[project]/src/app/components/siklusku/LogPeriodForm.jsx","turbopack:///[project]/src/app/components/siklusku/DailyTracker.jsx","turbopack:///[project]/src/app/components/siklusku/DailyLogsViewer.jsx","turbopack:///[project]/src/lib/siklus/microInteractions.js","turbopack:///[project]/src/lib/siklus/nudges.js","turbopack:///[project]/src/app/components/siklusku/OnboardingGate.jsx","turbopack:///[project]/src/lib/siklus/moodPatterns.js","turbopack:///[project]/src/app/components/siklusku/ConsistencyCard.jsx","turbopack:///[project]/src/app/components/siklusku/AchievementsCard.jsx","turbopack:///[project]/node_modules/lucide-react/src/icons/calendar.ts","turbopack:///[project]/node_modules/lucide-react/src/icons/moon.ts","turbopack:///[project]/node_modules/lucide-react/src/icons/sprout.ts","turbopack:///[project]/node_modules/lucide-react/src/icons/heart.ts","turbopack:///[project]/node_modules/lucide-react/src/icons/droplets.ts","turbopack:///[project]/node_modules/lucide-react/src/icons/message-circle.ts","turbopack:///[project]/node_modules/lucide-react/src/icons/droplet.ts"],"sourcesContent":["/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","require('client-only');\nvar React = require('react');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nvar React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\n/*\nBased on Glamor's sheet\nhttps://github.com/threepointone/glamor/blob/667b480d31b3721a905021b26e1290ce92ca2879/src/sheet.js\n*/ function _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nvar isProd = typeof process !== \"undefined\" && process.env && process.env.NODE_ENV === \"production\";\nvar isString = function(o) {\n    return Object.prototype.toString.call(o) === \"[object String]\";\n};\nvar StyleSheet = /*#__PURE__*/ function() {\n    function StyleSheet(param) {\n        var ref = param === void 0 ? {} : param, _name = ref.name, name = _name === void 0 ? \"stylesheet\" : _name, _optimizeForSpeed = ref.optimizeForSpeed, optimizeForSpeed = _optimizeForSpeed === void 0 ? isProd : _optimizeForSpeed;\n        invariant$1(isString(name), \"`name` must be a string\");\n        this._name = name;\n        this._deletedRulePlaceholder = \"#\" + name + \"-deleted-rule____{}\";\n        invariant$1(typeof optimizeForSpeed === \"boolean\", \"`optimizeForSpeed` must be a boolean\");\n        this._optimizeForSpeed = optimizeForSpeed;\n        this._serverSheet = undefined;\n        this._tags = [];\n        this._injected = false;\n        this._rulesCount = 0;\n        var node = typeof window !== \"undefined\" && document.querySelector('meta[property=\"csp-nonce\"]');\n        this._nonce = node ? node.getAttribute(\"content\") : null;\n    }\n    var _proto = StyleSheet.prototype;\n    _proto.setOptimizeForSpeed = function setOptimizeForSpeed(bool) {\n        invariant$1(typeof bool === \"boolean\", \"`setOptimizeForSpeed` accepts a boolean\");\n        invariant$1(this._rulesCount === 0, \"optimizeForSpeed cannot be when rules have already been inserted\");\n        this.flush();\n        this._optimizeForSpeed = bool;\n        this.inject();\n    };\n    _proto.isOptimizeForSpeed = function isOptimizeForSpeed() {\n        return this._optimizeForSpeed;\n    };\n    _proto.inject = function inject() {\n        var _this = this;\n        invariant$1(!this._injected, \"sheet already injected\");\n        this._injected = true;\n        if (typeof window !== \"undefined\" && this._optimizeForSpeed) {\n            this._tags[0] = this.makeStyleTag(this._name);\n            this._optimizeForSpeed = \"insertRule\" in this.getSheet();\n            if (!this._optimizeForSpeed) {\n                if (!isProd) {\n                    console.warn(\"StyleSheet: optimizeForSpeed mode not supported falling back to standard mode.\");\n                }\n                this.flush();\n                this._injected = true;\n            }\n            return;\n        }\n        this._serverSheet = {\n            cssRules: [],\n            insertRule: function(rule, index) {\n                if (typeof index === \"number\") {\n                    _this._serverSheet.cssRules[index] = {\n                        cssText: rule\n                    };\n                } else {\n                    _this._serverSheet.cssRules.push({\n                        cssText: rule\n                    });\n                }\n                return index;\n            },\n            deleteRule: function(index) {\n                _this._serverSheet.cssRules[index] = null;\n            }\n        };\n    };\n    _proto.getSheetForTag = function getSheetForTag(tag) {\n        if (tag.sheet) {\n            return tag.sheet;\n        }\n        // this weirdness brought to you by firefox\n        for(var i = 0; i < document.styleSheets.length; i++){\n            if (document.styleSheets[i].ownerNode === tag) {\n                return document.styleSheets[i];\n            }\n        }\n    };\n    _proto.getSheet = function getSheet() {\n        return this.getSheetForTag(this._tags[this._tags.length - 1]);\n    };\n    _proto.insertRule = function insertRule(rule, index) {\n        invariant$1(isString(rule), \"`insertRule` accepts only strings\");\n        if (typeof window === \"undefined\") {\n            if (typeof index !== \"number\") {\n                index = this._serverSheet.cssRules.length;\n            }\n            this._serverSheet.insertRule(rule, index);\n            return this._rulesCount++;\n        }\n        if (this._optimizeForSpeed) {\n            var sheet = this.getSheet();\n            if (typeof index !== \"number\") {\n                index = sheet.cssRules.length;\n            }\n            // this weirdness for perf, and chrome's weird bug\n            // https://stackoverflow.com/questions/20007992/chrome-suddenly-stopped-accepting-insertrule\n            try {\n                sheet.insertRule(rule, index);\n            } catch (error) {\n                if (!isProd) {\n                    console.warn(\"StyleSheet: illegal rule: \\n\\n\" + rule + \"\\n\\nSee https://stackoverflow.com/q/20007992 for more info\");\n                }\n                return -1;\n            }\n        } else {\n            var insertionPoint = this._tags[index];\n            this._tags.push(this.makeStyleTag(this._name, rule, insertionPoint));\n        }\n        return this._rulesCount++;\n    };\n    _proto.replaceRule = function replaceRule(index, rule) {\n        if (this._optimizeForSpeed || typeof window === \"undefined\") {\n            var sheet = typeof window !== \"undefined\" ? this.getSheet() : this._serverSheet;\n            if (!rule.trim()) {\n                rule = this._deletedRulePlaceholder;\n            }\n            if (!sheet.cssRules[index]) {\n                // @TBD Should we throw an error?\n                return index;\n            }\n            sheet.deleteRule(index);\n            try {\n                sheet.insertRule(rule, index);\n            } catch (error) {\n                if (!isProd) {\n                    console.warn(\"StyleSheet: illegal rule: \\n\\n\" + rule + \"\\n\\nSee https://stackoverflow.com/q/20007992 for more info\");\n                }\n                // In order to preserve the indices we insert a deleteRulePlaceholder\n                sheet.insertRule(this._deletedRulePlaceholder, index);\n            }\n        } else {\n            var tag = this._tags[index];\n            invariant$1(tag, \"old rule at index `\" + index + \"` not found\");\n            tag.textContent = rule;\n        }\n        return index;\n    };\n    _proto.deleteRule = function deleteRule(index) {\n        if (typeof window === \"undefined\") {\n            this._serverSheet.deleteRule(index);\n            return;\n        }\n        if (this._optimizeForSpeed) {\n            this.replaceRule(index, \"\");\n        } else {\n            var tag = this._tags[index];\n            invariant$1(tag, \"rule at index `\" + index + \"` not found\");\n            tag.parentNode.removeChild(tag);\n            this._tags[index] = null;\n        }\n    };\n    _proto.flush = function flush() {\n        this._injected = false;\n        this._rulesCount = 0;\n        if (typeof window !== \"undefined\") {\n            this._tags.forEach(function(tag) {\n                return tag && tag.parentNode.removeChild(tag);\n            });\n            this._tags = [];\n        } else {\n            // simpler on server\n            this._serverSheet.cssRules = [];\n        }\n    };\n    _proto.cssRules = function cssRules() {\n        var _this = this;\n        if (typeof window === \"undefined\") {\n            return this._serverSheet.cssRules;\n        }\n        return this._tags.reduce(function(rules, tag) {\n            if (tag) {\n                rules = rules.concat(Array.prototype.map.call(_this.getSheetForTag(tag).cssRules, function(rule) {\n                    return rule.cssText === _this._deletedRulePlaceholder ? null : rule;\n                }));\n            } else {\n                rules.push(null);\n            }\n            return rules;\n        }, []);\n    };\n    _proto.makeStyleTag = function makeStyleTag(name, cssString, relativeToTag) {\n        if (cssString) {\n            invariant$1(isString(cssString), \"makeStyleTag accepts only strings as second parameter\");\n        }\n        var tag = document.createElement(\"style\");\n        if (this._nonce) tag.setAttribute(\"nonce\", this._nonce);\n        tag.type = \"text/css\";\n        tag.setAttribute(\"data-\" + name, \"\");\n        if (cssString) {\n            tag.appendChild(document.createTextNode(cssString));\n        }\n        var head = document.head || document.getElementsByTagName(\"head\")[0];\n        if (relativeToTag) {\n            head.insertBefore(tag, relativeToTag);\n        } else {\n            head.appendChild(tag);\n        }\n        return tag;\n    };\n    _createClass(StyleSheet, [\n        {\n            key: \"length\",\n            get: function get() {\n                return this._rulesCount;\n            }\n        }\n    ]);\n    return StyleSheet;\n}();\nfunction invariant$1(condition, message) {\n    if (!condition) {\n        throw new Error(\"StyleSheet: \" + message + \".\");\n    }\n}\n\nfunction hash(str) {\n    var _$hash = 5381, i = str.length;\n    while(i){\n        _$hash = _$hash * 33 ^ str.charCodeAt(--i);\n    }\n    /* JavaScript does bitwise operations (like XOR, above) on 32-bit signed\n   * integers. Since we want the results to be always positive, convert the\n   * signed int to an unsigned by doing an unsigned bitshift. */ return _$hash >>> 0;\n}\nvar stringHash = hash;\n\nvar sanitize = function(rule) {\n    return rule.replace(/\\/style/gi, \"\\\\/style\");\n};\nvar cache = {};\n/**\n * computeId\n *\n * Compute and memoize a jsx id from a basedId and optionally props.\n */ function computeId(baseId, props) {\n    if (!props) {\n        return \"jsx-\" + baseId;\n    }\n    var propsToString = String(props);\n    var key = baseId + propsToString;\n    if (!cache[key]) {\n        cache[key] = \"jsx-\" + stringHash(baseId + \"-\" + propsToString);\n    }\n    return cache[key];\n}\n/**\n * computeSelector\n *\n * Compute and memoize dynamic selectors.\n */ function computeSelector(id, css) {\n    var selectoPlaceholderRegexp = /__jsx-style-dynamic-selector/g;\n    // Sanitize SSR-ed CSS.\n    // Client side code doesn't need to be sanitized since we use\n    // document.createTextNode (dev) and the CSSOM api sheet.insertRule (prod).\n    if (typeof window === \"undefined\") {\n        css = sanitize(css);\n    }\n    var idcss = id + css;\n    if (!cache[idcss]) {\n        cache[idcss] = css.replace(selectoPlaceholderRegexp, id);\n    }\n    return cache[idcss];\n}\n\nfunction mapRulesToStyle(cssRules, options) {\n    if (options === void 0) options = {};\n    return cssRules.map(function(args) {\n        var id = args[0];\n        var css = args[1];\n        return /*#__PURE__*/ React__default[\"default\"].createElement(\"style\", {\n            id: \"__\" + id,\n            // Avoid warnings upon render with a key\n            key: \"__\" + id,\n            nonce: options.nonce ? options.nonce : undefined,\n            dangerouslySetInnerHTML: {\n                __html: css\n            }\n        });\n    });\n}\nvar StyleSheetRegistry = /*#__PURE__*/ function() {\n    function StyleSheetRegistry(param) {\n        var ref = param === void 0 ? {} : param, _styleSheet = ref.styleSheet, styleSheet = _styleSheet === void 0 ? null : _styleSheet, _optimizeForSpeed = ref.optimizeForSpeed, optimizeForSpeed = _optimizeForSpeed === void 0 ? false : _optimizeForSpeed;\n        this._sheet = styleSheet || new StyleSheet({\n            name: \"styled-jsx\",\n            optimizeForSpeed: optimizeForSpeed\n        });\n        this._sheet.inject();\n        if (styleSheet && typeof optimizeForSpeed === \"boolean\") {\n            this._sheet.setOptimizeForSpeed(optimizeForSpeed);\n            this._optimizeForSpeed = this._sheet.isOptimizeForSpeed();\n        }\n        this._fromServer = undefined;\n        this._indices = {};\n        this._instancesCounts = {};\n    }\n    var _proto = StyleSheetRegistry.prototype;\n    _proto.add = function add(props) {\n        var _this = this;\n        if (undefined === this._optimizeForSpeed) {\n            this._optimizeForSpeed = Array.isArray(props.children);\n            this._sheet.setOptimizeForSpeed(this._optimizeForSpeed);\n            this._optimizeForSpeed = this._sheet.isOptimizeForSpeed();\n        }\n        if (typeof window !== \"undefined\" && !this._fromServer) {\n            this._fromServer = this.selectFromServer();\n            this._instancesCounts = Object.keys(this._fromServer).reduce(function(acc, tagName) {\n                acc[tagName] = 0;\n                return acc;\n            }, {});\n        }\n        var ref = this.getIdAndRules(props), styleId = ref.styleId, rules = ref.rules;\n        // Deduping: just increase the instances count.\n        if (styleId in this._instancesCounts) {\n            this._instancesCounts[styleId] += 1;\n            return;\n        }\n        var indices = rules.map(function(rule) {\n            return _this._sheet.insertRule(rule);\n        })// Filter out invalid rules\n        .filter(function(index) {\n            return index !== -1;\n        });\n        this._indices[styleId] = indices;\n        this._instancesCounts[styleId] = 1;\n    };\n    _proto.remove = function remove(props) {\n        var _this = this;\n        var styleId = this.getIdAndRules(props).styleId;\n        invariant(styleId in this._instancesCounts, \"styleId: `\" + styleId + \"` not found\");\n        this._instancesCounts[styleId] -= 1;\n        if (this._instancesCounts[styleId] < 1) {\n            var tagFromServer = this._fromServer && this._fromServer[styleId];\n            if (tagFromServer) {\n                tagFromServer.parentNode.removeChild(tagFromServer);\n                delete this._fromServer[styleId];\n            } else {\n                this._indices[styleId].forEach(function(index) {\n                    return _this._sheet.deleteRule(index);\n                });\n                delete this._indices[styleId];\n            }\n            delete this._instancesCounts[styleId];\n        }\n    };\n    _proto.update = function update(props, nextProps) {\n        this.add(nextProps);\n        this.remove(props);\n    };\n    _proto.flush = function flush() {\n        this._sheet.flush();\n        this._sheet.inject();\n        this._fromServer = undefined;\n        this._indices = {};\n        this._instancesCounts = {};\n    };\n    _proto.cssRules = function cssRules() {\n        var _this = this;\n        var fromServer = this._fromServer ? Object.keys(this._fromServer).map(function(styleId) {\n            return [\n                styleId,\n                _this._fromServer[styleId]\n            ];\n        }) : [];\n        var cssRules = this._sheet.cssRules();\n        return fromServer.concat(Object.keys(this._indices).map(function(styleId) {\n            return [\n                styleId,\n                _this._indices[styleId].map(function(index) {\n                    return cssRules[index].cssText;\n                }).join(_this._optimizeForSpeed ? \"\" : \"\\n\")\n            ];\n        })// filter out empty rules\n        .filter(function(rule) {\n            return Boolean(rule[1]);\n        }));\n    };\n    _proto.styles = function styles(options) {\n        return mapRulesToStyle(this.cssRules(), options);\n    };\n    _proto.getIdAndRules = function getIdAndRules(props) {\n        var css = props.children, dynamic = props.dynamic, id = props.id;\n        if (dynamic) {\n            var styleId = computeId(id, dynamic);\n            return {\n                styleId: styleId,\n                rules: Array.isArray(css) ? css.map(function(rule) {\n                    return computeSelector(styleId, rule);\n                }) : [\n                    computeSelector(styleId, css)\n                ]\n            };\n        }\n        return {\n            styleId: computeId(id),\n            rules: Array.isArray(css) ? css : [\n                css\n            ]\n        };\n    };\n    /**\n   * selectFromServer\n   *\n   * Collects style tags from the document with id __jsx-XXX\n   */ _proto.selectFromServer = function selectFromServer() {\n        var elements = Array.prototype.slice.call(document.querySelectorAll('[id^=\"__jsx-\"]'));\n        return elements.reduce(function(acc, element) {\n            var id = element.id.slice(2);\n            acc[id] = element;\n            return acc;\n        }, {});\n    };\n    return StyleSheetRegistry;\n}();\nfunction invariant(condition, message) {\n    if (!condition) {\n        throw new Error(\"StyleSheetRegistry: \" + message + \".\");\n    }\n}\nvar StyleSheetContext = /*#__PURE__*/ React.createContext(null);\nStyleSheetContext.displayName = \"StyleSheetContext\";\nfunction createStyleRegistry() {\n    return new StyleSheetRegistry();\n}\nfunction StyleRegistry(param) {\n    var configuredRegistry = param.registry, children = param.children;\n    var rootRegistry = React.useContext(StyleSheetContext);\n    var ref = React.useState(function() {\n        return rootRegistry || configuredRegistry || createStyleRegistry();\n    }), registry = ref[0];\n    return /*#__PURE__*/ React__default[\"default\"].createElement(StyleSheetContext.Provider, {\n        value: registry\n    }, children);\n}\nfunction useStyleRegistry() {\n    return React.useContext(StyleSheetContext);\n}\n\n// Opt-into the new `useInsertionEffect` API in React 18, fallback to `useLayoutEffect`.\n// https://github.com/reactwg/react-18/discussions/110\nvar useInsertionEffect = React__default[\"default\"].useInsertionEffect || React__default[\"default\"].useLayoutEffect;\nvar defaultRegistry = typeof window !== \"undefined\" ? createStyleRegistry() : undefined;\nfunction JSXStyle(props) {\n    var registry = defaultRegistry ? defaultRegistry : useStyleRegistry();\n    // If `registry` does not exist, we do nothing here.\n    if (!registry) {\n        return null;\n    }\n    if (typeof window === \"undefined\") {\n        registry.add(props);\n        return null;\n    }\n    useInsertionEffect(function() {\n        registry.add(props);\n        return function() {\n            registry.remove(props);\n        };\n    // props.children can be string[], will be striped since id is identical\n    }, [\n        props.id,\n        String(props.dynamic)\n    ]);\n    return null;\n}\nJSXStyle.dynamic = function(info) {\n    return info.map(function(tagInfo) {\n        var baseId = tagInfo[0];\n        var props = tagInfo[1];\n        return computeId(baseId, props);\n    }).join(\" \");\n};\n\nexports.StyleRegistry = StyleRegistry;\nexports.createStyleRegistry = createStyleRegistry;\nexports.style = JSXStyle;\nexports.useStyleRegistry = useStyleRegistry;\n","module.exports = require('./dist/index').style\n","function toPositiveInteger(value, fallback = 0) {\r\n  const numeric = Number.parseInt(value, 10);\r\n  if (Number.isFinite(numeric) && numeric > 0) {\r\n    return numeric;\r\n  }\r\n  return fallback;\r\n}\r\n\r\nfunction normalizeDateKey(value) {\r\n  if (!value) {\r\n    return null;\r\n  }\r\n  const date = value instanceof Date ? value : new Date(value);\r\n  if (Number.isNaN(date.getTime())) {\r\n    return null;\r\n  }\r\n  const year = date.getFullYear();\r\n  const month = String(date.getMonth() + 1).padStart(2, \"0\");\r\n  const day = String(date.getDate()).padStart(2, \"0\");\r\n  return `${year}-${month}-${day}`;\r\n}\r\n\r\nfunction countUniqueLogsInCurrentMonth(moodLogs = []) {\r\n  const today = new Date();\r\n  const targetPrefix = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, \"0\")}`;\r\n  const uniqueDates = new Set();\r\n\r\n  moodLogs.forEach((log = {}) => {\r\n    const dateKey = normalizeDateKey(log.date);\r\n    if (!dateKey) {\r\n      return;\r\n    }\r\n    if (dateKey.startsWith(targetPrefix)) {\r\n      uniqueDates.add(dateKey);\r\n    }\r\n  });\r\n\r\n  return uniqueDates.size;\r\n}\r\n\r\nfunction hasCompletedOnboarding(data = {}) {\r\n  if (!data.onboardingCompleted) {\r\n    return false;\r\n  }\r\n  const onboarding = data.onboardingData || {};\r\n  const hasLastPeriodStart = Boolean(onboarding.lastPeriodStart);\r\n  const hasCycleLength = toPositiveInteger(onboarding.cycleLength, 0) > 0;\r\n  const hasPeriodLength = toPositiveInteger(onboarding.periodLength, 0) > 0;\r\n  return hasLastPeriodStart && hasCycleLength && hasPeriodLength;\r\n}\r\n\r\n// Achievement definitions\r\nexport const ACHIEVEMENTS = [\r\n  {\r\n    id: \"streak_7\",\r\n    title: \"7-Day Streak\",\r\n    description: \"Catat mood 7 hari berturut-turut.\",\r\n    condition: (data) => Number.isInteger(data.streak) && data.streak >= 7\r\n  },\r\n  {\r\n    id: \"streak_30\",\r\n    title: \"30-Day Club\",\r\n    description: \"Pertahankan streak selama 30 hari penuh.\",\r\n    condition: (data) => Number.isInteger(data.streak) && data.streak >= 30\r\n  },\r\n  {\r\n    id: \"cycle_predictor\",\r\n    title: \"Cycle Predictor Pro\",\r\n    description: \"Lengkapi data onboarding untuk bantu prediksi siklus.\",\r\n    condition: (data) => hasCompletedOnboarding(data)\r\n  },\r\n  {\r\n    id: \"monthly_mood_master\",\r\n    title: \"Monthly Mood Master\",\r\n    description: \"Catat minimal 20 hari mood dalam bulan ini.\",\r\n    condition: (data) => countUniqueLogsInCurrentMonth(data.moodLogs) >= 20\r\n  }\r\n];\r\n\r\n/**\r\n * Calculate user achievements based on app data\r\n * @param {Object} data - App data including moodLogs, streak, consistency\r\n * @returns {Array} - Array of earned achievements\r\n */\r\nexport function calculateAchievements(data) {\r\n  if (!data || !Array.isArray(data.moodLogs)) {\r\n    return [];\r\n  }\r\n\r\n  return ACHIEVEMENTS.filter((achievement) => {\r\n    try {\r\n      return achievement.condition(data) === true;\r\n    } catch (error) {\r\n      console.error(`Error evaluating achievement ${achievement.id}:`, error);\r\n      return false;\r\n    }\r\n  });\r\n}","'use client';\r\n\r\nimport { useEffect, useMemo, useRef, useState } from 'react';\r\nimport { gsap } from 'gsap';\r\nimport ScrollTrigger from 'gsap/ScrollTrigger';\r\n\r\ngsap.registerPlugin(ScrollTrigger);\r\n\r\nconst GUIDE_SECTIONS = [\r\n  {\r\n    id: 'intro',\r\n    title: 'Apa itu haid?',\r\n    description: 'Haid (atau menstruasi) adalah proses alami di mana tubuh mengeluarkan darah dari rahim. Ini tandanya tubuh kamu sudah tumbuh menjadi perempuan dewasa.',\r\n    accent: 'from-pink-100 via-white to-orange-50',\r\n    visual: {\r\n      imageSrc: '/image/placeholder-gate.png',\r\n      alt: 'Remaja dan kalender haid',\r\n    },\r\n  },\r\n  {\r\n    id: 'signs',\r\n    title: 'Kenapa haid bisa terjadi?',\r\n    description: 'Setiap bulan, tubuhmu mempersiapkan rahim untuk kehamilan. Kalau nggak terjadi pembuahan, lapisan rahim dilepaskan dan keluar sebagai darah haid.',\r\n    accent: 'from-rose-100 via-white to-purple-50',\r\n    visual: {\r\n      imageSrc: '/image/phase-luteal.png',\r\n      alt: 'Remaja dan bulan',\r\n    },\r\n  },\r\n  {\r\n    id: 'prep',\r\n    title: 'Persiapan apa yang bisa kamu lakukan?',\r\n    description: 'Siapkan tas kecil berisi: tisu basah, pembalut, obat nyeri, dan celana dalam. Nanti kalau sudah haid, pahami siklusmu biar nggak kaget.',\r\n    accent: 'from-amber-100 via-white to-green-50',\r\n    visual: {\r\n      imageSrc: '/image/hero-vaksin.png',\r\n      alt: 'Remaja membawa obat',\r\n    },\r\n  },\r\n  {\r\n    id: 'support',\r\n    title: 'Apa saja tanda menjelang haid?',\r\n    description:\r\n      '1-2 minggu sebelum haid kamu mungkin merasakan: kram perut, punggung pegal, jerawatan, mudah lelah, atau mood naik-turun. Semua itu normal! Tapi kalau ganggu aktivitasmu, catat aja di Siklusku. Pelajari polanya dan langsung cari bantuan kalau perlu.',\r\n    accent: 'from-blue-100 via-white to-emerald-50',\r\n    visual: {\r\n      imageSrc: '/image/phase-menstruation.png',\r\n      alt: 'Remaja membawa teh hangat',\r\n    },\r\n  },\r\n];\r\n\r\nexport default function FirstPeriodGuide({ onComplete }) {\r\n  const containerRef = useRef(null);\r\n  const [reducedMotion, setReducedMotion] = useState(false);\r\n  const [activeSection, setActiveSection] = useState(GUIDE_SECTIONS[0].id);\r\n\r\n  // detect system reduced motion\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n    const media = window.matchMedia('(prefers-reduced-motion: reduce)');\r\n    const update = () => setReducedMotion(media.matches);\r\n    update();\r\n    media.addEventListener('change', update);\r\n    return () => media.removeEventListener('change', update);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!containerRef.current) return;\r\n\r\n    const guideSections = Array.from(containerRef.current.querySelectorAll('[data-guide-section]'));\r\n\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        const visible = entries.filter((entry) => entry.isIntersecting).sort((a, b) => b.intersectionRatio - a.intersectionRatio);\r\n        if (visible.length > 0) {\r\n          const nextActive = visible[0].target.getAttribute('data-guide-section');\r\n          if (nextActive) setActiveSection(nextActive);\r\n        }\r\n      },\r\n      { root: null, threshold: [0.25, 0.5, 0.75] }\r\n    );\r\n\r\n    guideSections.forEach((section) => observer.observe(section));\r\n\r\n    let ctx;\r\n    if (!reducedMotion) {\r\n      ctx = gsap.context(() => {\r\n        guideSections.forEach((section) => {\r\n          ScrollTrigger.create({\r\n            trigger: section,\r\n            start: 'top 85%',\r\n            once: true,\r\n            onEnter: () => {\r\n              gsap.fromTo(section, { autoAlpha: 0, y: 12, willChange: 'transform, opacity' }, { autoAlpha: 1, y: 0, duration: 0.5, ease: 'power2.out', clearProps: 'will-change' });\r\n            },\r\n          });\r\n        });\r\n      }, containerRef);\r\n    }\r\n\r\n    return () => {\r\n      guideSections.forEach((section) => observer.unobserve(section));\r\n      observer.disconnect();\r\n      ScrollTrigger.getAll().forEach((t) => t.kill());\r\n      if (ctx) ctx.revert();\r\n    };\r\n  }, [reducedMotion]);\r\n\r\n  const progressItems = useMemo(\r\n    () =>\r\n      GUIDE_SECTIONS.map((section) => ({\r\n        id: section.id,\r\n        title: section.title,\r\n      })),\r\n    []\r\n  );\r\n\r\n  return (\r\n    <div ref={containerRef} className=\"space-y-8\">\r\n      <header className=\"rounded-3xl bg-linear-to-r from-pink-100 via-white to-pink-50 p-6 shadow-sm\">\r\n        <h3 className=\"mt-2 text-2xl font-semibold text-slate-800\">Mari berkenalan dengan tubuhmu!</h3>\r\n        <p className=\"mt-2 text-sm text-slate-600\">Haid itu fase alami yang cuma dialami perempuan. Dan kamu gaperlu takut! Sini deh, aku kasih tau segalanya tentang haid.</p>\r\n      </header>\r\n\r\n      <div className=\"flex flex-col gap-6 md:flex-row\">\r\n        {/* Progress nav */}\r\n        <nav aria-label=\"Progress panduan\" className=\"overflow-visible px-2 md:w-48 md:px-0\">\r\n          <ol className=\"flex flex-row gap-x-3 justify-between md:flex-col md:gap-4\">\r\n            {progressItems.map((item, index) => {\r\n              const isActive = item.id === activeSection;\r\n              return (\r\n                <li key={item.id} className=\"flex min-w-0 items-center gap-3\">\r\n                  <span\r\n                    className={`flex h-8 w-8 shrink-0 items-center justify-center rounded-full border text-xs font-semibold transition-colors ${\r\n                      isActive ? 'border-pink-500 bg-pink-500 text-white' : 'border-pink-200 bg-white text-pink-400'\r\n                    }`}\r\n                    aria-hidden=\"true\"\r\n                  >\r\n                    {index + 1}\r\n                  </span>\r\n                  <span className={`truncate text-xs font-medium ${isActive ? 'text-pink-600' : 'text-slate-400'}`} aria-current={isActive ? 'step' : undefined} title={item.title}>\r\n                    {item.title}\r\n                  </span>\r\n                </li>\r\n              );\r\n            })}\r\n          </ol>\r\n        </nav>\r\n\r\n        <div className=\"flex-1 space-y-6\" aria-label=\"Panduan persiapan haid\">\r\n          {GUIDE_SECTIONS.map((section, index) => (\r\n            <section key={section.id} id={section.id} aria-labelledby={`${section.id}-heading`} data-guide-section={section.id} className=\"rounded-2xl border border-pink-100 bg-white p-6 shadow-sm\">\r\n              <div className={`grid gap-4 sm:grid-cols-[auto_1fr] sm:items-center bg-linear-to-r ${section.accent} rounded-2xl p-5`}>\r\n                <div className=\"relative flex h-28 w-28 items-center justify-center overflow-hidden rounded-2xl bg-white/70 shadow-sm\">\r\n                  <img src={section.visual.imageSrc} alt={section.visual.alt} className=\"h-full w-full object-contain\" />\r\n                </div>\r\n                <div>\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <span className=\"flex h-10 w-10 items-center justify-center rounded-full bg-white/70 text-base font-semibold text-pink-600\" aria-hidden=\"true\">\r\n                      {index + 1}\r\n                    </span>\r\n                    <h4 id={`${section.id}-heading`} className=\"text-lg font-semibold text-slate-800\">\r\n                      {section.title}\r\n                    </h4>\r\n                  </div>\r\n                  <p className=\"mt-3 text-sm leading-relaxed text-slate-600\">{section.description}</p>\r\n                </div>\r\n              </div>\r\n            </section>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex flex-col items-center gap-3 rounded-3xl bg-white p-6 text-center\">\r\n        <button\r\n          data-ripple=\"true\"\r\n          type=\"button\"\r\n          className=\"relative cursor-pointer rounded-full bg-pink-500 px-6 py-3 text-sm font-semibold text-white shadow-sm transition-transform duration-200 ease-out hover:shadow-lg motion-safe:hover:scale-[1.03] motion-reduce:transform-none focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-600 overflow-hidden\"\r\n          aria-label=\"Selesai membaca panduan, kembali ke dashboard\"\r\n          onClick={onComplete}\r\n        >\r\n          Buka Siklusku\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","const STORAGE_KEYS = {\r\n  onboardingCompleted: \"risa:cycleOnboardingCompleted\",\r\n  onboardingData: \"risa:cycleOnboardingData\",\r\n  moodLogs: \"risa:moodLogs\",\r\n  streak: \"risa:streak\",\r\n  goals: \"risa:goals\",\r\n  loveLetterShownOnce: \"risa:loveLetterShownOnce\",\r\n  settings: \"risa:settings\"\r\n};\r\n\r\nconst DEFAULT_VALUES = {\r\n  [STORAGE_KEYS.onboardingCompleted]: false,\r\n  [STORAGE_KEYS.onboardingData]: {\r\n    lastPeriodStart: null,\r\n    lastPeriodEnd: null,\r\n    cycleLength: 28,\r\n    periodLength: 5,\r\n    regularity: \"regular\",\r\n    painScale: 5,\r\n    birthYear: null,\r\n    goals: []\r\n  },\r\n  [STORAGE_KEYS.moodLogs]: [],\r\n  [STORAGE_KEYS.streak]: 0,\r\n  [STORAGE_KEYS.goals]: [],\r\n  [STORAGE_KEYS.loveLetterShownOnce]: false,\r\n  [STORAGE_KEYS.settings]: {\r\n    nudgesEnabled: true,\r\n    reducedMotion: false,\r\n    lastNudgeShownDate: null\r\n  }\r\n};\r\n\r\nconst VALIDATORS = {\r\n  [STORAGE_KEYS.onboardingCompleted]: (value) => typeof value === \"boolean\",\r\n  [STORAGE_KEYS.onboardingData]: (value) =>\r\n    value && typeof value === \"object\" &&\r\n    [\"cycleLength\", \"periodLength\"].every((key) => typeof value[key] === \"number\"),\r\n  [STORAGE_KEYS.moodLogs]: (value) => Array.isArray(value),\r\n  [STORAGE_KEYS.streak]: (value) => Number.isInteger(value) && value >= 0,\r\n  [STORAGE_KEYS.goals]: (value) => Array.isArray(value),\r\n  [STORAGE_KEYS.loveLetterShownOnce]: (value) => typeof value === \"boolean\",\r\n  [STORAGE_KEYS.settings]: (value) =>\r\n    value && typeof value === \"object\" &&\r\n    typeof value.nudgesEnabled === \"boolean\" &&\r\n    typeof value.reducedMotion === \"boolean\" &&\r\n    (value.lastNudgeShownDate === null ||\r\n      value.lastNudgeShownDate === undefined ||\r\n      typeof value.lastNudgeShownDate === \"string\")\r\n};\r\n\r\nfunction hasWindow() {\r\n  return typeof window !== \"undefined\";\r\n}\r\n\r\nfunction getScopedStorage() {\r\n  if (!hasWindow()) {\r\n    return null;\r\n  }\r\n  try {\r\n    return window.localStorage;\r\n  } catch (error) {\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction parseJson(raw) {\r\n  if (raw === null || raw === undefined || raw === \"\") {\r\n    return null;\r\n  }\r\n  try {\r\n    return JSON.parse(raw);\r\n  } catch (error) {\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction applyGuard(key, value) {\r\n  const validator = VALIDATORS[key];\r\n  if (!validator) {\r\n    return value;\r\n  }\r\n  return validator(value) ? value : DEFAULT_VALUES[key];\r\n}\r\n\r\nexport function getLocalValue(key) {\r\n  const storage = getScopedStorage();\r\n  if (!storage) {\r\n    return DEFAULT_VALUES[key];\r\n  }\r\n  const parsed = parseJson(storage.getItem(key));\r\n  if (parsed === null || parsed === undefined) {\r\n    return DEFAULT_VALUES[key];\r\n  }\r\n  return applyGuard(key, parsed);\r\n}\r\n\r\nexport function setLocalValue(key, value) {\r\n  const storage = getScopedStorage();\r\n  if (!storage) {\r\n    return;\r\n  }\r\n  const guarded = applyGuard(key, value);\r\n  try {\r\n    storage.setItem(key, JSON.stringify(guarded));\r\n  } catch (error) {\r\n    console.warn(\"Failed to persist value\", key, error);\r\n  }\r\n}\r\n\r\nexport function mergeLocalValue(key, partial) {\r\n  const current = getLocalValue(key);\r\n  const next = { ...current, ...partial };\r\n  setLocalValue(key, next);\r\n  return next;\r\n}\r\n\r\nexport function removeLocalValue(key) {\r\n  const storage = getScopedStorage();\r\n  if (!storage) {\r\n    return;\r\n  }\r\n  try {\r\n    storage.removeItem(key);\r\n  } catch (error) {\r\n    console.warn(\"Failed to remove value\", key, error);\r\n  }\r\n}\r\n\r\nexport function clearAllSiklusData() {\r\n  const storage = getScopedStorage();\r\n  if (!storage) {\r\n    return;\r\n  }\r\n  Object.values(STORAGE_KEYS).forEach((key) => {\r\n    try {\r\n      storage.removeItem(key);\r\n    } catch (error) {\r\n      console.warn(\"Failed to clear key\", key, error);\r\n    }\r\n  });\r\n}\r\n\r\nexport { STORAGE_KEYS, DEFAULT_VALUES };\r\n\r\n\r\n","const MS_PER_DAY = 24 * 60 * 60 * 1000;\r\n\r\nfunction normalizeDate(value) {\r\n  const date = value instanceof Date ? value : new Date(value);\r\n  if (Number.isNaN(date.getTime())) {\r\n    return null;\r\n  }\r\n  return new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n}\r\n\r\nfunction toDate(value) {\r\n  if (!value) {\r\n    return null;\r\n  }\r\n  if (value instanceof Date) {\r\n    return normalizeDate(value);\r\n  }\r\n  if (typeof value === \"string\") {\r\n    const parts = value.split(\"-\");\r\n    if (parts.length === 3) {\r\n      const [year, month, day] = parts.map((part) => Number.parseInt(part, 10));\r\n      if ([year, month, day].every((part) => Number.isFinite(part))) {\r\n        const date = new Date(year, month - 1, day);\r\n        return Number.isNaN(date.getTime()) ? null : normalizeDate(date);\r\n      }\r\n    }\r\n  }\r\n  return normalizeDate(value);\r\n}\r\n\r\nfunction normalizePositiveInteger(value, fallback) {\r\n  const numeric = Number.parseInt(value, 10);\r\n  if (Number.isFinite(numeric) && numeric > 0) {\r\n    return numeric;\r\n  }\r\n  return fallback;\r\n}\r\n\r\nfunction formatDateLocal(date) {\r\n  const year = date.getFullYear();\r\n  const month = String(date.getMonth() + 1).padStart(2, \"0\");\r\n  const day = String(date.getDate()).padStart(2, \"0\");\r\n  return [year, month, day].join(\"-\");\r\n}\r\n\r\nexport function formatDisplayDate(value) {\r\n  const date = toDate(value);\r\n  if (!date) {\r\n    return \"\";\r\n  }\r\n  const day = String(date.getDate()).padStart(2, \"0\");\r\n  const month = String(date.getMonth() + 1).padStart(2, \"0\");\r\n  const year = date.getFullYear();\r\n  return day + \"/\" + month + \"/\" + year;\r\n}\r\n\r\nfunction diffInDays(start, end) {\r\n  const startDate = toDate(start);\r\n  const endDate = toDate(end);\r\n  if (!startDate || !endDate) {\r\n    return null;\r\n  }\r\n  return Math.floor((endDate.getTime() - startDate.getTime()) / MS_PER_DAY);\r\n}\r\n\r\nexport function cycleDay(referenceDate, lastPeriodStart, cycleLength = 28) {\r\n  const start = toDate(lastPeriodStart);\r\n  const today = toDate(referenceDate) || toDate(new Date());\r\n  const normalizedCycleLength = normalizePositiveInteger(cycleLength, 28);\r\n\r\n  if (!start || !today || !normalizedCycleLength) {\r\n    return null;\r\n  }\r\n\r\n  const diff = Math.floor((today.getTime() - start.getTime()) / MS_PER_DAY);\r\n  if (!Number.isFinite(diff)) {\r\n    return null;\r\n  }\r\n\r\n  const modulo = ((diff % normalizedCycleLength) + normalizedCycleLength) % normalizedCycleLength;\r\n  return modulo + 1;\r\n}\r\n\r\nexport function getCycleDay(referenceDate, lastPeriodStart, cycleLength) {\r\n  return cycleDay(referenceDate, lastPeriodStart, cycleLength);\r\n}\r\n\r\nexport function ovulationDay(cycleLength = 28) {\r\n  const normalizedCycleLength = normalizePositiveInteger(cycleLength, 28);\r\n  return Math.max(1, normalizedCycleLength - 14);\r\n}\r\n\r\nexport function calculatePhase(cycleDayValue, periodLength = 5, cycleLength = 28) {\r\n  const normalizedCycleLength = normalizePositiveInteger(cycleLength, 28);\r\n  const normalizedPeriodLength = Math.min(\r\n    normalizedCycleLength,\r\n    Math.max(1, normalizePositiveInteger(periodLength, 5))\r\n  );\r\n\r\n  if (!cycleDayValue) {\r\n    return \"unknown\";\r\n  }\r\n\r\n  const day = ((Math.round(cycleDayValue) - 1 + normalizedCycleLength) % normalizedCycleLength) + 1;\r\n\r\n  if (day <= normalizedPeriodLength) {\r\n    return \"menstruation\";\r\n  }\r\n\r\n  const ovulationStart = Math.min(\r\n    normalizedCycleLength,\r\n    Math.max(normalizedPeriodLength + 1, ovulationDay(normalizedCycleLength))\r\n  );\r\n  const ovulationEnd = Math.min(normalizedCycleLength, ovulationStart + 1);\r\n\r\n  if (day >= ovulationStart && day <= ovulationEnd) {\r\n    return \"ovulation\";\r\n  }\r\n\r\n  if (day < ovulationStart) {\r\n    return \"follicular\";\r\n  }\r\n\r\n  return \"luteal\";\r\n}\r\n\r\nexport function predictNextPeriod(lastPeriodStart, cycleLength = 28) {\r\n  const start = toDate(lastPeriodStart);\r\n  const normalizedCycleLength = normalizePositiveInteger(cycleLength, 28);\r\n  if (!start) {\r\n    return null;\r\n  }\r\n  const next = new Date(start.getTime() + normalizedCycleLength * MS_PER_DAY);\r\n  return formatDateLocal(next);\r\n}\r\n\r\nexport function calculatePeriodLength(start, end) {\r\n  const diff = diffInDays(start, end);\r\n  if (diff === null) {\r\n    return null;\r\n  }\r\n  return Math.max(1, diff + 1);\r\n}\r\n\r\nexport function calculateCycleLength(prevStart, nextStart) {\r\n  const diff = diffInDays(prevStart, nextStart);\r\n  if (diff === null) {\r\n    return null;\r\n  }\r\n  return Math.max(1, diff);\r\n}\r\n\r\nfunction average(values) {\r\n  if (!values || values.length === 0) {\r\n    return null;\r\n  }\r\n  const sum = values.reduce((total, value) => total + value, 0);\r\n  return Math.round(sum / values.length);\r\n}\r\n\r\nexport function calculateCycleSummary(periods = []) {\r\n  if (!Array.isArray(periods) || periods.length === 0) {\r\n    return {\r\n      averageCycleLength: 28,\r\n      averagePeriodLength: 5,\r\n      cycleHistory: []\r\n    };\r\n  }\r\n\r\n  const normalizedEntries = [...periods]\r\n    .map((entry) => {\r\n      const start = toDate(entry.start);\r\n      if (!start) {\r\n        return null;\r\n      }\r\n      const end = entry.end ? toDate(entry.end) : null;\r\n      return {\r\n        start,\r\n        end,\r\n        startIso: formatDateLocal(start),\r\n        endIso: end ? formatDateLocal(end) : null,\r\n        predicted: Boolean(entry.predicted)\r\n      };\r\n    })\r\n    .filter(Boolean)\r\n    .sort((a, b) => a.start.getTime() - b.start.getTime());\r\n\r\n  if (normalizedEntries.length === 0) {\r\n    return {\r\n      averageCycleLength: 28,\r\n      averagePeriodLength: 5,\r\n      cycleHistory: []\r\n    };\r\n  }\r\n\r\n  const cycleLengths = [];\r\n  const periodLengths = [];\r\n  const cycleHistory = [];\r\n\r\n  normalizedEntries.forEach((entry, index) => {\r\n    if (entry.end) {\r\n      const periodLength = calculatePeriodLength(entry.start, entry.end);\r\n      if (periodLength) {\r\n        periodLengths.push(periodLength);\r\n      }\r\n    }\r\n    const next = normalizedEntries[index + 1];\r\n    if (next) {\r\n      const cycleLength = calculateCycleLength(entry.start, next.start);\r\n      if (cycleLength) {\r\n        cycleLengths.push(cycleLength);\r\n        if (!entry.predicted && !next.predicted) {\r\n          cycleHistory.push({\r\n            start: entry.startIso,\r\n            end: next.startIso,\r\n            length: cycleLength\r\n          });\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  return {\r\n    averageCycleLength: average(cycleLengths) || 28,\r\n    averagePeriodLength: average(periodLengths) || 5,\r\n    cycleHistory\r\n  };\r\n}\r\n\r\nexport function buildCycleTimeline({\r\n  lastPeriodStart,\r\n  cycleLength = 28,\r\n  periodLength = 5\r\n} = {}) {\r\n  const start = toDate(lastPeriodStart);\r\n  const normalizedCycleLength = normalizePositiveInteger(cycleLength, 28);\r\n  const normalizedPeriodLength = Math.min(\r\n    normalizedCycleLength,\r\n    Math.max(1, normalizePositiveInteger(periodLength, 5))\r\n  );\r\n\r\n  if (!start) {\r\n    return [];\r\n  }\r\n\r\n  const timeline = [];\r\n  for (let day = 1; day <= normalizedCycleLength; day += 1) {\r\n    const date = new Date(start.getTime() + (day - 1) * MS_PER_DAY);\r\n    timeline.push({\r\n      day,\r\n      date: formatDateLocal(date),\r\n      phase: calculatePhase(day, normalizedPeriodLength, normalizedCycleLength)\r\n    });\r\n  }\r\n  return timeline;\r\n}\r\n\r\nexport function projectUpcomingPeriods({\r\n  lastPeriodStart,\r\n  cyclesToProject = 3,\r\n  cycleLength = 28\r\n} = {}) {\r\n  const start = toDate(lastPeriodStart);\r\n  const normalizedCycleLength = normalizePositiveInteger(cycleLength, 28);\r\n  if (!start) {\r\n    return [];\r\n  }\r\n  return Array.from({ length: cyclesToProject }, (_, index) => {\r\n    const projection = new Date(start.getTime() + (index + 1) * normalizedCycleLength * MS_PER_DAY);\r\n    return formatDateLocal(projection);\r\n  });\r\n}\r\n\r\nexport { toDate };\r\n\r\n\r\n\r\n\r\n","/**\r\n * Streak and consistency calculation utilities for mood logs\r\n */\r\n\r\nconst MS_IN_DAY = 24 * 60 * 60 * 1000;\r\n\r\nfunction toLocalDateString(date) {\r\n  const year = date.getFullYear();\r\n  const month = String(date.getMonth() + 1).padStart(2, \"0\");\r\n  const day = String(date.getDate()).padStart(2, \"0\");\r\n  return `${year}-${month}-${day}`;\r\n}\r\n\r\nfunction parseDateString(value) {\r\n  if (typeof value !== \"string\") {\r\n    return null;\r\n  }\r\n\r\n  const trimmed = value.trim();\r\n  if (!/^\\d{4}-\\d{2}-\\d{2}$/.test(trimmed)) {\r\n    return null;\r\n  }\r\n\r\n  const [yearStr, monthStr, dayStr] = trimmed.split(\"-\");\r\n  const year = Number(yearStr);\r\n  const month = Number(monthStr);\r\n  const day = Number(dayStr);\r\n\r\n  if (!Number.isFinite(year) || !Number.isFinite(month) || !Number.isFinite(day)) {\r\n    return null;\r\n  }\r\n\r\n  if (month < 1 || month > 12 || day < 1 || day > 31) {\r\n    return null;\r\n  }\r\n\r\n  const date = new Date(year, month - 1, day);\r\n  if (date.getFullYear() !== year || date.getMonth() !== month - 1 || date.getDate() !== day) {\r\n    return null;\r\n  }\r\n\r\n  return date;\r\n}\r\n\r\nfunction extractLogDate(log) {\r\n  if (!log) {\r\n    return null;\r\n  }\r\n\r\n  if (log.date instanceof Date) {\r\n    return toLocalDateString(log.date);\r\n  }\r\n\r\n  if (typeof log.date === \"string\") {\r\n    const parsed = parseDateString(log.date);\r\n    if (parsed) {\r\n      return toLocalDateString(parsed);\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Calculate the longest streak of consecutive days with mood logs up to today.\r\n * @param {Array} moodLogs - Array of mood log entries\r\n * @returns {number} - Longest streak count\r\n */\r\nexport function calculateStreak(moodLogs = []) {\r\n  if (!Array.isArray(moodLogs) || moodLogs.length === 0) {\r\n    return 0;\r\n  }\r\n\r\n  const todayString = toLocalDateString(new Date());\r\n\r\n  const uniqueDates = Array.from(\r\n    new Set(\r\n      moodLogs\r\n        .map((log) => extractLogDate(log))\r\n        .filter((value) => Boolean(value))\r\n    )\r\n  ).filter((dateString) => dateString <= todayString);\r\n\r\n  if (!uniqueDates.length) {\r\n    return 0;\r\n  }\r\n\r\n  uniqueDates.sort();\r\n\r\n  let longest = 1;\r\n  let current = 0;\r\n  let previousDate = null;\r\n\r\n  uniqueDates.forEach((dateString) => {\r\n    const parsed = parseDateString(dateString);\r\n    if (!parsed) {\r\n      return;\r\n    }\r\n\r\n    if (!previousDate) {\r\n      current = 1;\r\n    } else {\r\n      const diffDays = Math.round((parsed - previousDate) / MS_IN_DAY);\r\n      current = diffDays === 1 ? current + 1 : 1;\r\n    }\r\n\r\n    longest = Math.max(longest, current);\r\n    previousDate = parsed;\r\n  });\r\n\r\n  return longest;\r\n}\r\n\r\n/**\r\n * Calculate consistency percentage based on logs in the last 30 days.\r\n * @param {Array} moodLogs - Array of mood log entries\r\n * @returns {number} - Consistency percentage (0-100)\r\n */\r\nexport function calculateConsistency(moodLogs = []) {\r\n  if (!Array.isArray(moodLogs) || moodLogs.length === 0) {\r\n    return 0;\r\n  }\r\n\r\n  const today = new Date();\r\n  const windowStart = new Date(today);\r\n  windowStart.setDate(windowStart.getDate() - 29); // Inclusive of today\r\n\r\n  const todayString = toLocalDateString(today);\r\n  const windowStartString = toLocalDateString(windowStart);\r\n\r\n  const daysWithLogs = new Set();\r\n\r\n  moodLogs.forEach((log) => {\r\n    const dateString = extractLogDate(log);\r\n    if (!dateString) {\r\n      return;\r\n    }\r\n\r\n    if (dateString < windowStartString || dateString > todayString) {\r\n      return;\r\n    }\r\n\r\n    daysWithLogs.add(dateString);\r\n  });\r\n\r\n  if (!daysWithLogs.size) {\r\n    return 0;\r\n  }\r\n\r\n  const percentage = Math.round((daysWithLogs.size / 30) * 100);\r\n  return Math.min(100, percentage);\r\n}","\"use client\";\r\n\r\nimport React, { createContext, useContext, useEffect, useMemo, useState } from \"react\";\r\n\r\n/**\r\n * Context-driven Tabs that support both controlled (value/onValueChange)\r\n * and uncontrolled (defaultValue) usage.\r\n * Works with: <Tabs value|defaultValue> <TabsList> <TabsTrigger value> <TabsContent value>\r\n */\r\n\r\nconst TabsCtx = createContext(null);\r\n\r\nfunction Tabs({ value, defaultValue = \"dashboard\", onValueChange, children, className }) {\r\n  const controlled = value !== undefined;\r\n  const [inner, setInner] = useState(defaultValue);\r\n  const active = controlled ? value : inner;\r\n\r\n  const setActive = (v) => {\r\n    if (!controlled) setInner(v);\r\n    onValueChange?.(v);\r\n  };\r\n\r\n  // if defaultValue changes (rare), resync when uncontrolled\r\n  useEffect(() => {\r\n    if (!controlled) setInner(defaultValue);\r\n  }, [defaultValue, controlled]);\r\n\r\n  const ctx = useMemo(() => ({ value: active, setValue: setActive }), [active]);\r\n\r\n  return (\r\n    <TabsCtx.Provider value={ctx}>\r\n      <div data-slot=\"tabs\" className={`flex w-full flex-col gap-4 ${className || \"\"}`}>\r\n        {children}\r\n      </div>\r\n    </TabsCtx.Provider>\r\n  );\r\n}\r\nexport default Tabs;\r\nexport { Tabs };\r\n\r\nexport function TabsList({ children, className, ...props }) {\r\n  return (\r\n    <div\r\n      role=\"tablist\"\r\n      aria-orientation=\"horizontal\"\r\n      className={`mx-auto mb-6 flex max-w-md items-center justify-center rounded-full bg-pink-50 p-1 dark:bg-slate-800 ${className || \"\"}`}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function TabsTrigger({ value, children, className, ...props }) {\r\n  const ctx = useContext(TabsCtx);\r\n  if (!ctx) throw new Error(\"TabsTrigger must be used inside <Tabs>.\");\r\n  const isActive = ctx.value === value;\r\n\r\n  return (\r\n    <button\r\n      role=\"tab\"\r\n      type=\"button\"\r\n      value={value}\r\n      aria-selected={isActive}\r\n      tabIndex={isActive ? 0 : -1}\r\n      onClick={() => ctx.setValue(value)}\r\n      className={`flex-1 rounded-full px-4 py-2 text-sm font-medium transition-colors ${\r\n        isActive\r\n          ? \"bg-white text-pink-600 shadow-sm\"\r\n          : \"text-slate-600 hover:text-slate-800 dark:text-slate-400 dark:hover:text-slate-200\"\r\n      } ${className || \"\"}`}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </button>\r\n  );\r\n}\r\n\r\nexport function TabsContent({ value, children, className, ...props }) {\r\n  const ctx = useContext(TabsCtx);\r\n  if (!ctx) throw new Error(\"TabsContent must be used inside <Tabs>.\");\r\n\r\n  const hidden = ctx.value !== value;\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      aria-hidden={hidden}\r\n      style={{ display: hidden ? \"none\" : \"block\" }}\r\n      className={`w-full ${className || \"\"}`}\r\n      {...props}\r\n    >\r\n      {!hidden ? children : null}\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport dynamic from 'next/dynamic';\r\nimport PropTypes from 'prop-types';\r\nimport { useEffect, useMemo, useRef, useState } from 'react';\r\nimport { Droplet, Moon, Sparkles, Sprout } from 'lucide-react';\r\n\r\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from '../components/siklusku/Tabs';\r\nimport OnboardingGate from '../components/siklusku/OnboardingGate';\r\nimport FirstPeriodGuide from '../components/siklusku/FirstPeriodGuide';\r\nimport CycleOnboarding from '../components/siklusku/CycleOnboarding';\r\nimport ConsistencyCard from '../components/siklusku/ConsistencyCard';\r\nimport MoodDistributionCard from '../components/siklusku/MoodDistributionCard';\r\nimport MoodPatternCard from '../components/siklusku/MoodPatternCard';\r\nimport AchievementsCard from '../components/siklusku/AchievementsCard';\r\nimport LoveLetterModal from '../components/siklusku/LoveLetterModal';\r\nimport LogPeriodForm from '../components/siklusku/LogPeriodForm';\r\nimport DailyTracker from '../components/siklusku/DailyTracker';\r\nimport DailyLogsViewer from '../components/siklusku/DailyLogsViewer';\r\n\r\nimport useSiklusStore from '../store/useSiklusStore';\r\n\r\nimport { gsap } from 'gsap';\r\nimport { attachRipple } from '@/lib/siklus/microInteractions';\r\nimport { shouldShowDailyMoodNudge, getTodayKey } from '@/lib/siklus/nudges';\r\nimport { cycleDay, calculatePhase, projectUpcomingPeriods, formatDisplayDate } from '@/lib/siklus/cycleMath';\r\nimport Image from 'next/image';\r\n\r\n// ⬇️ dynamic imports\r\nconst CycleTrendChart = dynamic(() => import('../components/siklusku/charts/CycleTrendChart'), {\r\n  ssr: false,\r\n  loading: () => <ChartSkeleton label=\"grafik tren siklus\" />,\r\n});\r\n\r\nconst ChartExportButton = dynamic(() => import('../components/siklusku/charts/ChartExportButton'), {\r\n  ssr: false,\r\n  loading: () => <ExportButtonFallback />,\r\n});\r\n\r\nfunction ChartSkeleton({ label }) {\r\n  return (\r\n    <div className=\"flex h-48 w-full items-center justify-center rounded-3xl border border-dashed border-pink-200 bg-white/70 text-sm text-slate-500 dark:border-slate-700 dark:bg-slate-900/40 dark:text-slate-400\">Memuat {label}...</div>\r\n  );\r\n}\r\nChartSkeleton.propTypes = { label: PropTypes.string.isRequired };\r\n\r\nfunction ExportButtonFallback() {\r\n  return (\r\n    <button type=\"button\" disabled className=\"relative inline-flex items-center justify-center rounded-full bg-pink-400 px-6 py-2 text-sm font-semibold text-white opacity-70 shadow-sm\">\r\n      Menyiapkan export...\r\n    </button>\r\n  );\r\n}\r\n\r\nconst MOOD_META = {\r\n  happy: { label: 'Senang', color: '#facc15' },\r\n  sad: { label: 'Sedih', color: '#60a5fa' },\r\n  angry: { label: 'Kesal', color: '#f87171' },\r\n  anxious: { label: 'Cemas', color: '#a78bfa' },\r\n  normal: { label: 'Biasa aja', color: '#94a3b8' },\r\n};\r\n\r\nconst PHASE_ART = {\r\n  menstruation: {\r\n    imageAlt: 'Ilustrasi remaja minum teh hangat untuk fase menstruasi',\r\n    imageSrc: '/image/phase-menstruation.png',\r\n    palette: { primary: '#fbcfe8', secondary: '#f9a8d4', accent: '#fde4f2', highlight: '#f8b4d9', icon: '#db2777' },\r\n    gradient: 'from-rose-100 via-white to-rose-50',\r\n    gradientDark: 'dark:from-rose-950 dark:via-slate-950 dark:to-rose-900',\r\n    badge: 'bg-rose-100 text-rose-600',\r\n    badgeDark: 'dark:bg-rose-900/40 dark:text-rose-200 dark:border dark:border-rose-800/50',\r\n    icon: Droplet,\r\n    name: 'Menstruasi',\r\n    description: 'Tubuh kamu sedang bersih-bersih nih. Lapisan rahim yang sebelumnya menebal lagi dibersihkan lewat darah haid. Hormon estrogen masih rendah, jadi kamu mungkin akan merasa lelah ataupun moody.',\r\n    tips: ['Istirahat cukup dan konsumsi makanan bergizi. Tubuhmu sedang bekerja keras!'],\r\n  },\r\n  follicular: {\r\n    imageAlt: 'Ilustrasi remaja membawa bunga',\r\n    imageSrc: '/image/phase-follicular.png',\r\n    palette: { primary: '#bbf7d0', secondary: '#86efac', accent: '#dcfce7', highlight: '#34d399', icon: '#047857' },\r\n    gradient: 'from-green-100 via-white to-emerald-50',\r\n    gradientDark: 'dark:from-emerald-950 dark:via-slate-950 dark:to-rose-900',\r\n    badge: 'bg-emerald-100 text-emerald-600',\r\n    badgeDark: 'dark:bg-emerald-900/40 dark:text-emerald-200 dark:border dark:border-emerald-800/50',\r\n    icon: Sprout,\r\n    name: 'Folikuler',\r\n    description: 'Hormon estrogen mulai naik lagi. Tubuhmu sedang menyiapkan sel telur baru, dan kamu mungkin merasa lebih semangat, fokus, dan ceria. Kerasa nggak kalo kamu udah lebih berenergi?',\r\n    tips: ['Gunakan energimu buat hal-hal produktif yuk! Kamu bisa olahraga ringan, baca artikel atau eksplor hal baru.'],\r\n  },\r\n  ovulation: {\r\n    imageAlt: 'Ilustrasi remaja dengan bunga bermekaran',\r\n    imageSrc: '/image/phase-ovulation.png',\r\n    palette: { primary: '#fef3c7', secondary: '#fde68a', accent: '#fffbeb', highlight: '#facc15', icon: '#b45309' },\r\n    gradient: 'from-amber-100 via-white to-yellow-50',\r\n    gradientDark: 'dark:from-amber-950 dark:via-slate-950 dark:to-rose-900',\r\n    badge: 'bg-amber-100 text-amber-600',\r\n    badgeDark: 'dark:bg-amber-900/40 dark:text-amber-200 dark:border dark:border-amber-800/60',\r\n    icon: Sparkles,\r\n    name: 'Ovulasi',\r\n    description: 'Telur dilepaskan dari ovarium. Kamu mungkin merasa lebih percaya diri dan cantik hari ini. Namun, beberapa orang juga merasakan sedikit nyeri di perut bagian bawah pada fase ini.',\r\n    tips: ['Inilah puncak kesuburanmu! Tetap jaga kesehatan ya, jangan lupa jaga asupan air putih dan istirahat cukup.'],\r\n    psaMessage: 'Ovulasi = Masa Subur. Perempuan memiliki peluang kehamilan lebih tinggi di masa ini.',\r\n  },\r\n  luteal: {\r\n    imageAlt: 'Ilustrasi remaja dengan bulan sabit',\r\n    imageSrc: '/image/phase-luteal.png',\r\n    palette: { primary: '#c7d2fe', secondary: '#a5b4fc', accent: '#e0e7ff', highlight: '#6366f1', icon: '#4338ca' },\r\n    gradient: 'from-indigo-100 via-white to-slate-50',\r\n    gradientDark: 'dark:from-indigo-950 dark:via-slate-950 dark:to-rose-900',\r\n    badge: 'bg-indigo-100 text-indigo-600',\r\n    badgeDark: 'dark:bg-indigo-900/40 dark:text-indigo-200 dark:border dark:border-indigo-800/50',\r\n    icon: Moon,\r\n    name: 'Luteal',\r\n    description: 'Hormon progesteron lagi naik nih untuk mempersiapkan rahim kalau terjadi pembuahan. Kalau tidak, tubuhmu sedang bersiap haid lagi. Di fase ini, wajar kalau kamu merasa cepat lelah, lapar, atau sensitif.',\r\n    tips: ['Jangan lupa luangkan waktu buat diri sendiri ya. Boleh banget kalo kamu mau jurnaling perasaan kamu disini.'],\r\n  },\r\n  unknown: {\r\n    imageAlt: 'Ilustrasi remaja muda',\r\n    imageSrc: '/image/phase-unknown.png',\r\n    palette: { primary: '#fef2f2', secondary: '#fecaca', accent: '#fee2e2', highlight: '#f472b6', icon: '#be185d' },\r\n    gradient: 'from-rose-50 via-white to-rose-100',\r\n    gradientDark: 'dark:from-rose-900 dark:via-rose-950 dark:to-rose-900',\r\n    badge: 'bg-rose-100 text-rose-700 border border-rose-200',\r\n    badgeDark: 'dark:bg-rose-800/70 dark:text-rose-200 dark:border dark:border-rose-700/60',\r\n    icon: Sparkles,\r\n    name: 'jurnal mood',\r\n    description: 'Data siklus lengkap bantu kami menyesuaikan tips khusus untukmu.',\r\n    tips: [],\r\n  },\r\n};\r\n\r\n// ---- Placeholder copy ----\r\nconst PLACEHOLDER_COPY = {\r\n  loading: {\r\n    title: 'Menyiapkan ruangmu',\r\n    message: 'Kami sedang memuat data onboarding supaya pengalamanmu tetap personal dan aman di perangkat ini.',\r\n    showPulse: true,\r\n    imageSrc: '/image/placeholder-loading.png',\r\n    imageAlt: 'Ilustrasi pengisian data sedang dimuat',\r\n  },\r\n  gate: {\r\n    title: 'Yuk mulai kenalan',\r\n    message: 'Pilih sudah atau belum haid untuk menentukan langkah berikutnya.',\r\n    showPulse: false,\r\n    imageSrc: '/image/placeholder-gate.png',\r\n    imageAlt: 'Ilustrasi pilihan sudah atau belum haid',\r\n  },\r\n  guide: {\r\n    title: 'Mengenal Menstruasi Pertamamu',\r\n    message: 'Baca deh! kamu udah tau semua info haid di bawah ini belum?',\r\n    showPulse: false,\r\n    imageSrc: '/image/placeholder-guide.png',\r\n    imageAlt: 'Ilustrasi panduan pertama haid',\r\n  },\r\n  form: {\r\n    title: 'Isi data siklusmu',\r\n    message: 'Catat tanggal haid, panjang siklus, dan gejala haid kamu untuk mendapatkan laporan kesehatan reproduksi.',\r\n    showPulse: false,\r\n    imageSrc: '/image/placeholder-form.png',\r\n    imageAlt: 'Ilustrasi formulir siklus',\r\n  },\r\n};\r\n\r\nfunction OnboardingPlaceholder({ state }) {\r\n  const copy = PLACEHOLDER_COPY[state] || PLACEHOLDER_COPY.loading;\r\n  const src = copy.imageSrc || '/image/placeholder-form.png';\r\n  const alt = copy.imageAlt || copy.title;\r\n  return (\r\n    <output className=\"block rounded-[32px] border border-pink-100/70 bg-white/85 p-8 text-center shadow-sm backdrop-blur-sm dark:border-slate-800/60 dark:bg-slate-900/70\" aria-live=\"polite\" aria-busy={state === 'loading'}>\r\n      <div className=\"mx-auto flex max-w-md flex-col items-center gap-6\">\r\n        <div className=\"relative h-28 w-28\">\r\n          <div className={`absolute inset-0 rounded-full ${copy.showPulse ? 'bg-pink-200/70 motion-safe:animate-pulse dark:bg-pink-900/40' : 'bg-pink-100/60 dark:bg-pink-900/20'}`} aria-hidden=\"true\" />\r\n          <Image src={src} alt={alt} width={100} height={100} className=\"relative z-10 h-full w-full object-contain\" />\r\n        </div>\r\n        <div className=\"space-y-2\">\r\n          <h2 className=\"text-2xl font-semibold text-slate-900 dark:text-slate-100\">{copy.title}</h2>\r\n          <p className=\"text-sm text-slate-600 dark:text-slate-300\">{copy.message}</p>\r\n        </div>\r\n        {copy.showPulse ? (\r\n          <div className=\"flex items-center gap-3 text-xs text-slate-500 dark:text-slate-400\">\r\n            <span className=\"relative flex h-3 w-3\">\r\n              <span className=\"absolute inline-flex h-full w-full rounded-full bg-pink-400 opacity-75 motion-safe:animate-ping\" />\r\n              <span className=\"relative inline-flex h-3 w-3 rounded-full bg-pink-500\" />\r\n            </span>\r\n            <span>Jangan tutup halaman ya, ini hanya sebentar.</span>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    </output>\r\n  );\r\n}\r\nOnboardingPlaceholder.propTypes = { state: PropTypes.oneOf(['loading', 'gate', 'guide', 'form']) };\r\n\r\nfunction normalizeNumber(value, fallback) {\r\n  const numeric = Number.parseInt(value, 10);\r\n  return Number.isFinite(numeric) && numeric > 0 ? numeric : fallback;\r\n}\r\n\r\n// Local helper: summarize dominant mood from daily logs\r\nfunction summarizeMoodFromDailyLogs(dailyLogs) {\r\n  const counts = dailyLogs.reduce((acc, log) => {\r\n    const key = typeof log.mood === 'string' ? log.mood.toLowerCase() : null;\r\n    if (!key) return acc;\r\n    acc[key] = (acc[key] || 0) + 1;\r\n    return acc;\r\n  }, {});\r\n  let dominantMood = '-';\r\n  let max = 0;\r\n  Object.entries(counts).forEach(([mood, count]) => {\r\n    if (count > max) {\r\n      max = count;\r\n      dominantMood = mood;\r\n    }\r\n  });\r\n  return { dominantMood, total: dailyLogs.length };\r\n}\r\n\r\nexport default function SikluskuPage() {\r\n  // ---- refs & state ----\r\n  const rippleCleanupsRef = useRef([]);\r\n  const moodSectionRef = useRef(null);\r\n\r\n  const [flow, setFlow] = useState('loading');\r\n  const [prefersReducedMotion, setPrefersReducedMotion] = useState(false);\r\n  const [hydrated, setHydrated] = useState(false);\r\n  const hasInitializedFlowRef = useRef(false);\r\n\r\n  // ❤️ Love letter state & flags\r\n  const [loveLetterOpen, setLoveLetterOpen] = useState(false);\r\n  const [loveLetterShown, setLoveLetterShown] = useState(false);\r\n  const [loveLetterEligible, setLoveLetterEligible] = useState(false);\r\n\r\n  const [showDailyNudge, setShowDailyNudge] = useState(false);\r\n  const [lastNudgeShownDate, setLastNudgeShownDate] = useState(null);\r\n\r\n  // tabs\r\n  const [activeTab, setActiveTab] = useState('dashboard');\r\n\r\n  // log form modal\r\n  const [logFormOpen, setLogFormOpen] = useState(false);\r\n\r\n  // ---- stores ----\r\n  const onboardingCompleted = useSiklusStore((s) => s.onboardingCompleted);\r\n  const onboardingData = useSiklusStore((s) => s.onboardingData);\r\n  const moodLogs = useSiklusStore((s) => s.moodLogs || []); // for nudge eligibility if you still keep it\r\n  const dailyLogs = useSiklusStore((s) => s.dailyLogs || []);\r\n  const cycleSummary = useSiklusStore((s) => s.cycleSummary);\r\n  const achievements = useSiklusStore((s) => s.achievements ?? []);\r\n\r\n  const setOnboardingCompletedAction = useSiklusStore((s) => s.setOnboardingCompleted);\r\n  const resetOnboardingDataAction = useSiklusStore((s) => s.resetOnboardingData);\r\n\r\n  // ---- helpers ----\r\n  function markLoveLetterShown() {\r\n    try {\r\n      localStorage.setItem('risa:loveLetterShownOnce', 'true');\r\n      localStorage.removeItem('risa:loveLetterEligible');\r\n    } catch {}\r\n    setLoveLetterShown(true);\r\n  }\r\n\r\n  // hydrate store once + load love letter flags\r\n  useEffect(() => {\r\n    try {\r\n      useSiklusStore.getState().hydrate?.();\r\n    } catch {}\r\n    setHydrated(true);\r\n    try {\r\n      setLoveLetterShown(localStorage.getItem('risa:loveLetterShownOnce') === 'true');\r\n      setLoveLetterEligible(localStorage.getItem('risa:loveLetterEligible') === 'true');\r\n    } catch {}\r\n  }, []);\r\n\r\n  // visibility pause/resume GSAP\r\n  useEffect(() => {\r\n    const handleVisibilityChange = () => {\r\n      if (document.hidden) {\r\n        gsap.globalTimeline.pause();\r\n        gsap.ticker?.sleep?.();\r\n      } else {\r\n        gsap.globalTimeline.resume();\r\n        gsap.ticker?.wake?.();\r\n      }\r\n    };\r\n    document.addEventListener('visibilitychange', handleVisibilityChange);\r\n    return () => document.removeEventListener('visibilitychange', handleVisibilityChange);\r\n  }, []);\r\n\r\n  // reduced motion (system)\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n    const media = window.matchMedia('(prefers-reduced-motion: reduce)');\r\n    const update = () => setPrefersReducedMotion(media.matches);\r\n    update();\r\n    media.addEventListener('change', update);\r\n    return () => media.removeEventListener('change', update);\r\n  }, []);\r\n\r\n  // === Initial flow\r\n  useEffect(() => {\r\n    if (!hydrated || hasInitializedFlowRef.current) return;\r\n    hasInitializedFlowRef.current = true;\r\n    setFlow(onboardingCompleted ? 'dashboard' : 'gate');\r\n    if (onboardingCompleted && loveLetterEligible && !loveLetterShown) setLoveLetterOpen(true);\r\n  }, [hydrated, onboardingCompleted, loveLetterEligible, loveLetterShown]);\r\n\r\n  // ✅ Keep flow synced if onboardingCompleted flips later\r\n  useEffect(() => {\r\n    if (!hydrated) return;\r\n    if (onboardingCompleted && flow !== 'dashboard') {\r\n      setFlow('dashboard');\r\n    }\r\n  }, [hydrated, onboardingCompleted, flow]);\r\n\r\n  // Keep tab on dashboard if onboarding not completed\r\n  useEffect(() => {\r\n    if (!onboardingCompleted) setActiveTab('dashboard');\r\n  }, [onboardingCompleted]);\r\n\r\n  // ripple attach/cleanup\r\n  useEffect(() => {\r\n    const cleanupAll = () => {\r\n      rippleCleanupsRef.current.forEach((fn) => fn && fn());\r\n      rippleCleanupsRef.current = [];\r\n    };\r\n    cleanupAll();\r\n    if (prefersReducedMotion) return cleanupAll;\r\n    const nodes = Array.from(document.querySelectorAll('[data-ripple=\"true\"]'));\r\n    rippleCleanupsRef.current = nodes.map((node) => attachRipple(node));\r\n    return cleanupAll;\r\n  }, [prefersReducedMotion, flow, loveLetterOpen, showDailyNudge, hydrated]);\r\n\r\n  // daily mood nudge (settings removed → default to enabled)\r\n  useEffect(() => {\r\n    if (!hydrated || flow !== 'dashboard') {\r\n      if (showDailyNudge) setShowDailyNudge(false);\r\n      return;\r\n    }\r\n    const evaluate = () => {\r\n      const now = new Date();\r\n      const nudgesEnabled = true;\r\n      const eligible = shouldShowDailyMoodNudge({ now, moodLogs, nudgesEnabled });\r\n      if (!eligible) return setShowDailyNudge(false);\r\n      const todayKey = getTodayKey(now);\r\n      if (lastNudgeShownDate === todayKey) return;\r\n      setShowDailyNudge(true);\r\n      setLastNudgeShownDate(todayKey);\r\n    };\r\n    evaluate();\r\n    const id = window.setInterval(evaluate, 60 * 1000);\r\n    return () => window.clearInterval(id);\r\n  }, [hydrated, flow, moodLogs, lastNudgeShownDate, showDailyNudge]);\r\n\r\n  // ---- derivations ----\r\n  const isHydrating = !hydrated || flow === 'loading';\r\n  const placeholderState = isHydrating ? 'loading' : flow !== 'dashboard' ? flow : null;\r\n  const showPlaceholder = Boolean(placeholderState);\r\n\r\n  const moodSummary = useMemo(() => summarizeMoodFromDailyLogs(dailyLogs), [dailyLogs]);\r\n\r\n  const exportLegend = useMemo(() => {\r\n    const counts = dailyLogs.reduce((acc, log) => {\r\n      const key = typeof log.mood === 'string' ? log.mood.toLowerCase() : null;\r\n      if (!key) return acc;\r\n      acc[key] = (acc[key] || 0) + 1;\r\n      return acc;\r\n    }, {});\r\n    return Object.entries(counts)\r\n      .map(([mood, count]) => {\r\n        const meta = MOOD_META[mood] || { label: mood, color: '#94a3b8' };\r\n        return { mood, label: meta.label, color: meta.color, count };\r\n      })\r\n      .sort((a, b) => b.count - a.count)\r\n      .slice(0, 5);\r\n  }, [dailyLogs]);\r\n\r\n  const cycleTrendPoints = useMemo(() => {\r\n    const history = Array.isArray(cycleSummary.cycleHistory) ? cycleSummary.cycleHistory : [];\r\n    if (!history.length) return [{ label: 'Saat ini', value: cycleSummary.averageCycleLength }];\r\n    const fmt = new Intl.DateTimeFormat('id-ID', { month: 'short' });\r\n    const pts = history\r\n      .map((item) => {\r\n        const ref = item.end || item.start;\r\n        const d = ref ? new Date(ref) : null;\r\n        if (!d || Number.isNaN(d.getTime())) return null;\r\n        return { label: `${fmt.format(d)} ${String(d.getFullYear()).slice(-2)}`, value: item.length };\r\n      })\r\n      .filter(Boolean);\r\n    return pts.length ? pts.slice(-6) : [{ label: 'Saat ini', value: cycleSummary.averageCycleLength }];\r\n  }, [cycleSummary]);\r\n\r\n  const upcomingPeriods = useMemo(() => {\r\n    if (!onboardingData?.lastPeriodStart) return [];\r\n    return projectUpcomingPeriods({\r\n      lastPeriodStart: onboardingData.lastPeriodStart,\r\n      cycleLength: onboardingData.cycleLength,\r\n    });\r\n  }, [onboardingData?.lastPeriodStart, onboardingData?.cycleLength]);\r\n\r\n  const cycleInsight = useMemo(() => {\r\n    const hasData = Boolean(onboardingData.lastPeriodStart);\r\n    const cycleLen = normalizeNumber(cycleSummary.averageCycleLength, 28);\r\n    const periodLen = normalizeNumber(cycleSummary.averagePeriodLength, 5);\r\n    const day = hasData ? cycleDay(new Date(), onboardingData.lastPeriodStart, cycleLen) : null;\r\n    const phaseKey = day ? calculatePhase(day, periodLen, cycleLen) : 'unknown';\r\n    return { hasData, day, phaseKey, cycleLength: cycleLen, periodLength: periodLen };\r\n  }, [onboardingData.lastPeriodStart, cycleSummary]);\r\n\r\n  function handleLoveLetterClose() {\r\n    markLoveLetterShown();\r\n    setLoveLetterOpen(false);\r\n    setFlow('dashboard');\r\n  }\r\n\r\n  // ---- UI sections ----\r\n  function renderPhaseHero() {\r\n    const phaseMeta = PHASE_ART[cycleInsight.phaseKey] || PHASE_ART.unknown;\r\n    const isUnknown = cycleInsight.phaseKey === 'unknown';\r\n    const tips = Array.isArray(phaseMeta.tips) ? phaseMeta.tips : [];\r\n    const phaseName = phaseMeta.name;\r\n    const showTips = tips.length > 0;\r\n\r\n    const headline = isUnknown ? 'Belum mulai haid? Gapapa!' : `Hari ke-${cycleInsight.day} siklusmu`;\r\n    const subline = isUnknown ? '' : `Kamu sedang di fase ${phaseName}`;\r\n    const description = isUnknown\r\n      ? 'Kamu bisa mulai dari catat mood harianmu dulu.\\nNanti kalau kamu udah haid, klik catat dan mulai jurnal siklus bulananmu!\\nSampai saat itu, kamu tetap bisa jurnal mood harianmu kapan saja disini 💕'\r\n      : phaseMeta.description ?? 'Data siklus lengkap bantu kami menyesuaikan tips khusus untukmu.';\r\n\r\n    const Icon = phaseMeta.icon;\r\n    const goals = onboardingData?.goals || [];\r\n    const fertilityEnabled = Array.isArray(goals) && goals.includes('fertility');\r\n    const psaMessage = phaseMeta.psaMessage;\r\n    const showPSA = Boolean(psaMessage && cycleInsight.phaseKey === 'ovulation');\r\n    const psaClass = fertilityEnabled\r\n      ? 'bg-amber-100 text-amber-800 border-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:border-amber-800/60'\r\n      : 'bg-slate-100 text-slate-600 border-slate-200 dark:bg-slate-800/60 dark:text-slate-200 dark:border-slate-700/60';\r\n\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <section className={`overflow-hidden rounded-[32px] border border-white/40 bg-gradient-to-r ${phaseMeta.gradient} ${phaseMeta.gradientDark ?? ''} p-6 shadow-sm sm:p-8 dark:border-white/10`}>\r\n          <div className=\"grid gap-6 md:grid-cols-[1.15fr_auto] md:items-center\">\r\n            <div className=\"space-y-5\">\r\n              <span className={`inline-flex items-center gap-2 rounded-full px-4 py-1 text-xs font-semibold uppercase tracking-wide ${phaseMeta.badge} ${phaseMeta.badgeDark ?? ''}`}>\r\n                <Icon className=\"h-4 w-4\" aria-hidden=\"true\" />\r\n                <span className=\"text-slate-900 dark:text-slate-100\">{isUnknown ? 'jurnal mood' : phaseName}</span>\r\n              </span>\r\n\r\n              <div className=\"space-y-2 text-left\">\r\n                <h1 className=\"text-3xl font-semibold text-slate-900 dark:text-slate-100 sm:text-[34px]\">{headline}</h1>\r\n                {subline ? <p className=\"text-sm text-slate-600 dark:text-slate-300\">{subline}</p> : null}\r\n              </div>\r\n\r\n              <p className=\"whitespace-pre-line text-sm text-slate-600 dark:text-slate-300\">{description}</p>\r\n\r\n              {!isUnknown ? (\r\n                <dl className=\"grid grid-cols-2 gap-4 text-left sm:max-w-sm\">\r\n                  <div>\r\n                    <dt className=\"text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400\">Panjang siklus</dt>\r\n                    <dd className=\"text-lg font-semibold text-slate-900 dark:text-slate-100\">{cycleInsight.cycleLength} hari</dd>\r\n                  </div>\r\n                  <div>\r\n                    <dt className=\"text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400\">Lama menstruasi</dt>\r\n                    <dd className=\"text-lg font-semibold text-slate-900 dark:text-slate-100\">{cycleInsight.periodLength} hari</dd>\r\n                  </div>\r\n                </dl>\r\n              ) : null}\r\n\r\n              {isUnknown ? (\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"inline-flex items-center justify-center rounded-full border border-pink-300 bg-white px-5 py-2 text-sm font-semibold text-gray-800 shadow-sm focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-400\"\r\n                  onClick={() => setFlow('form')}\r\n                >\r\n                  Catat Siklusku 🩸\r\n                </button>\r\n              ) : null}\r\n\r\n              {onboardingCompleted && (cycleInsight.day || onboardingData?.lastPeriodStart) ? (\r\n                <div>\r\n                  <button\r\n                    type=\"button\"\r\n                    data-ripple=\"true\"\r\n                    className=\"inline-flex items-center gap-2 rounded-full border border-pink-200 bg-white px-4 py-2 text-xs font-semibold text-pink-600 shadow-sm hover:bg-pink-50 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-600\"\r\n                    onClick={() => setLogFormOpen(true)}\r\n                  >\r\n                    Tambahkan Tanggal Haid\r\n                  </button>\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n\r\n            <div className=\"relative hidden h-64 w-64 md:block\">\r\n              <div className=\"absolute inset-0 rounded-full bg-white/70 blur-3xl dark:bg-white/10\" aria-hidden=\"true\" />\r\n              <img src={phaseMeta.imageSrc} alt={phaseMeta.imageAlt} className=\"relative z-10 h-full w-full object-contain\" />\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        <section className=\"rounded-[28px] border border-pink-100 bg-white p-6 shadow-sm sm:p-8 dark:border-slate-700/60 dark:bg-slate-900\">\r\n          <div className=\"space-y-4 text-left\">\r\n            <h2 className=\"text-lg font-semibold text-slate-900 dark:text-slate-100\">Tips spesial untukmu:</h2>\r\n\r\n            {showTips ? (\r\n              <ul className=\"space-y-3 text-sm text-slate-600 dark:text-slate-200\">\r\n                {tips.map((tip) => (\r\n                  <li key={tip} className=\"flex items-start gap-3\">\r\n                    <span className=\"mt-1 inline-flex h-2.5 w-2.5 shrink-0 rounded-full bg-pink-400 dark:bg-pink-300\" />\r\n                    <span>{tip}</span>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            ) : (\r\n              <p className=\"text-sm text-slate-500 dark:text-slate-400\">Catat mood kamu disini setiap hari, seperti sebuah jurnal khusus untuk suasana hatimu.</p>\r\n            )}\r\n\r\n            {showPSA ? <div className={`mt-4 rounded-2xl border px-4 py-3 text-sm font-medium ${psaClass}`}>{psaMessage}</div> : null}\r\n          </div>\r\n        </section>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // ---- dashboard area with tabs (NO hooks here) ----\r\n  function renderDashboard() {\r\n    const hasUpcoming = Array.isArray(upcomingPeriods) && upcomingPeriods.length > 0;\r\n    const hasAchievements = Array.isArray(achievements) && achievements.length > 0;\r\n\r\n    const hasPeriodData = Boolean(onboardingData?.lastPeriodStart);\r\n    const showReportTab = hasPeriodData;\r\n\r\n    return (\r\n      <div className=\"space-y-8\">\r\n        {showDailyNudge ? (\r\n          <output aria-live=\"polite\" className=\"flex flex-col gap-4 rounded-3xl border border-amber-200 bg-amber-50 p-6 text-amber-900 shadow-sm dark:border-amber-500/40 dark:bg-amber-900/20 dark:text-amber-100\">\r\n            <div className=\"flex flex-col gap-3 md:flex-row md:items-center md:justify-between\">\r\n              <div className=\"space-y-1\">\r\n                <h3 className=\"text-base font-semibold\">Mau catat mood hari ini?</h3>\r\n                <p className=\"text-sm text-amber-800/80 dark:text-amber-100/80\">Kamu belum mencatat moodmu hari ini. Apa yang kamu rasakan?</p>\r\n              </div>\r\n            </div>\r\n          </output>\r\n        ) : null}\r\n\r\n        {renderPhaseHero()}\r\n\r\n        <Tabs\r\n          value={hasPeriodData ? activeTab : 'dashboard'}\r\n          onValueChange={(val) => {\r\n            if (!hasPeriodData && val === 'report') return;\r\n            setActiveTab(val);\r\n          }}\r\n        >\r\n          <TabsList>\r\n            <TabsTrigger value=\"dashboard\">Dashboard</TabsTrigger>\r\n            {showReportTab ? <TabsTrigger value=\"report\">Laporan</TabsTrigger> : null}\r\n          </TabsList>\r\n\r\n          {/* ===================== DASHBOARD ===================== */}\r\n          <TabsContent value=\"dashboard\">\r\n            <div className=\"space-y-8\">\r\n              {/* 1) Consistency + Upcoming (or placeholder) */}\r\n              <section className=\"mb-6 grid grid-cols-1 gap-6 md:grid-cols-2\">\r\n                <ConsistencyCard />\r\n\r\n                {hasUpcoming ? (\r\n                  <section className=\"rounded-3xl border border-pink-100 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900\">\r\n                    <h3 className=\"text-lg font-semibold text-slate-800 dark:text-slate-100\">Perkiraan haid berikutnya</h3>\r\n                    <ul className=\"mt-3 space-y-2 text-sm text-slate-600\">\r\n                      {upcomingPeriods.map((isoDate) => {\r\n                        const displayDate = formatDisplayDate(isoDate) || isoDate;\r\n                        return (\r\n                          <li key={isoDate} className=\"flex items-center justify-between rounded-2xl bg-pink-50 px-4 py-3\">\r\n                            <span className=\"items-center font-semibold text-pink-600\">{displayDate}</span>\r\n                          </li>\r\n                        );\r\n                      })}\r\n                    </ul>\r\n                  </section>\r\n                ) : (\r\n                  <section className=\"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900\">\r\n                    <h3 className=\"text-lg font-semibold text-slate-800 dark:text-slate-100\">Perkiraan haid berikutnya</h3>\r\n                    <p className=\"mt-3 text-sm text-slate-500 dark:text-slate-400\">Kami akan menampilkan perkiraan tanggal haid setelah kamu menambahkan catatan haid kamu. Saat ini kamu bisa mulai dari catat mood harianmu dulu ya. 💕</p>\r\n                  </section>\r\n                )}\r\n              </section>\r\n\r\n              {/* 2) Daily Tracker */}\r\n              <div ref={moodSectionRef}>\r\n                <DailyTracker />\r\n              </div>\r\n\r\n              {/* 3) Daily Logs Viewer */}\r\n              <DailyLogsViewer />\r\n\r\n              {/* 4) Mood Distribution */}\r\n              <section className=\"grid grid-cols-1\">\r\n                <MoodDistributionCard />\r\n              </section>\r\n\r\n              {/* 6) Achievements */}\r\n              {hasAchievements ? (\r\n                <section className=\"mb-6\">\r\n                  <AchievementsCard />\r\n                </section>\r\n              ) : null}\r\n\r\n              {/* === Artikel Rekomendasi (inside dashboard) === */}\r\n              <section id=\"recommendations\" className=\"rounded-[28px] border border-pink-100 bg-white p-6 shadow-sm sm:p-8 dark:border-slate-700/60 dark:bg-slate-900\">\r\n                <h3 className=\"mb-8 text-center text-xl font-bold text-gray-800 dark:text-slate-100\">Rekomendasi bacaan untuk kamu</h3>\r\n\r\n                <div className=\"grid grid-cols-1 gap-4 p-2 md:grid-cols-3 md:gap-4 lg:gap-6\">\r\n                  {/* Card 1 */}\r\n                  <a\r\n                    href=\"/article-hiv.html\"\r\n                    className=\"group block cursor-pointer rounded-2xl border border-slate-200 bg-white p-3 shadow-sm transition-all duration-300 hover:-translate-y-2 hover:text-pink-600 dark:border-slate-800 dark:bg-slate-900\"\r\n                  >\r\n                    <div className=\"mb-2 h-48 w-full rounded-xl bg-cover bg-top\" style={{ backgroundImage: 'url(/image/article-image-1.png)' }} aria-hidden=\"true\" />\r\n                    <span className=\"font-medium\">HIV? Gak Usah Panik, Yuk Kenalan Dulu!</span>\r\n                    <p className=\"text-sm leading-relaxed text-gray-600 dark:text-slate-400\">Kenalan sama HIV biar gak salah paham dan tetap bisa jaga diri.</p>\r\n                  </a>\r\n\r\n                  {/* Card 2 */}\r\n                  <a\r\n                    href=\"/article-seks.html\"\r\n                    className=\"group block cursor-pointer rounded-2xl border border-slate-200 bg-white p-3 shadow-sm transition-all duration-300 hover:-translate-y-2 hover:text-pink-600 dark:border-slate-800 dark:bg-slate-900\"\r\n                  >\r\n                    <div className=\"mb-2 h-48 w-full rounded-xl bg-cover bg-top\" style={{ backgroundImage: 'url(/image/article-image-2.png)' }} aria-hidden=\"true\" />\r\n                    <span className=\"font-medium\">Seks Itu Apa Sih? Biar Gak Salah Paham dan Bisa Jaga Diri!</span>\r\n                    <p className=\"text-sm leading-relaxed text-gray-600 dark:text-slate-400\">Belajar soal seks biar gak salah langkah dan bisa jaga diri.</p>\r\n                  </a>\r\n\r\n                  {/* Card 3 */}\r\n                  <a\r\n                    href=\"/article-menstruasi.html\"\r\n                    className=\"group block cursor-pointer rounded-2xl border border-slate-200 bg-white p-3 shadow-sm transition-all duration-300 hover:-translate-y-2 hover:text-pink-600 dark:border-slate-800 dark:bg-slate-900\"\r\n                  >\r\n                    <div className=\"mb-2 h-48 w-full rounded-xl bg-cover bg-top\" style={{ backgroundImage: 'url(/image/article-image-3.png)' }} aria-hidden=\"true\" />\r\n                    <span className=\"font-medium\">Menstruasi Pertama: Kenapa Bisa Terjadi dan Gak Usah Takut!</span>\r\n                    <p className=\"text-sm leading-relaxed text-gray-600 dark:text-slate-400\">Menstruasi pertama itu alami, yuk siapin diri biar gak panik.</p>\r\n                  </a>\r\n                </div>\r\n              </section>\r\n            </div>\r\n          </TabsContent>\r\n\r\n          {/* ====================== REPORT ======================= */}\r\n          {showReportTab ? (\r\n            <TabsContent value=\"report\">\r\n              <div className=\"space-y-8\">\r\n                <section className=\"grid grid-cols-1\">\r\n                  <MoodPatternCard />\r\n                </section>\r\n\r\n                <section className=\"mb-6 grid grid-cols-1 gap-6 md:grid-cols-2\">\r\n                  <div className=\"rounded-3xl border border-pink-100 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900\">\r\n                    <h3 className=\"text-lg font-semibold text-slate-800 dark:text-slate-100\">Tren panjang siklus</h3>\r\n                    <CycleTrendChart points={cycleTrendPoints} />\r\n                  </div>\r\n\r\n                  <div className=\"rounded-3xl border border-pink-100 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900\">\r\n                    <h3 className=\"text-lg font-semibold text-slate-800 dark:text-slate-100\">Rekap siklusmu</h3>\r\n                    <ul className=\"mt-4 space-y-3 text-sm text-slate-600\">\r\n                      <li className=\"flex items-center justify-between rounded-2xl bg-pink-50 px-4 py-3\">\r\n                        <span>Rata-rata siklus</span>\r\n                        <span className=\"font-semibold text-pink-600\">{cycleSummary.averageCycleLength} hari</span>\r\n                      </li>\r\n                      <li className=\"flex items-center justify-between rounded-2xl bg-pink-50 px-4 py-3\">\r\n                        <span>Rata-rata menstruasi</span>\r\n                        <span className=\"font-semibold text-pink-600\">{cycleSummary.averagePeriodLength} hari</span>\r\n                      </li>\r\n                      <li className=\"flex items-center justify-between rounded-2xl bg-pink-50 px-4 py-3\">\r\n                        <span>Mood dominan</span>\r\n                        <span className=\"capitalize font-semibold text-pink-600\">{moodSummary.dominantMood}</span>\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n                </section>\r\n\r\n                <div className=\"flex flex-wrap items-center justify-between gap-3 rounded-3xl border border-pink-100 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900\">\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-slate-800 dark:text-slate-100\">Unduh laporan</h3>\r\n                    <p className=\"text-sm text-slate-500 dark:text-slate-400\">Simpan sebagai PNG untuk dibaca kapan saja.</p>\r\n                  </div>\r\n                  <ChartExportButton\r\n                    filename=\"siklusku-report.png\"\r\n                    stats={{\r\n                      averageCycleLength: cycleSummary.averageCycleLength,\r\n                      averagePeriodLength: cycleSummary.averagePeriodLength,\r\n                      dominantMood: moodSummary.dominantMood,\r\n                      moodEntries: dailyLogs.length,\r\n                    }}\r\n                    legend={exportLegend}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </TabsContent>\r\n          ) : null}\r\n        </Tabs>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main id=\"main-content\" tabIndex={-1} role=\"main\" className=\"container mx-auto max-w-4xl space-y-8 px-4 py-10 dark:text-slate-100\">\r\n      <LoveLetterModal open={loveLetterOpen} onClose={handleLoveLetterClose} reducedMotion={prefersReducedMotion} />\r\n\r\n      {showPlaceholder ? <OnboardingPlaceholder state={placeholderState} /> : null}\r\n\r\n      {hydrated ? <OnboardingGate open={flow === 'gate'} onBelum={() => setFlow('guide')} onSudah={() => setFlow('form')} reducedMotion={prefersReducedMotion} /> : null}\r\n\r\n      {/* ✅ Fix: go straight to dashboard when the guide completes */}\r\n      {flow === 'guide' ? <FirstPeriodGuide onComplete={() => setFlow('dashboard')} /> : null}\r\n\r\n      {flow === 'form' ? <CycleOnboarding onComplete={() => setFlow('dashboard')} /> : null}\r\n      {flow === 'dashboard' ? renderDashboard() : null}\r\n\r\n      <LogPeriodForm open={logFormOpen} onClose={() => setLogFormOpen(false)} />\r\n    </main>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { create } from 'zustand';\r\nimport { STORAGE_KEYS, DEFAULT_VALUES, getLocalValue, setLocalValue } from '@/lib/siklus/localStore';\r\nimport { calculateCycleSummary } from '@/lib/siklus/cycleMath';\r\n// ⛔ removed: import { normalizeMoodEntry, calculateMoodDistribution } from \"@/lib/siklus/mood\";\r\nimport { calculateStreak, calculateConsistency } from '@/lib/siklus/streak';\r\nimport { analyzeMoodPatternsByPhase } from '@/lib/siklus/moodPatterns';\r\nimport { calculateAchievements } from '@/lib/siklus/achievements';\r\n\r\n/* =========================\r\n   Local mood helpers (replacing mood.js)\r\n   ========================= */\r\nconst KNOWN_MOODS = ['happy', 'sad', 'angry', 'anxious', 'normal'];\r\n\r\nfunction normalizeDateYYYYMMDD(value) {\r\n  const d = value instanceof Date ? value : new Date(value);\r\n  if (Number.isNaN(d.getTime())) return null;\r\n  const y = d.getFullYear();\r\n  const m = String(d.getMonth() + 1).padStart(2, '0');\r\n  const day = String(d.getDate()).padStart(2, '0');\r\n  return `${y}-${m}-${day}`;\r\n}\r\n\r\nfunction normalizeMoodKey(mood) {\r\n  if (!mood || typeof mood !== 'string') return null;\r\n  const key = mood.trim().toLowerCase();\r\n  return KNOWN_MOODS.includes(key) ? key : null;\r\n}\r\n\r\n/** Replacement for normalizeMoodEntry from mood.js */\r\nfunction normalizeMoodEntry(entry = {}) {\r\n  const date = normalizeDateYYYYMMDD(entry.date || new Date());\r\n  const moodKey = normalizeMoodKey(entry.mood) ?? 'normal';\r\n  const note = typeof entry.note === 'string' ? entry.note.trim() : '';\r\n  return {\r\n    ...entry,\r\n    date,\r\n    mood: moodKey,\r\n    note,\r\n  };\r\n}\r\n\r\n/**\r\n * Replacement for calculateMoodDistribution from mood.js\r\n * Counts mood frequencies within a moving window (default 30 days) using `date` field of entries.\r\n */\r\nfunction calculateMoodDistribution(moodLogs = [], { days = 30 } = {}) {\r\n  if (!Array.isArray(moodLogs) || moodLogs.length === 0) return {};\r\n  const now = new Date();\r\n  const windowStart = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n  windowStart.setDate(windowStart.getDate() - (Number.isFinite(days) ? days : 30) + 1); // inclusive window\r\n\r\n  const counts = {};\r\n  for (const raw of moodLogs) {\r\n    const e = normalizeMoodEntry(raw);\r\n    if (!e.date) continue;\r\n    const d = new Date(e.date + 'T00:00:00');\r\n    if (d >= windowStart && d <= now) {\r\n      counts[e.mood] = (counts[e.mood] || 0) + 1;\r\n    }\r\n  }\r\n  return counts;\r\n}\r\n/* ========================= */\r\n\r\nconst defaultOnboarding = DEFAULT_VALUES[STORAGE_KEYS.onboardingData];\r\nconst defaultGoals = DEFAULT_VALUES[STORAGE_KEYS.goals];\r\nconst MOOD_DISTRIBUTION_WINDOW_DAYS = 30;\r\n\r\nconst MS_PER_DAY = 24 * 60 * 60 * 1000;\r\n\r\nfunction formatDateString(value) {\r\n  const date = value instanceof Date ? value : new Date(value);\r\n  if (Number.isNaN(date.getTime())) {\r\n    return null;\r\n  }\r\n  const year = date.getFullYear();\r\n  const month = String(date.getMonth() + 1).padStart(2, '0');\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n  return `${year}-${month}-${day}`;\r\n}\r\n\r\nfunction sanitizePeriodEntry(entry) {\r\n  if (!entry) return null;\r\n\r\n  // local clamp to avoid order issues with other helpers\r\n  const clampPainValue = (p) => {\r\n    const n = Number.parseInt(p, 10);\r\n    if (!Number.isFinite(n)) return null;\r\n    return Math.min(10, Math.max(1, n));\r\n  };\r\n\r\n  const start = formatDateString(entry.start || entry.date);\r\n  if (!start) return null;\r\n\r\n  const sanitized = { start };\r\n  const end = formatDateString(entry.end);\r\n  if (end) sanitized.end = end;\r\n\r\n  // ✅ preserve painScale if provided\r\n  const pain = clampPainValue(entry.painScale);\r\n  if (pain) sanitized.painScale = pain;\r\n\r\n  return sanitized;\r\n}\r\n\r\nfunction sanitizePeriodHistory(value) {\r\n  if (!Array.isArray(value)) {\r\n    return [];\r\n  }\r\n  return value.map((entry) => sanitizePeriodEntry(entry)).filter(Boolean);\r\n}\r\n\r\nfunction sanitizeGoals(value) {\r\n  if (!Array.isArray(value)) {\r\n    return [];\r\n  }\r\n  const deduped = Array.from(new Set(value.map((item) => String(item))));\r\n  return deduped.filter((item) => item.trim().length > 0);\r\n}\r\n\r\nfunction toPositiveInteger(value, fallback) {\r\n  const numeric = Number.parseInt(value, 10);\r\n  if (Number.isFinite(numeric) && numeric > 0) {\r\n    return numeric;\r\n  }\r\n  return fallback;\r\n}\r\n\r\nfunction buildSummaryFromOnboarding(data) {\r\n  const onboardingData = data || {};\r\n  const { lastPeriodStart, lastPeriodEnd, cycleLength, periodLength, periodHistory } = onboardingData;\r\n\r\n  const recordedPeriods = sanitizePeriodHistory(periodHistory);\r\n  const normalizedLastStart = formatDateString(lastPeriodStart);\r\n  const normalizedLastEnd = formatDateString(lastPeriodEnd);\r\n\r\n  if (normalizedLastStart) {\r\n    const existingIndex = recordedPeriods.findIndex((entry) => entry.start === normalizedLastStart);\r\n    if (existingIndex >= 0) {\r\n      if (normalizedLastEnd) {\r\n        recordedPeriods[existingIndex] = {\r\n          ...recordedPeriods[existingIndex],\r\n          end: normalizedLastEnd,\r\n        };\r\n      }\r\n    } else {\r\n      recordedPeriods.push({ start: normalizedLastStart, end: normalizedLastEnd || null });\r\n    }\r\n  }\r\n\r\n  recordedPeriods.sort((a, b) => {\r\n    const aTime = new Date(a.start).getTime();\r\n    const bTime = new Date(b.start).getTime();\r\n    return aTime - bTime;\r\n  });\r\n\r\n  const cycleLengthValue = toPositiveInteger(cycleLength, 0);\r\n  const summaryInput = recordedPeriods.map((entry) => ({ ...entry }));\r\n\r\n  if (summaryInput.length > 0 && cycleLengthValue > 0) {\r\n    const latestStart = summaryInput[summaryInput.length - 1].start;\r\n    const baseDate = formatDateString(latestStart);\r\n    if (baseDate) {\r\n      const parsed = new Date(baseDate);\r\n      if (!Number.isNaN(parsed.getTime())) {\r\n        parsed.setDate(parsed.getDate() + cycleLengthValue);\r\n        const predictedStart = formatDateString(parsed);\r\n        if (predictedStart && !summaryInput.some((entry) => entry.start === predictedStart)) {\r\n          summaryInput.push({ start: predictedStart, predicted: true });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  const periodLengthValue = toPositiveInteger(periodLength, 0);\r\n\r\n  const summaryPeriods = summaryInput.map((entry) => {\r\n    if (entry.end) {\r\n      return { start: entry.start, end: entry.end, predicted: Boolean(entry.predicted) };\r\n    }\r\n    if (entry.predicted || periodLengthValue <= 0) {\r\n      return { start: entry.start, end: entry.end, predicted: Boolean(entry.predicted) };\r\n    }\r\n    const startDate = new Date(entry.start);\r\n    if (Number.isNaN(startDate.getTime())) {\r\n      return { start: entry.start, end: entry.end, predicted: Boolean(entry.predicted) };\r\n    }\r\n    const endDate = new Date(startDate.getTime() + (periodLengthValue - 1) * MS_PER_DAY);\r\n    return {\r\n      start: entry.start,\r\n      end: formatDateString(endDate),\r\n      predicted: Boolean(entry.predicted),\r\n    };\r\n  });\r\n\r\n  const summary = calculateCycleSummary(summaryPeriods);\r\n  const averageCycleLength = cycleLengthValue || summary.averageCycleLength;\r\n  const averagePeriodLength = periodLengthValue || summary.averagePeriodLength;\r\n\r\n  return {\r\n    ...summary,\r\n    averageCycleLength,\r\n    averagePeriodLength,\r\n    lastPeriodStart: normalizedLastStart || null,\r\n    lastPeriodEnd: normalizedLastEnd || null,\r\n  };\r\n}\r\n\r\n/* ======= NEW HELPERS (addPeriod support) ======= */\r\nfunction isFutureISO(iso) {\r\n  if (!iso) return false;\r\n  const d = new Date(iso + 'T00:00:00');\r\n  const today = new Date();\r\n  const td = new Date(today.getFullYear(), today.getMonth(), today.getDate());\r\n  return d.getTime() > td.getTime();\r\n}\r\n\r\nfunction datesOverlap(aStart, aEnd, bStart, bEnd) {\r\n  const aS = new Date(aStart).getTime();\r\n  const aE = new Date((aEnd || aStart) + 'T00:00:00').getTime();\r\n  const bS = new Date(bStart).getTime();\r\n  const bE = new Date((bEnd || bStart) + 'T00:00:00').getTime();\r\n  return aS <= bE && bS <= aE;\r\n}\r\n\r\nfunction sortByStartAsc(list) {\r\n  return [...list].sort((x, y) => new Date(x.start) - new Date(y.start));\r\n}\r\n\r\nfunction clampPain(p) {\r\n  const n = Number.parseInt(p, 10);\r\n  if (!Number.isFinite(n)) return null;\r\n  return Math.min(10, Math.max(1, n));\r\n}\r\n/* ======= /NEW HELPERS ======= */\r\n\r\nfunction createEmptyMoodPatterns() {\r\n  return analyzeMoodPatternsByPhase([], {});\r\n}\r\n\r\nconst useSiklusStore = create((set, get) => ({\r\n  hydrated: false,\r\n  onboardingCompleted: DEFAULT_VALUES[STORAGE_KEYS.onboardingCompleted],\r\n  onboardingData: { ...defaultOnboarding },\r\n  moodLogs: DEFAULT_VALUES[STORAGE_KEYS.moodLogs],\r\n  goals: [...defaultGoals],\r\n  cycleSummary: buildSummaryFromOnboarding(defaultOnboarding),\r\n  activeView: 'dashboard',\r\n  loveLetterShown: DEFAULT_VALUES[STORAGE_KEYS.loveLetterShownOnce],\r\n  streak: 0,\r\n  consistency: 0,\r\n  moodDistribution: calculateMoodDistribution([], { days: MOOD_DISTRIBUTION_WINDOW_DAYS }),\r\n  moodPatterns: createEmptyMoodPatterns(),\r\n  achievements: [],\r\n\r\n  hydrate: () => {\r\n    if (get().hydrated) {\r\n      return;\r\n    }\r\n\r\n    const onboardingCompleted = getLocalValue(STORAGE_KEYS.onboardingCompleted);\r\n    const rawOnboardingData = getLocalValue(STORAGE_KEYS.onboardingData);\r\n    const onboardingGoals = sanitizeGoals(rawOnboardingData.goals);\r\n    const onboardingData = { ...rawOnboardingData, goals: onboardingGoals };\r\n\r\n    const moodLogs = getLocalValue(STORAGE_KEYS.moodLogs).map((entry) => normalizeMoodEntry(entry));\r\n    const storedGoals = sanitizeGoals(getLocalValue(STORAGE_KEYS.goals));\r\n    const goals = storedGoals.length > 0 ? storedGoals : onboardingGoals;\r\n    const cycleSummary = buildSummaryFromOnboarding(onboardingData);\r\n    const loveLetterShown = getLocalValue(STORAGE_KEYS.loveLetterShownOnce);\r\n\r\n    // Calculate streak, consistency, and mood distribution\r\n    const streak = calculateStreak(moodLogs);\r\n    setLocalValue(STORAGE_KEYS.streak, streak);\r\n    const consistency = calculateConsistency(moodLogs);\r\n    const moodDistribution = calculateMoodDistribution(moodLogs, { days: MOOD_DISTRIBUTION_WINDOW_DAYS });\r\n    const moodPatterns = analyzeMoodPatternsByPhase(moodLogs, cycleSummary);\r\n    const achievements = calculateAchievements({\r\n      moodLogs,\r\n      streak,\r\n      consistency,\r\n      cycleSummary,\r\n      onboardingCompleted,\r\n      onboardingData,\r\n    });\r\n\r\n    // Load daily logs\r\n    const dailyLogs = (() => {\r\n      try {\r\n        const saved = localStorage.getItem('risa:dailyLogs');\r\n        return saved ? JSON.parse(saved) : [];\r\n      } catch {\r\n        return [];\r\n      }\r\n    })();\r\n\r\n    set({\r\n      hydrated: true,\r\n      onboardingCompleted,\r\n      onboardingData,\r\n      moodLogs,\r\n      goals,\r\n      cycleSummary,\r\n      loveLetterShown,\r\n      streak,\r\n      consistency,\r\n      moodDistribution,\r\n      moodPatterns,\r\n      achievements,\r\n      dailyLogs: Array.isArray(dailyLogs) ? dailyLogs : [],\r\n    });\r\n  },\r\n\r\n  setActiveView: (view) => set({ activeView: view }),\r\n\r\n  setOnboardingCompleted: (completed) => {\r\n    const normalized = Boolean(completed);\r\n    setLocalValue(STORAGE_KEYS.onboardingCompleted, normalized);\r\n    set((state) => {\r\n      const achievements = calculateAchievements({\r\n        moodLogs: state.moodLogs,\r\n        streak: state.streak,\r\n        consistency: state.consistency,\r\n        cycleSummary: state.cycleSummary,\r\n        onboardingCompleted: normalized,\r\n        onboardingData: state.onboardingData,\r\n      });\r\n      return { onboardingCompleted: normalized, achievements };\r\n    });\r\n  },\r\n\r\n  updateOnboardingDraft: (partial) => {\r\n    const current = get().onboardingData;\r\n    const next = { ...current, ...partial };\r\n    if (Object.prototype.hasOwnProperty.call(partial, 'goals')) {\r\n      next.goals = sanitizeGoals(partial.goals);\r\n    }\r\n    set({\r\n      onboardingData: next,\r\n      cycleSummary: buildSummaryFromOnboarding(next),\r\n    });\r\n  },\r\n\r\n  commitOnboardingData: () => {\r\n    const stateSnapshot = get();\r\n    const goals = sanitizeGoals(stateSnapshot.onboardingData.goals);\r\n    const normalizedData = { ...stateSnapshot.onboardingData, goals };\r\n\r\n    setLocalValue(STORAGE_KEYS.onboardingData, normalizedData);\r\n    setLocalValue(STORAGE_KEYS.goals, goals);\r\n\r\n    const cycleSummary = buildSummaryFromOnboarding(normalizedData);\r\n    const achievements = calculateAchievements({\r\n      moodLogs: stateSnapshot.moodLogs,\r\n      streak: stateSnapshot.streak,\r\n      consistency: stateSnapshot.consistency,\r\n      cycleSummary,\r\n      onboardingCompleted: stateSnapshot.onboardingCompleted,\r\n      onboardingData: normalizedData,\r\n    });\r\n\r\n    set({\r\n      onboardingData: normalizedData,\r\n      cycleSummary,\r\n      goals,\r\n      achievements,\r\n    });\r\n  },\r\n\r\n  resetOnboardingData: () => {\r\n    const defaults = { ...defaultOnboarding, goals: sanitizeGoals(defaultOnboarding.goals) };\r\n    const defaultGoalList = sanitizeGoals(defaultGoals);\r\n\r\n    setLocalValue(STORAGE_KEYS.onboardingData, defaults);\r\n    setLocalValue(STORAGE_KEYS.goals, defaultGoalList);\r\n    setLocalValue(STORAGE_KEYS.loveLetterShownOnce, false);\r\n\r\n    set((state) => {\r\n      const cycleSummary = buildSummaryFromOnboarding(defaults);\r\n      const achievements = calculateAchievements({\r\n        moodLogs: state.moodLogs,\r\n        streak: state.streak,\r\n        consistency: state.consistency,\r\n        cycleSummary,\r\n        onboardingCompleted: state.onboardingCompleted,\r\n        onboardingData: defaults,\r\n      });\r\n\r\n      return {\r\n        onboardingData: defaults,\r\n        cycleSummary,\r\n        goals: defaultGoalList,\r\n        loveLetterShown: false,\r\n        achievements,\r\n      };\r\n    });\r\n  },\r\n\r\n  /* ======= NEW ACTION: addPeriod (drop-in replacement) ======= */\r\n  /**\r\n   * Add a new period entry and recalculate summaries.\r\n   * @param {{start:string, end?:string|null, painScale?:number}} payload\r\n   * Throws Error with message for validation failures.\r\n   */\r\n  addPeriod: (payload) => {\r\n    const { start, end = null, painScale = null } = payload || {};\r\n    const sISO = formatDateString(start);\r\n    const eISO = end ? formatDateString(end) : null;\r\n\r\n    // ---- Validation\r\n    if (!sISO) throw new Error('Tanggal mulai diperlukan.');\r\n    if (isFutureISO(sISO)) throw new Error('Tanggal mulai tidak boleh di masa depan.');\r\n    if (eISO) {\r\n      if (isFutureISO(eISO)) throw new Error('Tanggal selesai tidak boleh di masa depan.');\r\n      if (new Date(eISO) < new Date(sISO)) {\r\n        throw new Error('Tanggal selesai tidak boleh sebelum tanggal mulai.');\r\n      }\r\n    }\r\n\r\n    const state = get();\r\n    const current = state.onboardingData || {};\r\n    const existing = sanitizePeriodHistory(current.periodHistory);\r\n\r\n    // Duplicate start date?\r\n    if (existing.some((it) => it.start === sISO)) {\r\n      throw new Error('Sudah ada catatan dengan tanggal mulai tersebut.');\r\n    }\r\n\r\n    // Overlap check (treat open-end as 1-day)\r\n    for (const it of existing) {\r\n      if (datesOverlap(sISO, eISO, it.start, it.end || it.start)) {\r\n        throw new Error('Rentang tanggal tumpang tindih dengan catatan lain.');\r\n      }\r\n    }\r\n\r\n    // Build new entry\r\n    const entry = { start: sISO, end: eISO || null };\r\n    const pain = clampPain(painScale);\r\n    if (pain) entry.painScale = pain;\r\n\r\n    const nextHistory = sortByStartAsc([...existing, entry]);\r\n\r\n    const nextOnboarding = {\r\n      ...current,\r\n      periodHistory: nextHistory,\r\n      lastPeriodStart: sISO,\r\n      lastPeriodEnd: eISO,\r\n    };\r\n\r\n    // Persist onboarding data\r\n    setLocalValue(STORAGE_KEYS.onboardingData, nextOnboarding);\r\n\r\n    // Base summary from helper\r\n    const baseSummary = buildSummaryFromOnboarding(nextOnboarding);\r\n\r\n    // ===== Recalculate averages from real history (if possible)\r\n    let averageCycleLength = baseSummary.averageCycleLength;\r\n    let averagePeriodLength = baseSummary.averagePeriodLength;\r\n\r\n    if (nextOnboarding.periodHistory?.length >= 2) {\r\n      const entries = nextOnboarding.periodHistory\r\n        .filter((p) => p.start)\r\n        .map((p) => ({\r\n          start: new Date(p.start + 'T00:00:00'),\r\n          end: p.end ? new Date(p.end + 'T00:00:00') : null,\r\n        }))\r\n        .sort((a, b) => a.start - b.start);\r\n\r\n      // Cycle lengths = gaps between starts\r\n      const cycleLens = [];\r\n      for (let i = 1; i < entries.length; i++) {\r\n        const days = Math.round((entries[i].start - entries[i - 1].start) / MS_PER_DAY);\r\n        // guard against noise: typical cycle ~ 15..60\r\n        if (days >= 15 && days <= 60) cycleLens.push(days);\r\n      }\r\n      if (cycleLens.length) {\r\n        averageCycleLength = Math.round(cycleLens.reduce((a, b) => a + b, 0) / cycleLens.length);\r\n      }\r\n\r\n      // Period lengths = (end - start) + 1\r\n      const periodLens = entries.map((e) => (e.end ? Math.round((e.end - e.start) / MS_PER_DAY) + 1 : null)).filter((v) => Number.isFinite(v) && v > 0 && v <= 15); // guard typical duration\r\n      if (periodLens.length) {\r\n        averagePeriodLength = Math.round(periodLens.reduce((a, b) => a + b, 0) / periodLens.length);\r\n      }\r\n    }\r\n\r\n    const cycleSummary = {\r\n      ...baseSummary,\r\n      averageCycleLength,\r\n      averagePeriodLength,\r\n    };\r\n\r\n    // ===== Mark onboarded (so UI never gates again)\r\n    setLocalValue(STORAGE_KEYS.onboardingCompleted, true);\r\n\r\n    // ===== Aggregate pain for future charts — last 12 months\r\n    const twelveMonthsAgo = new Date();\r\n    twelveMonthsAgo.setMonth(twelveMonthsAgo.getMonth() - 12);\r\n\r\n    const painPointsLast12M = nextHistory.filter((it) => it.painScale && new Date(it.start) >= twelveMonthsAgo).map((it) => ({ date: it.start, pain: it.painScale }));\r\n\r\n    const painMonthlyLast12M = painPointsLast12M.reduce((acc, p) => {\r\n      const d = new Date(p.date);\r\n      const key = `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}`;\r\n      acc[key] = acc[key] || { month: key, total: 0, count: 0 };\r\n      acc[key].total += p.pain;\r\n      acc[key].count += 1;\r\n      return acc;\r\n    }, {});\r\n    const painMonthlyArr = Object.values(painMonthlyLast12M)\r\n      .map((x) => ({ month: x.month, avgPain: Math.round((x.total / x.count) * 10) / 10 }))\r\n      .sort((a, b) => (a.month < b.month ? -1 : 1));\r\n\r\n    const achievements = calculateAchievements({\r\n      moodLogs: state.moodLogs,\r\n      streak: state.streak,\r\n      consistency: state.consistency,\r\n      cycleSummary,\r\n      onboardingCompleted: true, // reflect the flag for achievement logic\r\n      onboardingData: nextOnboarding,\r\n    });\r\n\r\n    // ===== Commit to store\r\n    set({\r\n      onboardingData: nextOnboarding,\r\n      cycleSummary,\r\n      achievements,\r\n      painPointsLast12M: painPointsLast12M,\r\n      painMonthlyLast12M: painMonthlyArr,\r\n      onboardingCompleted: true,\r\n    });\r\n  },\r\n  /* ======= /NEW ACTION ======= */\r\n\r\n  /* ======= FIXED: addMoodLog ======= */\r\n  addMoodLog: (log) => {\r\n    const normalized = normalizeMoodEntry(log);\r\n    const state = get();\r\n    const todayKey = normalized.date;\r\n\r\n    // ---- Overwrite existing mood for the same date ----\r\n    const existing = Array.isArray(state.moodLogs) ? state.moodLogs : [];\r\n    const filtered = existing.filter((entry) => entry.date !== todayKey);\r\n    const moodLogs = [...filtered, normalized];\r\n\r\n    // Persist\r\n    setLocalValue(STORAGE_KEYS.moodLogs, moodLogs);\r\n\r\n    // Recalculate derived stats\r\n    const streak = calculateStreak(moodLogs);\r\n    setLocalValue(STORAGE_KEYS.streak, streak);\r\n    const consistency = calculateConsistency(moodLogs);\r\n    const moodDistribution = calculateMoodDistribution(moodLogs, {\r\n      days: MOOD_DISTRIBUTION_WINDOW_DAYS,\r\n    });\r\n    const moodPatterns = analyzeMoodPatternsByPhase(moodLogs, state.cycleSummary);\r\n    const achievements = calculateAchievements({\r\n      moodLogs,\r\n      streak,\r\n      consistency,\r\n      cycleSummary: state.cycleSummary,\r\n      onboardingCompleted: state.onboardingCompleted,\r\n      onboardingData: state.onboardingData,\r\n    });\r\n\r\n    set({\r\n      moodLogs,\r\n      streak,\r\n      consistency,\r\n      moodDistribution,\r\n      moodPatterns,\r\n      achievements,\r\n    });\r\n  },\r\n  /* ======= /FIXED ======= */\r\n\r\n  replaceMoodLogs: (logs) => {\r\n    const normalized = logs.map((log) => normalizeMoodEntry(log));\r\n    setLocalValue(STORAGE_KEYS.moodLogs, normalized);\r\n\r\n    // Recalculate streak, consistency, and mood distribution\r\n    const streak = calculateStreak(normalized);\r\n    setLocalValue(STORAGE_KEYS.streak, streak);\r\n    const consistency = calculateConsistency(normalized);\r\n    const moodDistribution = calculateMoodDistribution(normalized, { days: MOOD_DISTRIBUTION_WINDOW_DAYS });\r\n\r\n    const stateSnapshot = get();\r\n    const moodPatterns = analyzeMoodPatternsByPhase(normalized, stateSnapshot.cycleSummary);\r\n    const achievements = calculateAchievements({\r\n      moodLogs: normalized,\r\n      streak,\r\n      consistency,\r\n      cycleSummary: stateSnapshot.cycleSummary,\r\n      onboardingCompleted: stateSnapshot.onboardingCompleted,\r\n      onboardingData: stateSnapshot.onboardingData,\r\n    });\r\n\r\n    set({\r\n      moodLogs: normalized,\r\n      streak,\r\n      consistency,\r\n      moodDistribution,\r\n      moodPatterns,\r\n      achievements,\r\n    });\r\n  },\r\n\r\n  setGoals: (nextGoals) => {\r\n    const value = sanitizeGoals(nextGoals);\r\n    setLocalValue(STORAGE_KEYS.goals, value);\r\n    set({ goals: value });\r\n  },\r\n\r\n  markLoveLetterShown: () => {\r\n    setLocalValue(STORAGE_KEYS.loveLetterShownOnce, true);\r\n    set({ loveLetterShown: true });\r\n  },\r\n\r\n  resetLoveLetter: () => {\r\n    setLocalValue(STORAGE_KEYS.loveLetterShownOnce, false);\r\n    set({ loveLetterShown: false });\r\n  },\r\n\r\n  // Daily tracking functionality\r\n  dailyLogs: [],\r\n\r\n  addDailyLog: (logData) => {\r\n    const state = get();\r\n    const existingIndex = state.dailyLogs.findIndex((log) => log.date === logData.date);\r\n\r\n    let updatedLogs;\r\n    if (existingIndex >= 0) {\r\n      // Update existing log\r\n      updatedLogs = [...state.dailyLogs];\r\n      updatedLogs[existingIndex] = { ...updatedLogs[existingIndex], ...logData };\r\n    } else {\r\n      // Add new log\r\n      updatedLogs = [...state.dailyLogs, logData];\r\n    }\r\n\r\n    // Sort by date (newest first)\r\n    updatedLogs.sort((a, b) => new Date(b.date) - new Date(a.date));\r\n\r\n    try {\r\n      localStorage.setItem('risa:dailyLogs', JSON.stringify(updatedLogs));\r\n    } catch (error) {\r\n      console.warn('Failed to save daily logs:', error);\r\n    }\r\n\r\n    set({ dailyLogs: updatedLogs });\r\n  },\r\n\r\n  loadDailyLogs: () => {\r\n    try {\r\n      const saved = localStorage.getItem('risa:dailyLogs');\r\n      if (saved) {\r\n        const logs = JSON.parse(saved);\r\n        set({ dailyLogs: Array.isArray(logs) ? logs : [] });\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to load daily logs:', error);\r\n      set({ dailyLogs: [] });\r\n    }\r\n  },\r\n}));\r\n\r\nexport default useSiklusStore;\r\n","\"use client\";\r\n\r\nimport { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { formatDisplayDate } from \"@/lib/siklus/cycleMath\";\r\n\r\nconst WEEKDAY_LABELS = [\"Sen\", \"Sel\", \"Rab\", \"Kam\", \"Jum\", \"Sab\", \"Min\"];\r\n\r\nfunction cx(...vals) {\r\n  return vals.filter(Boolean).join(\" \");\r\n}\r\n\r\nfunction normalizeInputDate(value) {\r\n  if (!value && value !== 0) return null;\r\n  if (value instanceof Date) {\r\n    return new Date(value.getFullYear(), value.getMonth(), value.getDate());\r\n  }\r\n  if (typeof value === \"string\") {\r\n    const m = value.match(/^(\\d{4})-(\\d{2})-(\\d{2})$/);\r\n    if (m) return new Date(+m[1], +m[2] - 1, +m[3]);\r\n  }\r\n  const d = new Date(value);\r\n  if (Number.isNaN(d.getTime())) return null;\r\n  return new Date(d.getFullYear(), d.getMonth(), d.getDate());\r\n}\r\n\r\nfunction startOfMonth(date) {\r\n  return new Date(date.getFullYear(), date.getMonth(), 1);\r\n}\r\nfunction addDays(date, n) {\r\n  return new Date(date.getFullYear(), date.getMonth(), date.getDate() + n);\r\n}\r\nfunction isSameMonth(a, b) {\r\n  return a.getFullYear() === b.getFullYear() && a.getMonth() === b.getMonth();\r\n}\r\nfunction toISO(date) {\r\n  const y = date.getFullYear();\r\n  const m = String(date.getMonth() + 1).padStart(2, \"0\");\r\n  const d = String(date.getDate()).padStart(2, \"0\");\r\n  return `${y}-${m}-${d}`;\r\n}\r\n\r\nexport default function CalendarRange({\r\n  value = {},\r\n  onChange,\r\n  max,\r\n  min,\r\n  className,\r\n  ariaInvalid = false,\r\n  ariaDescribedBy,\r\n}) {\r\n  const today = normalizeInputDate(new Date());\r\n  const maxDate = normalizeInputDate(max) || today;\r\n  const minDate = normalizeInputDate(min);\r\n  const startDate = normalizeInputDate(value.start);\r\n  const endDate = normalizeInputDate(value.end);\r\n\r\n  const initialView = startDate || endDate || maxDate || today;\r\n  const [viewDate, setViewDate] = useState(initialView);\r\n\r\n  const pendingFocusRef = useRef(null);\r\n  const gridRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (startDate && !isSameMonth(startDate, viewDate)) setViewDate(startDate);\r\n  }, [value.start]);\r\n  useEffect(() => {\r\n    if (!startDate && endDate && !isSameMonth(endDate, viewDate)) setViewDate(endDate);\r\n  }, [value.end]);\r\n\r\n  useEffect(() => {\r\n    if (pendingFocusRef.current && gridRef.current) {\r\n      const el = gridRef.current.querySelector(`[data-day=\"${pendingFocusRef.current}\"]`);\r\n      if (el) {\r\n        el.focus();\r\n        pendingFocusRef.current = null;\r\n      }\r\n    }\r\n  }, [viewDate, startDate, endDate]);\r\n\r\n  const calendarDays = useMemo(() => {\r\n    const monthStart = startOfMonth(viewDate);\r\n    const firstWeekday = (monthStart.getDay() + 6) % 7; // Monday-first\r\n    const gridStart = addDays(monthStart, -firstWeekday);\r\n    return Array.from({ length: 42 }, (_, i) => addDays(gridStart, i));\r\n  }, [viewDate]);\r\n\r\n  const canGoPrev =\r\n    !minDate ||\r\n    viewDate.getFullYear() > minDate.getFullYear() ||\r\n    (viewDate.getFullYear() === minDate.getFullYear() &&\r\n      viewDate.getMonth() > minDate.getMonth());\r\n  const canGoNext =\r\n    !maxDate ||\r\n    viewDate.getFullYear() < maxDate.getFullYear() ||\r\n    (viewDate.getFullYear() === maxDate.getFullYear() &&\r\n      viewDate.getMonth() < maxDate.getMonth());\r\n\r\n  const startTime = startDate ? startDate.getTime() : null;\r\n  const endTime = endDate ? endDate.getTime() : null;\r\n  const maxTime = maxDate ? maxDate.getTime() : null;\r\n  const minTime = minDate ? minDate.getTime() : null;\r\n\r\n  const rangeValue = useMemo(\r\n    () => ({\r\n      start: startDate ? toISO(startDate) : null,\r\n      end: endDate ? toISO(endDate) : null,\r\n    }),\r\n    [startDate, endDate]\r\n  );\r\n\r\n  function emitRange(nextRange) {\r\n    if (typeof onChange !== \"function\") return;\r\n    onChange({\r\n      start: nextRange.start || null,\r\n      end: nextRange.end || null,\r\n    });\r\n  }\r\n\r\n  function selectDay(dateIso, dateObj) {\r\n    const t = dateObj.getTime();\r\n    if ((minTime !== null && t < minTime) || (maxTime !== null && t > maxTime)) return;\r\n\r\n    const startIso = rangeValue.start;\r\n    const endIso = rangeValue.end;\r\n\r\n    if (!startIso || endIso) {\r\n      emitRange({ start: dateIso, end: null });\r\n      return;\r\n    }\r\n    if (dateIso < startIso) {\r\n      emitRange({ start: dateIso, end: startIso });\r\n    } else {\r\n      emitRange({ start: startIso, end: dateIso });\r\n    }\r\n  }\r\n\r\n  function focusDay(dateIso) {\r\n    if (!gridRef.current) {\r\n      pendingFocusRef.current = dateIso;\r\n      return;\r\n    }\r\n    const el = gridRef.current.querySelector(`[data-day=\"${dateIso}\"]`);\r\n    if (el) {\r\n      el.focus();\r\n      pendingFocusRef.current = null;\r\n    } else {\r\n      pendingFocusRef.current = dateIso;\r\n    }\r\n  }\r\n\r\n  function handleNavigation(targetDate, focusIso) {\r\n    setViewDate(targetDate);\r\n    pendingFocusRef.current = focusIso;\r\n  }\r\n\r\n  function handleDayKeyDown(event, dateObj) {\r\n    const keyMap = { ArrowRight: 1, ArrowLeft: -1, ArrowUp: -7, ArrowDown: 7 };\r\n    if (keyMap[event.key]) {\r\n      event.preventDefault();\r\n      const target = addDays(dateObj, keyMap[event.key]);\r\n      const iso = toISO(target);\r\n      if (!isSameMonth(target, viewDate)) handleNavigation(target, iso);\r\n      else focusDay(iso);\r\n      return;\r\n    }\r\n    if (event.key === \"Enter\" || event.key === \" \") {\r\n      event.preventDefault();\r\n      selectDay(toISO(dateObj), dateObj);\r\n    }\r\n  }\r\n\r\n  function renderDay(dateObj) {\r\n    const iso = toISO(dateObj);\r\n    const time = dateObj.getTime();\r\n    const disabled =\r\n      (minTime !== null && time < minTime) || (maxTime !== null && time > maxTime);\r\n    const isStart = startTime !== null && time === startTime;\r\n    const isEnd = endTime !== null && time === endTime;\r\n    const inRange =\r\n      startTime !== null && endTime !== null && time > startTime && time < endTime;\r\n    const outside = !isSameMonth(dateObj, viewDate);\r\n    const isToday = today && time === today.getTime();\r\n\r\n    const classes = cx(\r\n      \"flex h-10 w-10 items-center justify-center rounded-full text-sm font-medium transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-500\",\r\n      disabled && \"cursor-not-allowed text-slate-300\",\r\n      !disabled && (isStart || isEnd) && \"bg-pink-500 text-white\",\r\n      !disabled && !isStart && !isEnd && inRange && \"bg-pink-100 text-pink-600\",\r\n      !disabled && !isStart && !isEnd && !inRange && outside && \"text-slate-400\",\r\n      !disabled && !isStart && !isEnd && !inRange && !outside && \"text-slate-700 hover:bg-pink-50\"\r\n    );\r\n\r\n    const aria = [formatDisplayDate(iso) || iso];\r\n    if (isToday) aria.push(\"(hari ini)\");\r\n\r\n    return (\r\n      <button\r\n        key={iso}\r\n        type=\"button\"\r\n        data-day={iso}\r\n        className={classes}\r\n        onClick={() => selectDay(iso, dateObj)}\r\n        onKeyDown={(e) => handleDayKeyDown(e, dateObj)}\r\n        disabled={disabled}\r\n        role=\"gridcell\"\r\n        aria-selected={isStart || isEnd}\r\n        aria-label={aria.join(\" \")}\r\n      >\r\n        <span className=\"relative\">\r\n          {dateObj.getDate()}\r\n          {isToday ? (\r\n            <span className=\"absolute left-1/2 top-[85%] -translate-x-1/2 block h-1 w-1 rounded-full bg-pink-500\" />\r\n          ) : null}\r\n        </span>\r\n      </button>\r\n    );\r\n  }\r\n\r\n  const monthFormatter = useMemo(\r\n    () => new Intl.DateTimeFormat(\"id-ID\", { month: \"long\", year: \"numeric\" }),\r\n    []\r\n  );\r\n\r\n  return (\r\n    <div className={cx(\"space-y-3\", className)}>\r\n      <div className=\"flex flex-col gap-2\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h4 className=\"text-sm font-semibold text-slate-700\">Pilih rentang tanggal</h4>\r\n            <p className=\"text-xs text-slate-500\">\r\n              Klik tanggal mulai lalu tanggal selesai haidmu.\r\n            </p>\r\n          </div>\r\n\r\n          {/* Month navigation only */}\r\n          <div className=\"flex gap-2\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                if (!canGoPrev) return;\r\n                const prev = new Date(\r\n                  viewDate.getFullYear(),\r\n                  viewDate.getMonth() - 1,\r\n                  1\r\n                );\r\n                handleNavigation(prev, toISO(prev));\r\n              }}\r\n              disabled={!canGoPrev}\r\n              className=\"rounded-full border border-slate-200 px-3 py-1 text-xs font-medium text-slate-600 disabled:opacity-40\"\r\n            >\r\n              Sebelumnya\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                if (!canGoNext) return;\r\n                const next = new Date(\r\n                  viewDate.getFullYear(),\r\n                  viewDate.getMonth() + 1,\r\n                  1\r\n                );\r\n                handleNavigation(next, toISO(next));\r\n              }}\r\n              disabled={!canGoNext}\r\n              className=\"rounded-full border border-slate-200 px-3 py-1 text-xs font-medium text-slate-600 disabled:opacity-40\"\r\n            >\r\n              Berikutnya\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"rounded-2xl border border-pink-100 bg-white p-4 shadow-sm\">\r\n          <div className=\"mb-3 flex items-center justify-between\">\r\n            <p className=\"text-sm font-semibold text-slate-700\">\r\n              {monthFormatter.format(viewDate)}\r\n            </p>\r\n          </div>\r\n\r\n          <div\r\n            role=\"grid\"\r\n            aria-label=\"Kalender pemilihan rentang haid\"\r\n            aria-invalid={ariaInvalid ? \"true\" : undefined}\r\n            aria-describedby={ariaDescribedBy}\r\n            className=\"grid grid-cols-7 gap-1\"\r\n            ref={gridRef}\r\n          >\r\n            {WEEKDAY_LABELS.map((label) => (\r\n              <div\r\n                key={label}\r\n                role=\"columnheader\"\r\n                className=\"h-8 text-center text-[11px] font-semibold uppercase tracking-wide text-slate-400\"\r\n              >\r\n                {label}\r\n              </div>\r\n            ))}\r\n            {calendarDays.map(renderDay)}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"rounded-xl bg-pink-50 px-4 py-3 text-xs text-pink-700\">\r\n        <p>\r\n          Terpilih:{\" \"}\r\n          {rangeValue.start ? formatDisplayDate(rangeValue.start) : \"Belum ada\"}\r\n          {rangeValue.start ? \" → \" : \"\"}\r\n          {rangeValue.start\r\n            ? rangeValue.end\r\n              ? formatDisplayDate(rangeValue.end)\r\n              : \"pilih tanggal selesai\"\r\n            : \"\"}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useEffect, useMemo, useRef, useState } from 'react';\r\nimport { gsap } from 'gsap';\r\nimport useSiklusStore from '../../store/useSiklusStore';\r\nimport CalendarRange from './CalendarRange';\r\nimport { formatDisplayDate } from '@/lib/siklus/cycleMath';\r\n\r\n// Helpers\r\nconst todayIso = () => new Date().toISOString().slice(0, 10);\r\n\r\nfunction calculateDurationDays(start, end) {\r\n  if (!start || !end) return null;\r\n  const s = new Date(start);\r\n  const e = new Date(end);\r\n  if (Number.isNaN(s.getTime()) || Number.isNaN(e.getTime())) return null;\r\n  const diff = e.getTime() - s.getTime();\r\n  if (!Number.isFinite(diff) || diff < 0) return null;\r\n  return Math.floor(diff / (1000 * 60 * 60 * 24)) + 1;\r\n}\r\n\r\n/** ================== Step ================== */\r\nfunction UnifiedStep({ values, errors, onChange }) {\r\n  const today = todayIso();\r\n\r\n  const rangeValue = useMemo(\r\n    () => ({\r\n      start: values.lastPeriodStart || null,\r\n      end: values.lastPeriodEnd || null,\r\n    }),\r\n    [values.lastPeriodStart, values.lastPeriodEnd]\r\n  );\r\n\r\n  const durationWarning = useMemo(() => {\r\n    const d = calculateDurationDays(values.lastPeriodStart, values.lastPeriodEnd);\r\n    if (!d || d <= 8) return null;\r\n    return 'Durasi haidmu lebih dari 8 hari. Kalau ini baru terjadi, coba diskusikan dengan orang dewasa atau tenaga kesehatan yang kamu percaya.';\r\n  }, [values.lastPeriodStart, values.lastPeriodEnd]);\r\n\r\n  function handleRangeChange(nextRange) {\r\n    onChange('lastPeriodStart', nextRange.start || null);\r\n    onChange('lastPeriodEnd', nextRange.end || null);\r\n  }\r\n\r\n  const painScale = Array.from({ length: 10 }, (_, i) => i + 1);\r\n\r\n  return (\r\n    <fieldset className=\"space-y-6\">\r\n      {/* Date Range */}\r\n      <div className=\"space-y-2\">\r\n        <legend className=\"text-lg font-semibold text-slate-800\">Tanggal haid terakhirmu</legend>\r\n\r\n        <CalendarRange\r\n          value={rangeValue}\r\n          onChange={handleRangeChange}\r\n          max={today}\r\n          ariaInvalid={Boolean(errors.lastPeriodStart) || Boolean(errors.lastPeriodEnd)}\r\n          ariaDescribedBy={[errors.lastPeriodStart ? 'lastPeriodStart-error' : null, errors.lastPeriodEnd ? 'lastPeriodEnd-error' : null].filter(Boolean).join(' ') || undefined}\r\n        />\r\n\r\n        <div className=\"mt-2 flex flex-wrap items-center gap-2 text-xs text-slate-500\">\r\n          <span>Mulai: {rangeValue.start ? formatDisplayDate(rangeValue.start) : 'Belum dipilih'}</span>\r\n          <span>{'\\u2022'}</span>\r\n          <span>Selesai: {rangeValue.end ? formatDisplayDate(rangeValue.end) : 'Belum dipilih'}</span>\r\n        </div>\r\n\r\n        <div className=\"space-y-1 text-xs text-red-500\" aria-live=\"polite\">\r\n          {errors.lastPeriodStart ? (\r\n            <p id=\"lastPeriodStart-error\" role=\"alert\">\r\n              {errors.lastPeriodStart}\r\n            </p>\r\n          ) : null}\r\n          {errors.lastPeriodEnd ? (\r\n            <p id=\"lastPeriodEnd-error\" role=\"alert\">\r\n              {errors.lastPeriodEnd}\r\n            </p>\r\n          ) : null}\r\n        </div>\r\n\r\n        {durationWarning ? <p className=\"text-xs text-amber-600\">{durationWarning}</p> : null}\r\n      </div>\r\n\r\n      {/* Pain Scale */}\r\n      <div className=\"space-y-3\">\r\n        <span className=\"text-sm font-medium text-slate-700\">Skala nyeri haidmu</span>\r\n        <div className=\"flex flex-wrap gap-2\" role=\"radiogroup\" aria-label=\"Skala nyeri haid 1 sampai 10\">\r\n          {painScale.map((value) => (\r\n            <button\r\n              key={value}\r\n              type=\"button\"\r\n              role=\"radio\"\r\n              aria-checked={values.painScale === value}\r\n              onClick={() => onChange('painScale', value)}\r\n              className={`h-9 w-9 rounded-full border text-sm font-medium transition-transform focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-500 hover:scale-105 cursor-pointer ${\r\n                values.painScale === value ? 'border-pink-500 bg-pink-500 text-white' : 'border-slate-200 bg-white text-slate-600'\r\n              }`}\r\n            >\r\n              {value}\r\n            </button>\r\n          ))}\r\n        </div>\r\n        {errors.painScale ? (\r\n          <span id=\"painScale-error\" role=\"alert\" className=\"text-xs text-red-500\">\r\n            {errors.painScale}\r\n          </span>\r\n        ) : null}\r\n      </div>\r\n    </fieldset>\r\n  );\r\n}\r\n\r\n/** ============== Validation ============== */\r\nfunction getStepErrors(values) {\r\n  const nextErrors = {};\r\n  const today = todayIso();\r\n\r\n  if (!values.lastPeriodStart) {\r\n    nextErrors.lastPeriodStart = 'Isi tanggal mulai ya';\r\n  } else if (values.lastPeriodStart > today) {\r\n    nextErrors.lastPeriodStart = 'Tanggal tidak boleh di masa depan';\r\n  }\r\n\r\n  if (!values.lastPeriodEnd) {\r\n    nextErrors.lastPeriodEnd = 'Isi tanggal selesai ya';\r\n  } else if (values.lastPeriodEnd > today) {\r\n    nextErrors.lastPeriodEnd = 'Tanggal tidak boleh di masa depan';\r\n  }\r\n\r\n  if (values.lastPeriodStart && values.lastPeriodEnd && values.lastPeriodEnd < values.lastPeriodStart) {\r\n    nextErrors.lastPeriodEnd = 'Tanggal selesai tidak boleh sebelum tanggal mulai';\r\n  }\r\n\r\n  const pain = Number(values.painScale);\r\n  if (!Number.isFinite(pain) || pain < 1 || pain > 10) {\r\n    nextErrors.painScale = 'Pilih skala nyeri 1–10';\r\n  }\r\n\r\n  return nextErrors;\r\n}\r\n\r\n/** ============== Container ============== */\r\nexport default function CycleOnboarding({ onComplete }) {\r\n  const onboardingData = useSiklusStore((s) => s.onboardingData);\r\n  const updateOnboardingDraft = useSiklusStore((s) => s.updateOnboardingDraft);\r\n  const commitOnboardingData = useSiklusStore((s) => s.commitOnboardingData);\r\n  const setOnboardingCompleted = useSiklusStore((s) => s.setOnboardingCompleted);\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const cardRef = useRef(null);\r\n  const stepHeadingRef = useRef(null);\r\n  const [reducedMotion, setReducedMotion] = useState(false);\r\n\r\n  // detect system reduced motion\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n    const media = window.matchMedia('(prefers-reduced-motion: reduce)');\r\n    const update = () => setReducedMotion(media.matches);\r\n    update();\r\n    media.addEventListener('change', update);\r\n    return () => media.removeEventListener('change', update);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!cardRef.current || reducedMotion) return;\r\n    const ctx = gsap.context(() => {\r\n      gsap.fromTo(cardRef.current, { autoAlpha: 0, y: 12 }, { autoAlpha: 1, y: 0, duration: 0.4, ease: 'power2.out' });\r\n    }, cardRef);\r\n    return () => ctx?.revert();\r\n  }, [reducedMotion]);\r\n\r\n  useEffect(() => {\r\n    stepHeadingRef.current?.focus();\r\n  }, []);\r\n\r\n  const currentValues = useMemo(\r\n    () => ({\r\n      lastPeriodStart: onboardingData.lastPeriodStart ?? null,\r\n      lastPeriodEnd: onboardingData.lastPeriodEnd ?? null,\r\n      painScale: onboardingData.painScale ?? 5,\r\n    }),\r\n    [onboardingData]\r\n  );\r\n\r\n  const stepValidation = useMemo(() => getStepErrors(currentValues), [currentValues]);\r\n\r\n  function validateNow() {\r\n    const nextErrors = getStepErrors(currentValues);\r\n    setErrors(nextErrors);\r\n    return Object.keys(nextErrors).length === 0;\r\n  }\r\n\r\n  // ✅ Finish: commit + mark complete + set love letter eligibility (shown later by page)\r\n  function handleNext() {\r\n    if (!validateNow()) return;\r\n    commitOnboardingData?.();\r\n    setOnboardingCompleted?.(true);\r\n    try {\r\n      localStorage.setItem('risa:loveLetterEligible', 'true');\r\n    } catch {}\r\n    onComplete?.();\r\n  }\r\n\r\n  // ✅ Cancel: DO NOT mark complete, DO NOT set eligibility\r\n  function handleBack() {\r\n    try {\r\n      localStorage.removeItem('risa:loveLetterEligible'); // ensure no popup\r\n    } catch {}\r\n    onComplete?.();\r\n  }\r\n\r\n  function handleChange(field, value) {\r\n    setErrors((prev) => ({ ...prev, [field]: undefined }));\r\n    let nextValue = value;\r\n\r\n    if (field === 'lastPeriodStart' || field === 'lastPeriodEnd') {\r\n      nextValue = value || null;\r\n    } else if (field === 'painScale') {\r\n      if (value === null || value === undefined || value === '') {\r\n        nextValue = null;\r\n      } else if (typeof value === 'number') {\r\n        nextValue = Number.isFinite(value) ? value : null;\r\n      } else {\r\n        const parsed = Number.parseInt(value, 10);\r\n        nextValue = Number.isFinite(parsed) ? parsed : null;\r\n      }\r\n    }\r\n\r\n    updateOnboardingDraft?.({ [field]: nextValue });\r\n  }\r\n\r\n  const liveErrorMessage = Object.values(errors).find(Boolean) || '';\r\n  const errorMessageId = liveErrorMessage ? 'onboarding-error-message' : undefined;\r\n\r\n  return (\r\n    <div className=\"space-y-6\" ref={cardRef}>\r\n      {liveErrorMessage ? (\r\n        <span id={errorMessageId} className=\"sr-only\" aria-live=\"assertive\">\r\n          {liveErrorMessage}\r\n        </span>\r\n      ) : null}\r\n\r\n      <header className=\"space-y-2\">\r\n        <p className=\"text-xs font-semibold uppercase tracking-wide text-pink-500\">Informasi Haid Terakhir</p>\r\n        <h3 ref={stepHeadingRef} tabIndex={-1} className=\"text-2xl font-semibold text-slate-800\">\r\n          Tanggal & Skala Nyeri\r\n        </h3>\r\n      </header>\r\n\r\n      <div className=\"rounded-3xl border border-pink-100 bg-white p-6 shadow-sm\">\r\n        <UnifiedStep values={currentValues} errors={errors} onChange={handleChange} />\r\n      </div>\r\n\r\n      <div className=\"flex flex-col items-center justify-end gap-3 sm:flex-row sm:justify-end\">\r\n        <button\r\n          type=\"button\"\r\n          data-ripple=\"true\"\r\n          onClick={handleBack}\r\n          className=\"rounded-full border border-pink-300 bg-white px-6 py-2 text-sm font-medium text-pink-600 hover:bg-pink-50 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-400 transition\"\r\n        >\r\n          Batal\r\n        </button>\r\n\r\n        <button\r\n          type=\"button\"\r\n          data-ripple=\"true\"\r\n          className=\"relative rounded-full bg-pink-500 px-6 py-2 text-sm font-semibold text-white shadow-sm transition-transform duration-200 ease-out hover:shadow-lg motion-safe:hover:scale-[1.03] motion-reduce:transform-none focus-visible:outline focus-visible:outline-2 focus-visible:outline-pink-500 cursor-pointer disabled:opacity-40 overflow-hidden\"\r\n          onClick={handleNext}\r\n          disabled={Object.keys(stepValidation).length > 0}\r\n          aria-disabled={Object.keys(stepValidation).length > 0}\r\n          aria-describedby={errorMessageId}\r\n        >\r\n          Selesai\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useMemo } from 'react';\r\nimport dynamic from 'next/dynamic';\r\nimport useSiklusStore from '../../store/useSiklusStore';\r\n\r\nconst MoodPieChart = dynamic(() => import('./charts/MoodPieChart'), {\r\n  ssr: false,\r\n  loading: () => (\r\n    <div className=\"flex h-48 w-full items-center justify-center rounded-2xl border border-dashed border-pink-200 bg-white/80 text-sm text-slate-500 dark:border-slate-700 dark:bg-slate-900/40 dark:text-slate-400\">Memuat grafik mood...</div>\r\n  ),\r\n});\r\n\r\n/** Canonical mood labels + chart colors (hex) */\r\nconst MOOD_LABELS = {\r\n  happy: { label: 'Senang', color: '#facc15' }, // yellow-400\r\n  sad: { label: 'Sedih', color: '#60a5fa' }, // blue-400\r\n  angry: { label: 'Kesal', color: '#f87171' }, // red-400\r\n  anxious: { label: 'Cemas', color: '#a78bfa' }, // violet-400\r\n  normal: { label: 'Biasa aja', color: '#94a3b8' }, // slate-400\r\n};\r\n\r\nconst DAYS_WINDOW = 30;\r\n\r\nfunction inLastNDays(iso, n = DAYS_WINDOW) {\r\n  if (!iso) return false;\r\n  const d = new Date(iso + 'T00:00:00');\r\n  if (Number.isNaN(d.getTime())) return false;\r\n  const today = new Date();\r\n  const cutoff = new Date(today.getFullYear(), today.getMonth(), today.getDate());\r\n  cutoff.setDate(cutoff.getDate() - n);\r\n  return d >= cutoff && d <= today;\r\n}\r\n\r\nexport default function MoodDistributionCard() {\r\n  const dailyLogs = useSiklusStore((s) => s.dailyLogs || []);\r\n\r\n  // Aggregate counts from the last 30 days of dailyLogs\r\n  const { counts, legendEntries, chartData, hasData } = useMemo(() => {\r\n    const counts = Object.create(null);\r\n\r\n    for (const log of dailyLogs) {\r\n      if (!log?.mood) continue;\r\n      if (!MOOD_LABELS[log.mood]) continue;\r\n      if (!inLastNDays(log.date, DAYS_WINDOW)) continue;\r\n      counts[log.mood] = (counts[log.mood] || 0) + 1;\r\n    }\r\n\r\n    const legendEntries = Object.entries(MOOD_LABELS)\r\n      .map(([mood, meta]) => ({\r\n        mood,\r\n        label: meta.label,\r\n        color: meta.color,\r\n        count: counts[mood] || 0,\r\n      }))\r\n      .filter((e) => e.count > 0)\r\n      .sort((a, b) => b.count - a.count);\r\n\r\n    const chartData = legendEntries.reduce((acc, e) => {\r\n      acc[e.mood] = e.count;\r\n      return acc;\r\n    }, {});\r\n\r\n    return { counts, legendEntries, chartData, hasData: legendEntries.length > 0 };\r\n  }, [dailyLogs]);\r\n\r\n  const colorMap = useMemo(() => {\r\n    const m = {};\r\n    for (const [key, v] of Object.entries(MOOD_LABELS)) m[key] = v.color;\r\n    return m;\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"rounded-3xl border border-pink-100 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900\">\r\n      <div className=\"space-y-4\">\r\n        <div className=\"text-center\">\r\n          <h3 className=\"text-lg font-semibold text-slate-800 dark:text-slate-100\">Mood bulananmu</h3>\r\n          <p className=\"text-sm text-slate-500 dark:text-slate-400\">Ini sebaran perasaanmu dalam {DAYS_WINDOW} hari terakhir</p>\r\n        </div>\r\n\r\n        {hasData ? (\r\n          <div className=\"flex flex-col items-center\">\r\n            <MoodPieChart data={chartData} size={220} colors={colorMap} />\r\n\r\n            <div className=\"mt-4 grid w-full grid-cols-2 gap-2\">\r\n              {legendEntries.map((entry) => (\r\n                <div key={entry.mood} className=\"flex items-center gap-2 rounded-lg bg-slate-50 p-2 dark:bg-slate-800\">\r\n                  <span className=\"h-3 w-3 rounded-full\" style={{ backgroundColor: entry.color }} />\r\n                  <span className=\"text-sm font-medium\">{entry.label}</span>\r\n                  <span className=\"ml-auto text-xs text-slate-500\">{entry.count}x</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"flex flex-col items-center justify-center p-8 text-center\">\r\n            <p className=\"text-slate-500 dark:text-slate-400\">Belum ada catatan mood dalam {DAYS_WINDOW} hari terakhir.</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport React, { useMemo } from 'react';\r\nimport useSiklusStore from '../../store/useSiklusStore';\r\nimport { analyzeMoodPatternsByPhase, CYCLE_PHASES, PHASE_NAMES } from '@/lib/siklus/moodPatterns';\r\n\r\nconst PHASE_ORDER = [CYCLE_PHASES.MENSTRUATION, CYCLE_PHASES.FOLLICULAR, CYCLE_PHASES.OVULATION, CYCLE_PHASES.LUTEAL];\r\n\r\n// Match DailyLogsViewer's mood labeling\r\nconst MOOD_LABELS = {\r\n  happy: { label: 'Senang', emoji: '😊' },\r\n  sad: { label: 'Sedih', emoji: '😢' },\r\n  angry: { label: 'Kesal', emoji: '😠' },\r\n  anxious: { label: 'Cemas', emoji: '😰' },\r\n  normal: { label: 'Biasa aja', emoji: '😐' },\r\n};\r\n\r\nexport default function MoodPatternCard() {\r\n  const dailyLogs = useSiklusStore((s) => s.dailyLogs || []);\r\n  const cycleSummary = useSiklusStore((s) => s.cycleSummary);\r\n\r\n  const patterns = useMemo(() => analyzeMoodPatternsByPhase(dailyLogs, cycleSummary), [dailyLogs, cycleSummary]);\r\n\r\n  if (!patterns?.hasData) {\r\n    return (\r\n      <div className=\"rounded-3xl border border-pink-100 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900\">\r\n        <h3 className=\"text-lg font-semibold text-slate-800 dark:text-slate-100\">Pola Suasana Hati</h3>\r\n        <p className=\"mt-2 text-sm text-slate-500 dark:text-slate-400\">Catat suasana hatimu secara rutin untuk melihat pola berdasarkan fase siklus.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function renderPhaseSummary(phase) {\r\n    const summary = patterns.summary?.[phase];\r\n    const totalEntries = summary?.total || 0;\r\n\r\n    const topKey = (summary?.topMood || '').toLowerCase();\r\n    const topMood = MOOD_LABELS[topKey];\r\n\r\n    const secondaryMoods = Array.isArray(summary?.moodCounts) ? summary.moodCounts.slice(1, 3) : [];\r\n\r\n    return (\r\n      <div key={phase} className=\"rounded-2xl border border-slate-100 bg-white/60 p-4 shadow-sm transition-colors dark:border-slate-800 dark:bg-slate-900/60\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <p className=\"text-sm font-semibold text-slate-700 dark:text-slate-200\">{PHASE_NAMES[phase]}</p>\r\n          <span className=\"text-xs text-slate-400 dark:text-slate-500\">{totalEntries} catatan</span>\r\n        </div>\r\n\r\n        {topMood ? (\r\n          <div className=\"mt-3 flex items-center gap-3\">\r\n            <span className=\"text-2xl\" role=\"img\" aria-hidden=\"true\">\r\n              {topMood.emoji}\r\n            </span>\r\n            <div>\r\n              <p className=\"text-sm font-semibold text-slate-800 dark:text-slate-100\">{topMood.label}</p>\r\n              <p className=\"text-xs text-slate-500 dark:text-slate-400\">\r\n                {summary.topCount}x / {summary.topPercentage}%\r\n              </p>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <p className=\"mt-3 text-sm text-slate-500 dark:text-slate-400\">Belum ada mood dominan pada fase ini.</p>\r\n        )}\r\n\r\n        {secondaryMoods.length > 0 ? (\r\n          <div className=\"mt-3 flex flex-wrap gap-2\">\r\n            {secondaryMoods.map((item) => {\r\n              const key = (item.mood || '').toLowerCase();\r\n              const m = MOOD_LABELS[key];\r\n              const label = m?.label || item.mood || '—';\r\n              return (\r\n                <span key={item.mood} className=\"inline-flex items-center gap-2 rounded-full bg-slate-100 px-3 py-1 text-xs text-slate-600 dark:bg-slate-800/70 dark:text-slate-300\">\r\n                  <span aria-hidden=\"true\">{m?.emoji}</span>\r\n                  <span>{label}</span>\r\n                  <span className=\"text-slate-400 dark:text-slate-500\">{item.count}x</span>\r\n                </span>\r\n              );\r\n            })}\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"rounded-3xl border border-pink-100 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900\">\r\n      <h3 className=\"text-lg font-semibold text-slate-800 dark:text-slate-100\">Pola Suasana Hati</h3>\r\n      <p className=\"mt-1 text-sm text-slate-500 dark:text-slate-400\">Mood yang paling sering kamu rasakan pada setiap fase siklus.</p>\r\n\r\n      <div className=\"mt-4 grid gap-3\">{PHASE_ORDER.map(renderPhaseSummary)}</div>\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { gsap } from \"gsap\";\r\n\r\nconst focusableSelectors =\r\n  'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])';\r\nconst confettiColors = [\"#FF6B9F\", \"#FFD166\", \"#9DDE7A\", \"#6C5CE7\", \"#5AC8FA\"];\r\nconst confettiPieces = Array.from({ length: 18 }, (_, index) => ({\r\n  id: index,\r\n  left: (index * 7) % 100,\r\n  delay: (index % 6) * 0.12,\r\n  duration: 1.1 + (index % 4) * 0.15,\r\n  color: confettiColors[index % confettiColors.length],\r\n  rotation: (index % 2 === 0 ? 1 : -1) * (12 + index * 3),\r\n}));\r\n\r\nexport default function LoveLetterModal({ open, onClose, reducedMotion }) {\r\n  const overlayRef = useRef(null);\r\n  const [closeEnabled, setCloseEnabled] = useState(false);\r\n  const [remaining, setRemaining] = useState(3);\r\n\r\n  // Keep a ref in sync with closeEnabled so handlers inside effects can read latest value\r\n  const closeEnabledRef = useRef(closeEnabled);\r\n  useEffect(() => {\r\n    closeEnabledRef.current = closeEnabled;\r\n  }, [closeEnabled]);\r\n\r\n  // Countdown gating\r\n  useEffect(() => {\r\n    if (!open) {\r\n      setCloseEnabled(false);\r\n      setRemaining(5);\r\n      return;\r\n    }\r\n\r\n    setCloseEnabled(false);\r\n    setRemaining(3);\r\n\r\n    const timeout = setTimeout(() => setCloseEnabled(true), 3000);\r\n    const interval = setInterval(() => {\r\n      setRemaining((prev) => {\r\n        if (prev <= 1) {\r\n          clearInterval(interval);\r\n          return 0;\r\n        }\r\n        return prev - 1;\r\n      });\r\n    }, 1000);\r\n\r\n    return () => {\r\n      clearTimeout(timeout);\r\n      clearInterval(interval);\r\n    };\r\n  }, [open]);\r\n\r\n  // Mount/unmount effects, key handling, focus trap\r\n  // 🔒 Dependency list is CONSTANT (length/order never changes)\r\n  useEffect(() => {\r\n    if (!open || !overlayRef.current) return;\r\n\r\n    const overlay = overlayRef.current;\r\n    const panel = overlay.querySelector(\".love-letter-panel\");\r\n    const previouslyActive = document.activeElement;\r\n    const previousOverflow = document.body.style.overflow;\r\n    document.body.style.overflow = \"hidden\";\r\n\r\n    let ctx;\r\n    if (!reducedMotion) {\r\n      ctx = gsap.context(() => {\r\n        gsap.set(overlay, { autoAlpha: 0 });\r\n        gsap.set(panel, { autoAlpha: 0, y: 24, scale: 0.98 });\r\n        gsap\r\n          .timeline({ defaults: { ease: \"power2.out\" } })\r\n          .to(overlay, { autoAlpha: 1, duration: 0.18 })\r\n          .to(panel, { autoAlpha: 1, y: 0, scale: 1, duration: 0.32 }, \"<0.04\");\r\n      }, overlayRef);\r\n    }\r\n\r\n    const focusables = overlay.querySelectorAll(focusableSelectors);\r\n    const first = focusables[0];\r\n    const last = focusables[focusables.length - 1];\r\n\r\n    const handleKeyDown = (event) => {\r\n      if (event.key === \"Tab\" && first && last) {\r\n        if (event.shiftKey && document.activeElement === first) {\r\n          event.preventDefault();\r\n          last?.focus();\r\n        } else if (!event.shiftKey && document.activeElement === last) {\r\n          event.preventDefault();\r\n          first?.focus();\r\n        }\r\n      }\r\n      if (event.key === \"Escape\") {\r\n        event.preventDefault();\r\n        if (closeEnabledRef.current) onClose?.();\r\n      }\r\n    };\r\n\r\n    overlay.addEventListener(\"keydown\", handleKeyDown);\r\n    first?.focus();\r\n\r\n    return () => {\r\n      overlay.removeEventListener(\"keydown\", handleKeyDown);\r\n      if (ctx) ctx.revert();\r\n      document.body.style.overflow = previousOverflow;\r\n      if (previouslyActive && previouslyActive instanceof HTMLElement) {\r\n        previouslyActive.focus();\r\n      }\r\n    };\r\n  }, [open, onClose, reducedMotion]); // 👈 constant size/order\r\n\r\n  const confettiStyle = useMemo(\r\n    () =>\r\n      confettiPieces.map((piece) => ({\r\n        left: `${piece.left}%`,\r\n        animationDelay: `${piece.delay}s`,\r\n        animationDuration: `${piece.duration}s`,\r\n        backgroundColor: piece.color,\r\n        transform: `rotate(${piece.rotation}deg)`,\r\n      })),\r\n    []\r\n  );\r\n\r\n  if (!open) return null;\r\n\r\n  function handleCloseClick() {\r\n    if (!closeEnabled) return;\r\n    onClose?.();\r\n  }\r\n\r\n  return (\r\n    <div\r\n      ref={overlayRef}\r\n      className=\"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/70 p-3 sm:p-4 backdrop-blur-sm\"\r\n      role=\"dialog\"\r\n      aria-modal=\"true\"\r\n      aria-labelledby=\"love-letter-title\"\r\n      aria-describedby=\"love-letter-message\"\r\n    >\r\n      <div className=\"love-letter-panel relative w-full max-w-[700px] overflow-hidden rounded-[24px] border border-pink-100 bg-white/95 shadow-2xl max-h-[92svh]\">\r\n        <div className=\"absolute inset-0 bg-linear-to-br from-pink-100 via-white to-slate-50\" aria-hidden=\"true\" />\r\n\r\n        <div className=\"relative flex h-full flex-col\">\r\n          <header className=\"px-5 pb-2 pt-5 sm:px-8 sm:pt-8\">\r\n            <h2 id=\"love-letter-title\" className=\"text-center text-2xl font-semibold text-slate-900 sm:text-3xl\">\r\n              💌 Kamu Mendapat Surat Cinta 💌\r\n            </h2>\r\n          </header>\r\n\r\n          <div className=\"flex-1 overflow-auto px-5 py-4 sm:px-8 sm:py-6 overscroll-contain\">\r\n            <div className=\"grid items-center gap-6 sm:grid-cols-2\">\r\n              <div className=\"space-y-4 text-center text-slate-700 sm:text-left\">\r\n                <p id=\"love-letter-message\" className=\"text-sm leading-relaxed text-slate-600\">\r\n                  Hai sayang.. aku tubuhmu 💖\r\n                  <br />\r\n                  <br />\r\n                  Setiap bulan, aku membersihkan dan mempersiapkan ruang baru untukmu.\r\n                  <br />\r\n                  Bukan karena ada yang salah, tapi karena aku sehat!\r\n                  <br />\r\n                  <br />\r\n                  Terimakasih sudah merawatku dengan lembut.\r\n                  <br />\r\n                  Kita tumbuh bersama ya? Cukup dengarkan… dan catat.\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"relative mx-auto flex items-center justify-center\">\r\n                <img\r\n                  src=\"/image/suratcinta.png\"\r\n                  alt=\"Ilustrasi surat cinta\"\r\n                  className=\"h-52 w-52 object-contain sm:h-64 sm:w-64\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <footer className=\"sticky bottom-0 z-[1] bg-gradient-to-t from-white to-white/80 px-5 pb-5 pt-3 sm:px-8\">\r\n            <div className=\"flex justify-center\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"inline-flex items-center justify-center rounded-full bg-pink-500 px-6 py-2 text-sm font-semibold text-white shadow-lg shadow-pink-200/60 transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-600 disabled:cursor-not-allowed disabled:opacity-60\"\r\n                onClick={handleCloseClick}\r\n                disabled={!closeEnabled}\r\n                aria-disabled={!closeEnabled}\r\n                aria-describedby=\"love-letter-countdown-message\"\r\n              >\r\n                {closeEnabled ? \"Mulai Mencatat\" : `Tunggu ${remaining}s`}\r\n              </button>\r\n              <span id=\"love-letter-countdown-message\" aria-live=\"polite\" className=\"sr-only\">\r\n                {closeEnabled ? \"Tombol siap ditekan\" : `Tombol siap dalam ${remaining} detik`}\r\n              </span>\r\n            </div>\r\n          </footer>\r\n        </div>\r\n\r\n        <div className=\"pointer-events-none absolute inset-0 overflow-hidden\">\r\n          {confettiStyle.map((style, index) => (\r\n            <span\r\n              key={confettiPieces[index].id}\r\n              data-confetti-piece\r\n              className=\"confetti-piece\"\r\n              style={style}\r\n              aria-hidden=\"true\"\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <style jsx>{`\r\n        .confetti-piece {\r\n          position: absolute;\r\n          top: -10%;\r\n          width: 12px;\r\n          height: 18px;\r\n          border-radius: 9999px;\r\n          opacity: 0;\r\n          animation-name: confettiFall;\r\n          animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\r\n          animation-fill-mode: forwards;\r\n        }\r\n        @keyframes confettiFall {\r\n          0% {\r\n            transform: translate3d(0, -20px, 0) rotate(0deg);\r\n            opacity: 0;\r\n          }\r\n          10% {\r\n            opacity: 1;\r\n          }\r\n          100% {\r\n            transform: translate3d(0, 320px, 0) rotate(360deg);\r\n            opacity: 0;\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { gsap } from \"gsap\";\r\nimport useSiklusStore from \"../../store/useSiklusStore\";\r\nimport CalendarRange from \"./CalendarRange\";\r\nimport { formatDisplayDate } from \"@/lib/siklus/cycleMath\";\r\n\r\nexport default function LogPeriodForm({ open, onClose }) {\r\n  const addPeriod = useSiklusStore((s) => s.addPeriod);\r\n  const onboardingData = useSiklusStore((s) => s.onboardingData);\r\n\r\n  const cardRef = useRef(null);\r\n  const [errors, setErrors] = useState({});\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  const [range, setRange] = useState({ start: null, end: null });\r\n  const [pain, setPain] = useState(5);\r\n  const [msg, setMsg] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (!open) return;\r\n    setErrors({});\r\n    setSubmitting(false);\r\n    setMsg(\"\");\r\n\r\n    // Default the view to lastPeriodStart if available\r\n    setRange({\r\n      start: null,\r\n      end: null,\r\n    });\r\n\r\n    // entrance anim (respect reduced motion via media query)\r\n    const media = window.matchMedia(\"(prefers-reduced-motion: reduce)\");\r\n    if (media.matches) return;\r\n    const ctx = gsap.context(() => {\r\n      gsap.fromTo(\r\n        cardRef.current,\r\n        { autoAlpha: 0, y: 12 },\r\n        { autoAlpha: 1, y: 0, duration: 0.28, ease: \"power2.out\" }\r\n      );\r\n    }, cardRef);\r\n    return () => ctx?.revert();\r\n  }, [open]);\r\n\r\n  const painOptions = useMemo(() => Array.from({ length: 10 }, (_, i) => i + 1), []);\r\n\r\n  function validate() {\r\n    const e = {};\r\n    const today = new Date().toISOString().slice(0, 10);\r\n    if (!range.start) e.start = \"Pilih tanggal mulai ya.\";\r\n    if (range.start && range.start > today) e.start = \"Tanggal mulai tidak boleh di masa depan.\";\r\n    if (!range.end) e.end = \"Pilih tanggal selesai ya.\";\r\n    if (range.end && range.end > today) e.end = \"Tanggal selesai tidak boleh di masa depan.\";\r\n    if (range.start && range.end && range.end < range.start) e.end = \"Tanggal selesai tidak boleh sebelum mulai.\";\r\n    if (!Number.isFinite(pain) || pain < 1 || pain > 10) e.pain = \"Pilih skala nyeri 1–10.\";\r\n    setErrors(e);\r\n    return Object.keys(e).length === 0;\r\n  }\r\n\r\n  async function handleSubmit() {\r\n    if (!validate()) return;\r\n    setSubmitting(true);\r\n    setMsg(\"\");\r\n    try {\r\n      addPeriod({\r\n        start: range.start,\r\n        end: range.end,\r\n        painScale: pain,\r\n      });\r\n      setMsg(\"Tersimpan! Prediksi & ringkasan sudah diperbarui.\");\r\n      // brief closing delay for feedback\r\n      setTimeout(() => onClose?.(), 350);\r\n    } catch (err) {\r\n      setSubmitting(false);\r\n      setMsg(err?.message || \"Gagal menyimpan. Coba lagi ya.\");\r\n    }\r\n  }\r\n\r\n  if (!open) return null;\r\n\r\n  return (\r\n    <div\r\n      role=\"dialog\"\r\n      aria-modal=\"true\"\r\n      className=\"fixed inset-0 z-[80] flex items-end sm:items-center justify-center p-4\"\r\n    >\r\n      {/* backdrop */}\r\n      <div\r\n        className=\"absolute inset-0 bg-black/30 backdrop-blur-sm\"\r\n        onClick={() => !submitting && onClose?.()}\r\n        aria-hidden=\"true\"\r\n      />\r\n      {/* card */}\r\n      <div\r\n        ref={cardRef}\r\n        className=\"relative w-full max-w-lg rounded-3xl border border-pink-100 bg-white p-5 shadow-xl sm:p-6 dark:border-slate-800 dark:bg-slate-900\"\r\n      >\r\n        <header className=\"mb-4 flex items-start justify-between gap-4\">\r\n          <div className=\"space-y-1\">\r\n            <p className=\"text-xs font-semibold uppercase tracking-wide text-pink-500\">\r\n              Catatan Haid Baru\r\n            </p>\r\n            <h3 className=\"text-xl font-semibold text-slate-800 dark:text-slate-100\">\r\n              Tambahkan Tanggal Haid\r\n            </h3>\r\n            <p className=\"text-sm text-slate-500 dark:text-slate-400\">\r\n              Pilih rentang tanggal haid dan skala nyeri (1–10).\r\n            </p>\r\n          </div>\r\n        </header>\r\n\r\n        <div className=\"space-y-6\">\r\n          {/* Calendar */}\r\n          <div>\r\n            <CalendarRange\r\n              value={range}\r\n              onChange={setRange}\r\n              max={new Date().toISOString().slice(0, 10)}\r\n              ariaInvalid={Boolean(errors.start) || Boolean(errors.end)}\r\n              ariaDescribedBy={undefined}\r\n            />\r\n            <div className=\"mt-2 flex flex-wrap items-center gap-2 text-xs text-slate-500\">\r\n              <span>\r\n                Mulai: {range.start ? formatDisplayDate(range.start) : \"Belum dipilih\"}\r\n              </span>\r\n              <span>{\"\\u2022\"}</span>\r\n              <span>\r\n                Selesai: {range.end ? formatDisplayDate(range.end) : \"Belum dipilih\"}\r\n              </span>\r\n            </div>\r\n            <div className=\"space-y-1 text-xs text-red-500\" aria-live=\"polite\">\r\n              {errors.start ? <p role=\"alert\">{errors.start}</p> : null}\r\n              {errors.end ? <p role=\"alert\">{errors.end}</p> : null}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Pain scale */}\r\n          <div>\r\n            <span className=\"text-sm font-medium text-slate-700 dark:text-slate-200\">\r\n              Skala nyeri saat haid\r\n            </span>\r\n            <div\r\n              role=\"radiogroup\"\r\n              aria-label=\"Skala nyeri 1 sampai 10\"\r\n              className=\"mt-2 flex flex-wrap gap-2\"\r\n            >\r\n              {painOptions.map((n) => (\r\n                <button\r\n                  key={n}\r\n                  type=\"button\"\r\n                  role=\"radio\"\r\n                  aria-checked={pain === n}\r\n                  onClick={() => setPain(n)}\r\n                  className={`h-9 w-9 rounded-full border text-sm font-semibold transition-transform focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-500 hover:scale-105 ${\r\n                    pain === n\r\n                      ? \"border-pink-500 bg-pink-500 text-white\"\r\n                      : \"border-slate-200 bg-white text-slate-600\"\r\n                  }`}\r\n                >\r\n                  {n}\r\n                </button>\r\n              ))}\r\n            </div>\r\n            {errors.pain ? <p className=\"mt-1 text-xs text-red-500\">{errors.pain}</p> : null}\r\n          </div>\r\n\r\n          {/* Message */}\r\n          {msg ? (\r\n            <div className=\"rounded-xl bg-pink-50 px-4 py-3 text-xs text-pink-700 dark:bg-pink-900/30 dark:text-pink-200\">\r\n              {msg}\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n\r\n        <footer className=\"mt-6 flex items-center justify-end gap-2\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => !submitting && onClose?.()}\r\n            className=\"rounded-full border border-slate-200 px-5 py-2 text-sm font-medium text-slate-600 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800\"\r\n            disabled={submitting}\r\n          >\r\n            Batal\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleSubmit}\r\n            className=\"relative rounded-full bg-pink-500 px-6 py-2 text-sm font-semibold text-white shadow-sm transition-transform duration-200 ease-out hover:shadow-lg focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-500 disabled:opacity-40\"\r\n            disabled={submitting}\r\n          >\r\n            {submitting ? \"Menyimpan...\" : \"Simpan\"}\r\n          </button>\r\n        </footer>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useCallback, useMemo } from 'react';\r\nimport { Heart, Droplets, MessageCircle, Calendar } from 'lucide-react';\r\nimport useSiklusStore from '../../store/useSiklusStore';\r\n\r\nconst FLOW_LEVELS = [\r\n  { id: 1, label: 'Ringan', color: 'bg-pink-100 text-pink-600', emoji: '💧' },\r\n  { id: 2, label: 'Sedang', color: 'bg-pink-200 text-pink-700', emoji: '💧💧' },\r\n  { id: 3, label: 'Banyak', color: 'bg-pink-300 text-pink-800', emoji: '💧💧💧' },\r\n  { id: 4, label: 'Sangat Banyak', color: 'bg-red-200 text-red-700', emoji: '💧💧💧💧' },\r\n];\r\n\r\nconst SYMPTOMS = [\r\n  { id: 'cramps', label: 'Kram perut', emoji: '😣' },\r\n  { id: 'headache', label: 'Sakit kepala', emoji: '🤕' },\r\n  { id: 'bloating', label: 'Perut kembung', emoji: '😮‍💨' },\r\n  { id: 'backache', label: 'Sakit punggung', emoji: '😰' },\r\n  { id: 'fatigue', label: 'Lelah', emoji: '😴' },\r\n  { id: 'acne', label: 'Jerawatan', emoji: '😔' },\r\n];\r\n\r\nconst MOODS = [\r\n  { id: 'happy', label: 'Senang', emoji: '😊', color: 'bg-yellow-100 text-yellow-700' },\r\n  { id: 'sad', label: 'Sedih', emoji: '😢', color: 'bg-blue-100 text-blue-700' },\r\n  { id: 'angry', label: 'Kesal', emoji: '😠', color: 'bg-red-100 text-red-700' },\r\n  { id: 'anxious', label: 'Cemas', emoji: '😰', color: 'bg-purple-100 text-purple-700' },\r\n  { id: 'normal', label: 'Biasa aja', emoji: '😐', color: 'bg-gray-100 text-gray-700' },\r\n];\r\n\r\nexport default function DailyTracker() {\r\n  const { addDailyLog } = useSiklusStore();\r\n  const [selectedDate, setSelectedDate] = useState(new Date().toISOString().slice(0, 10));\r\n  const [selectedFlow, setSelectedFlow] = useState(null);\r\n  const [selectedSymptoms, setSelectedSymptoms] = useState([]);\r\n  const [selectedMood, setSelectedMood] = useState(null);\r\n  const [story, setStory] = useState('');\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const toggleSymptom = useCallback((symptomId) => {\r\n    setSelectedSymptoms((prev) => (prev.includes(symptomId) ? prev.filter((id) => id !== symptomId) : [...prev, symptomId]));\r\n  }, []);\r\n\r\n  const handleSubmit = useCallback(async () => {\r\n    if (!selectedMood) return;\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      const logData = {\r\n        date: selectedDate,\r\n        mood: selectedMood,\r\n        flow: selectedFlow,\r\n        symptoms: selectedSymptoms,\r\n        story: story.trim(),\r\n        timestamp: new Date().toISOString(),\r\n      };\r\n\r\n      await addDailyLog(logData);\r\n\r\n      // Reset form\r\n      setSelectedFlow(null);\r\n      setSelectedSymptoms([]);\r\n      setSelectedMood(null);\r\n      setStory('');\r\n\r\n      // Show success feedback\r\n      setTimeout(() => setIsSubmitting(false), 500);\r\n    } catch (error) {\r\n      console.error('Failed to save daily log:', error);\r\n      setIsSubmitting(false);\r\n    }\r\n  }, [selectedDate, selectedMood, selectedFlow, selectedSymptoms, story, addDailyLog]);\r\n\r\n  const isFormValid = useMemo(() => selectedMood !== null, [selectedMood]);\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-3xl shadow-sm border border-pink-100 p-6 space-y-6\">\r\n      <div className=\"text-center\">\r\n        <h2 className=\"text-xl font-semibold text-slate-800 flex items-center justify-center gap-2\">\r\n          <Calendar className=\"w-5 h-5 text-pink-500\" />\r\n          Jurnal harianku\r\n        </h2>\r\n        <p className=\"text-sm text-slate-600 mt-1\">Catat perasaan dan kondisimu hari ini</p>\r\n      </div>\r\n\r\n      {/* Date Selector */}\r\n      <div className=\"space-y-2\">\r\n        <label className=\"text-sm font-medium text-slate-700\">Tanggal</label>\r\n        <input\r\n          type=\"date\"\r\n          value={selectedDate}\r\n          onChange={(e) => setSelectedDate(e.target.value)}\r\n          max={new Date().toISOString().slice(0, 10)}\r\n          className=\"w-full p-3 border border-pink-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent\"\r\n        />\r\n      </div>\r\n\r\n      {/* Mood Selection */}\r\n      <div className=\"space-y-3\">\r\n        <label className=\"text-sm font-medium text-slate-700 flex items-center gap-2\">\r\n          <Heart className=\"w-4 h-4 text-pink-500\" />\r\n          Mood hari ini *\r\n        </label>\r\n        <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-2\">\r\n          {MOODS.map((mood) => (\r\n            <button\r\n              key={mood.id}\r\n              type=\"button\"\r\n              onClick={() => setSelectedMood(mood.id)}\r\n              className={`p-3 rounded-xl border-2 transition-all text-center ${selectedMood === mood.id ? `${mood.color} border-current` : 'border-gray-200 hover:border-pink-300'}`}\r\n            >\r\n              <div className=\"text-2xl mb-1\">{mood.emoji}</div>\r\n              <div className=\"text-xs font-medium\">{mood.label}</div>\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Flow Level */}\r\n      <div className=\"space-y-3\">\r\n        <label className=\"text-sm font-medium text-slate-700 flex items-center gap-2\">\r\n          <Droplets className=\"w-4 h-4 text-pink-500\" />\r\n          Banyaknya haid (opsional)\r\n        </label>\r\n        <div className=\"grid grid-cols-2 gap-2\">\r\n          {FLOW_LEVELS.map((flow) => (\r\n            <button\r\n              key={flow.id}\r\n              type=\"button\"\r\n              onClick={() => setSelectedFlow(flow.id)}\r\n              className={`p-3 rounded-xl border-2 transition-all text-center ${selectedFlow === flow.id ? `${flow.color} border-current` : 'border-gray-200 hover:border-pink-300'}`}\r\n            >\r\n              <div className=\"text-lg mb-1\">{flow.emoji}</div>\r\n              <div className=\"text-xs font-medium\">{flow.label}</div>\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Symptoms */}\r\n      <div className=\"space-y-3\">\r\n        <label className=\"text-sm font-medium text-slate-700\">Gejala yang dirasakan (pilih yang sesuai)</label>\r\n        <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-2\">\r\n          {SYMPTOMS.map((symptom) => (\r\n            <button\r\n              key={symptom.id}\r\n              type=\"button\"\r\n              onClick={() => toggleSymptom(symptom.id)}\r\n              className={`p-3 rounded-xl border-2 transition-all text-center ${selectedSymptoms.includes(symptom.id) ? 'bg-pink-100 text-pink-700 border-pink-300' : 'border-gray-200 hover:border-pink-300'}`}\r\n            >\r\n              <div className=\"text-lg mb-1\">{symptom.emoji}</div>\r\n              <div className=\"text-xs font-medium\">{symptom.label}</div>\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Story/Notes */}\r\n      <div className=\"space-y-3\">\r\n        <label className=\"text-sm font-medium text-slate-700 flex items-center gap-2\">\r\n          <MessageCircle className=\"w-4 h-4 text-pink-500\" />\r\n          Cerita hari ini (opsional)\r\n        </label>\r\n        <textarea\r\n          value={story}\r\n          onChange={(e) => setStory(e.target.value)}\r\n          placeholder=\"Tulis cerita atau catatan khusus hari ini...\"\r\n          rows={3}\r\n          maxLength={500}\r\n          className=\"w-full p-3 border border-pink-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent resize-none\"\r\n        />\r\n        <div className=\"text-xs text-slate-500 text-right\">{story.length}/500 karakter</div>\r\n      </div>\r\n\r\n      {/* Submit Button */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={handleSubmit}\r\n        disabled={!isFormValid || isSubmitting}\r\n        className={`w-full py-3 rounded-xl font-semibold transition-all ${isFormValid && !isSubmitting ? 'bg-pink-500 text-white hover:bg-pink-600 hover:shadow-lg' : 'bg-gray-300 text-gray-500 cursor-not-allowed'}`}\r\n      >\r\n        {isSubmitting ? 'Menyimpan...' : 'Simpan Jurnal Hari Ini'}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useMemo } from 'react';\r\nimport { Calendar, Heart, Droplets, MessageCircle } from 'lucide-react';\r\nimport useSiklusStore from '../../store/useSiklusStore';\r\n\r\nconst FLOW_LABELS = {\r\n  1: { label: 'Ringan', emoji: '💧' },\r\n  2: { label: 'Sedang', emoji: '💧💧' },\r\n  3: { label: 'Banyak', emoji: '💧💧💧' },\r\n  4: { label: 'Sangat Banyak', emoji: '💧💧💧💧' },\r\n};\r\n\r\nconst MOOD_LABELS = {\r\n  happy: { label: 'Senang', emoji: '😊' },\r\n  sad: { label: 'Sedih', emoji: '😢' },\r\n  angry: { label: 'Kesal', emoji: '😠' },\r\n  anxious: { label: 'Cemas', emoji: '😰' },\r\n  normal: { label: 'Biasa aja', emoji: '😐' },\r\n};\r\n\r\nconst SYMPTOM_LABELS = {\r\n  cramps: { label: 'Kram perut', emoji: '😣' },\r\n  headache: { label: 'Sakit kepala', emoji: '🤕' },\r\n  bloating: { label: 'Perut kembung', emoji: '😮💨' },\r\n  backache: { label: 'Sakit punggung', emoji: '😰' },\r\n  fatigue: { label: 'Lelah', emoji: '😴' },\r\n  acne: { label: 'Jerawatan', emoji: '😔' },\r\n};\r\n\r\nfunction formatDate(dateStr) {\r\n  const date = new Date(dateStr);\r\n  return date.toLocaleDateString('id-ID', {\r\n    weekday: 'long',\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n  });\r\n}\r\n\r\nexport default function DailyLogsViewer() {\r\n  const dailyLogs = useSiklusStore((state) => state.dailyLogs || []);\r\n\r\n  const recentLogs = useMemo(() => {\r\n    return dailyLogs.slice(0, 7); // Show last 7 entries\r\n  }, [dailyLogs]);\r\n\r\n  if (!recentLogs.length) {\r\n    return (\r\n      <div className=\"bg-white rounded-3xl shadow-sm border border-pink-100 p-6 text-center\">\r\n        <Calendar className=\"w-12 h-12 text-pink-300 mx-auto mb-3\" />\r\n        <h3 className=\"text-lg font-semibold text-slate-800 mb-2\">Belum Ada Jurnal</h3>\r\n        <p className=\"text-sm text-slate-600\">Mulai catat jurnal harianmu untuk melihat pola dan tren</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-3xl shadow-sm border border-pink-100 p-6\">\r\n      <div className=\"flex items-center gap-2 mb-4\">\r\n        <Calendar className=\"w-5 h-5 text-pink-500\" />\r\n        <h3 className=\"text-lg font-semibold text-slate-800\">Riwayat jurnal harianku</h3>\r\n      </div>\r\n\r\n      <div className=\"space-y-4\">\r\n        {recentLogs.map((log, index) => (\r\n          <div key={`${log.date}-${index}`} className=\"border border-pink-100 rounded-2xl p-4\">\r\n            <div className=\"flex items-center justify-between mb-3\">\r\n              <h4 className=\"font-medium text-slate-800\">{formatDate(log.date)}</h4>\r\n              {log.mood && MOOD_LABELS[log.mood] && (\r\n                <div className=\"flex items-center gap-2 bg-pink-50 px-3 py-1 rounded-full\">\r\n                  <span>{MOOD_LABELS[log.mood].emoji}</span>\r\n                  <span className=\"text-sm font-medium text-pink-700\">{MOOD_LABELS[log.mood].label}</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm\">\r\n              {/* Flow */}\r\n              {log.flow && FLOW_LABELS[log.flow] && (\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Droplets className=\"w-4 h-4 text-pink-500\" />\r\n                  <span className=\"text-slate-600\">\r\n                    {FLOW_LABELS[log.flow].emoji} {FLOW_LABELS[log.flow].label}\r\n                  </span>\r\n                </div>\r\n              )}\r\n\r\n              {/* Symptoms */}\r\n              {log.symptoms && log.symptoms.length > 0 && (\r\n                <div className=\"flex items-start gap-2\">\r\n                  <Heart className=\"w-4 h-4 text-pink-500 mt-0.5\" />\r\n                  <div className=\"flex flex-wrap gap-1\">\r\n                    {log.symptoms.map((symptomId) => {\r\n                      const symptom = SYMPTOM_LABELS[symptomId];\r\n                      return symptom ? (\r\n                        <span key={symptomId} className=\"text-xs bg-gray-100 px-2 py-1 rounded-full\">\r\n                          {symptom.emoji} {symptom.label}\r\n                        </span>\r\n                      ) : null;\r\n                    })}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Story */}\r\n            {log.story && (\r\n              <div className=\"mt-3 pt-3 border-t border-pink-100\">\r\n                <div className=\"flex items-start gap-2\">\r\n                  <MessageCircle className=\"w-4 h-4 text-pink-500 mt-0.5\" />\r\n                  <p className=\"text-sm text-slate-600 italic\">\"{log.story}\"</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {dailyLogs.length > 7 && (\r\n        <div className=\"mt-4 text-center\">\r\n          <p className=\"text-sm text-slate-500\">Menampilkan 7 jurnal terakhir dari {dailyLogs.length} total jurnal</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","const RIPPLE_CONTAINER_CLASS = \"risa-ripple-container\";\r\nconst RIPPLE_ELEMENT_CLASS = \"risa-ripple\";\r\n\r\nfunction createRippleElement(doc) {\r\n  const element = doc.createElement(\"span\");\r\n  element.className = RIPPLE_ELEMENT_CLASS;\r\n  return element;\r\n}\r\n\r\nfunction isPrimaryPointer(event) {\r\n  if (typeof event.button === \"number\" && event.button !== 0) {\r\n    return false;\r\n  }\r\n  if (event.pointerType === \"mouse\" || event.pointerType === \"pen\" || event.pointerType === \"touch\" || event.pointerType === undefined) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nexport function attachRipple(element, { disabled = false } = {}) {\r\n  if (!element) {\r\n    return () => {};\r\n  }\r\n\r\n  element.classList.add(RIPPLE_CONTAINER_CLASS);\r\n\r\n  if (disabled) {\r\n    return () => {\r\n      element.classList.remove(RIPPLE_CONTAINER_CLASS);\r\n    };\r\n  }\r\n\r\n  const doc = element.ownerDocument || (typeof document !== \"undefined\" ? document : null);\r\n  if (!doc || typeof element.addEventListener !== \"function\") {\r\n    return () => {\r\n      element.classList.remove(RIPPLE_CONTAINER_CLASS);\r\n    };\r\n  }\r\n\r\n  const handlePointerDown = (event) => {\r\n    if (!isPrimaryPointer(event)) {\r\n      return;\r\n    }\r\n    const rect = typeof element.getBoundingClientRect === \"function\" ? element.getBoundingClientRect() : null;\r\n    if (!rect) {\r\n      return;\r\n    }\r\n\r\n    const ripple = createRippleElement(doc);\r\n    const size = Math.max(rect.width, rect.height) * 2;\r\n    const offsetX = event.clientX !== undefined ? event.clientX - rect.left : rect.width / 2;\r\n    const offsetY = event.clientY !== undefined ? event.clientY - rect.top : rect.height / 2;\r\n\r\n    ripple.style.width = `${size}px`;\r\n    ripple.style.height = `${size}px`;\r\n    ripple.style.left = `${offsetX}px`;\r\n    ripple.style.top = `${offsetY}px`;\r\n\r\n    if (typeof element.appendChild === \"function\") {\r\n      element.appendChild(ripple);\r\n    }\r\n\r\n    let fallbackTimeout = null;\r\n    const removeRipple = () => {\r\n      ripple.removeEventListener(\"animationend\", removeRipple);\r\n      ripple.removeEventListener(\"animationcancel\", removeRipple);\r\n      if (fallbackTimeout) {\r\n        clearTimeout(fallbackTimeout);\r\n        fallbackTimeout = null;\r\n      }\r\n      if (typeof ripple.remove === \"function\") {\r\n        ripple.remove();\r\n      } else if (ripple.parentNode && typeof ripple.parentNode.removeChild === \"function\") {\r\n        ripple.parentNode.removeChild(ripple);\r\n      }\r\n    };\r\n\r\n    ripple.addEventListener(\"animationend\", removeRipple);\r\n    ripple.addEventListener(\"animationcancel\", removeRipple);\r\n\r\n    fallbackTimeout = setTimeout(removeRipple, 600);\r\n  };\r\n\r\n  element.addEventListener(\"pointerdown\", handlePointerDown);\r\n\r\n  return () => {\r\n    element.removeEventListener(\"pointerdown\", handlePointerDown);\r\n    element.classList.remove(RIPPLE_CONTAINER_CLASS);\r\n  };\r\n}\r\n\r\nexport { RIPPLE_CONTAINER_CLASS, RIPPLE_ELEMENT_CLASS };\r\n","const DAILY_NUDGE_HOUR = 20;\r\n\r\nfunction getTodayKey(now = new Date()) {\r\n  if (!(now instanceof Date)) {\r\n    return null;\r\n  }\r\n  if (Number.isNaN(now.getTime())) {\r\n    return null;\r\n  }\r\n  return now.toISOString().slice(0, 10);\r\n}\r\n\r\nfunction hasMoodLogForDay(moodLogs = [], dayKey) {\r\n  if (!dayKey) {\r\n    return false;\r\n  }\r\n  if (!Array.isArray(moodLogs)) {\r\n    return false;\r\n  }\r\n  return moodLogs.some((entry) => entry && entry.date === dayKey);\r\n}\r\n\r\nfunction shouldShowDailyMoodNudge({ now = new Date(), moodLogs = [], nudgesEnabled = true } = {}) {\r\n  if (!nudgesEnabled) {\r\n    return false;\r\n  }\r\n  if (!(now instanceof Date) || Number.isNaN(now.getTime())) {\r\n    return false;\r\n  }\r\n  if (now.getHours() < DAILY_NUDGE_HOUR) {\r\n    return false;\r\n  }\r\n  const dayKey = getTodayKey(now);\r\n  if (!dayKey) {\r\n    return false;\r\n  }\r\n  return !hasMoodLogForDay(moodLogs, dayKey);\r\n}\r\n\r\nexport { DAILY_NUDGE_HOUR, getTodayKey, hasMoodLogForDay, shouldShowDailyMoodNudge };","\"use client\";\r\n\r\nimport { useEffect, useRef } from \"react\";\r\nimport { gsap } from \"gsap\";\r\n\r\nexport default function OnboardingGate({ open, onBelum, onSudah, reducedMotion = false }) {\r\n  const containerRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!open || !containerRef.current) return;\r\n\r\n    const overlay = containerRef.current;\r\n    const panel = overlay.querySelector(\".gate-panel\");\r\n\r\n    let ctx;\r\n    if (!reducedMotion) {\r\n      ctx = gsap.context((localCtx) => {\r\n        gsap.set(overlay, { autoAlpha: 0 });\r\n        gsap.set(panel, { autoAlpha: 0, scale: 0.92, y: 24 });\r\n\r\n        gsap\r\n          .timeline({ defaults: { ease: \"power2.out\" } })\r\n          .to(overlay, { autoAlpha: 1, duration: 0.2 })\r\n          .to(panel, { autoAlpha: 1, scale: 1, y: 0, duration: 0.35 }, \"<\");\r\n\r\n        const buttons = panel.querySelectorAll(\"[data-gate-button][data-ripple='true']\");\r\n        buttons.forEach((button) => {\r\n          const hoverTl = gsap.timeline({ paused: true }).to(button, {\r\n            scale: 1.05,\r\n            duration: 0.18,\r\n            ease: \"power2.out\",\r\n          });\r\n\r\n          const enter = () => hoverTl.play();\r\n          const leave = () => hoverTl.reverse();\r\n\r\n          button.addEventListener(\"pointerenter\", enter);\r\n          button.addEventListener(\"pointerleave\", leave);\r\n          button.addEventListener(\"pointercancel\", leave);\r\n\r\n          localCtx.add(() => {\r\n            button.removeEventListener(\"pointerenter\", enter);\r\n            button.removeEventListener(\"pointerleave\", leave);\r\n            button.removeEventListener(\"pointercancel\", leave);\r\n          });\r\n        });\r\n\r\n        const onVis = () =>\r\n          document.hidden ? gsap.globalTimeline.pause() : gsap.globalTimeline.resume();\r\n        document.addEventListener(\"visibilitychange\", onVis);\r\n        localCtx.add(() => document.removeEventListener(\"visibilitychange\", onVis));\r\n      }, containerRef);\r\n    } else {\r\n      overlay.style.opacity = \"1\";\r\n      panel.style.opacity = \"1\";\r\n      panel.style.transform = \"none\";\r\n    }\r\n\r\n    // focus trap\r\n    const allCandidates = Array.from(\r\n      overlay.querySelectorAll(\"button, [href], input, select, textarea, [tabindex]\")\r\n    );\r\n\r\n    const focusables = allCandidates.filter((el) => {\r\n      const tab = el.getAttribute(\"tabindex\");\r\n      const isNeg = tab !== null ? parseInt(tab, 10) < 0 : false;\r\n      const hasDisabled = \"disabled\" in el;\r\n      const disabled = hasDisabled ? el.disabled : el.getAttribute(\"disabled\") !== null;\r\n      const ariaHidden = el.getAttribute(\"aria-hidden\") === \"true\";\r\n      return !isNeg && !disabled && !ariaHidden;\r\n    });\r\n\r\n    const first = focusables[0];\r\n    const last = focusables[focusables.length - 1];\r\n\r\n    const handleKeyDown = (event) => {\r\n      if (event.key === \"Tab\" && focusables.length > 1) {\r\n        if (event.shiftKey && document.activeElement === first) {\r\n          event.preventDefault();\r\n          last?.focus();\r\n        } else if (!event.shiftKey && document.activeElement === last) {\r\n          event.preventDefault();\r\n          first?.focus();\r\n        }\r\n      }\r\n      if (event.key === \"Escape\") {\r\n        event.preventDefault();\r\n      }\r\n    };\r\n\r\n    overlay.addEventListener(\"keydown\", handleKeyDown);\r\n    first?.focus();\r\n\r\n    return () => {\r\n      overlay.removeEventListener(\"keydown\", handleKeyDown);\r\n      if (ctx) ctx.revert();\r\n    };\r\n  }, [open, reducedMotion]);\r\n\r\n  if (!open) return null;\r\n\r\n  function handleChoice(callback) {\r\n    if (!containerRef.current || reducedMotion) {\r\n      callback();\r\n      return;\r\n    }\r\n    const overlay = containerRef.current;\r\n    const panel = overlay.querySelector(\".gate-panel\");\r\n\r\n    gsap\r\n      .timeline({ defaults: { ease: \"power2.in\" }, onComplete: callback })\r\n      .to(panel, { autoAlpha: 0, y: -20, scale: 0.94, duration: 0.22 })\r\n      .to(overlay, { autoAlpha: 0, duration: 0.18 }, \"<0.05\");\r\n  }\r\n\r\n  return (\r\n    <div\r\n      ref={containerRef}\r\n      className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/55 backdrop-blur-sm\"\r\n      role=\"dialog\"\r\n      aria-modal=\"true\"\r\n      aria-labelledby=\"onboarding-title\"\r\n      aria-describedby=\"onboarding-subtitle\"\r\n    >\r\n      <div className=\"gate-panel w-full max-w-3xl rounded-[32px] bg-white/95 p-6 shadow-2xl sm:p-8\">\r\n        <div className=\"grid gap-6 sm:grid-cols-[1.1fr_0.9fr] sm:items-center\">\r\n          {/* Left column */}\r\n          <div className=\"space-y-5 text-center sm:text-left\">\r\n            <div className=\"mx-auto h-24 w-48 sm:hidden\">\r\n              <img\r\n                src=\"/image/placeholder-gate.png\"\r\n                alt=\"Kartu sambutan Siklusku\"\r\n                className=\"h-full w-full object-contain\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <h2 id=\"onboarding-title\" className=\"text-4xl font-semibold text-slate-900 text-center\">\r\n                Apakah kamu sudah mengalami haid?\r\n              </h2>\r\n              <p id=\"onboarding-subtitle\" className=\"mt-3 text-m text-slate-600 text-center\">\r\n                Ayo kenali lebih dalam diri kamu dengan membangun kebiasaan jurnaling siklus dan suasana hatimu. <br />\r\n                Psstt.. kalo kamu gak tau apa itu haid,<br/>klik belum😉\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4\">\r\n              <button\r\n                type=\"button\"\r\n                aria-label=\"Belum pernah haid\"\r\n                data-gate-button\r\n                data-ripple=\"true\"\r\n                className=\"relative inline-flex min-h-[52px] w-full items-center justify-center rounded-full bg-pink-500 px-6 py-3 text-base font-semibold text-white shadow-lg shadow-pink-200/60 transition-transform duration-200 ease-out hover:shadow-xl motion-safe:hover:scale-[1.03] motion-reduce:transform-none focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-600 sm:flex-1 overflow-hidden\"\r\n                onClick={() => handleChoice(onBelum)}\r\n              >\r\n                Belum\r\n              </button>\r\n\r\n              <button\r\n                type=\"button\"\r\n                aria-label=\"Sudah haid\"\r\n                data-gate-button\r\n                data-ripple=\"true\"\r\n                className=\"relative inline-flex min-h-[52px] w-full items-center justify-center rounded-full border border-pink-200 bg-white px-6 py-3 text-base font-semibold text-pink-600 shadow-md transition-transform duration-200 ease-out hover:shadow-lg motion-safe:hover:scale-[1.03] motion-reduce:transform-none focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-600 sm:flex-1 overflow-hidden\"\r\n                onClick={() => handleChoice(onSudah)}\r\n              >\r\n                Sudah\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right column illustration */}\r\n          <div className=\"relative hidden justify-center sm:flex\">\r\n            <div className=\"relative h-64 w-64\">\r\n              <div\r\n                className=\"absolute inset-0 rounded-full bg-pink-100 blur-3xl\"\r\n                aria-hidden=\"true\"\r\n              />\r\n              <img\r\n                src=\"/image/placeholder-gate.png\"\r\n                alt=\"Ilustrasi remaja menunjuk kalender menstruasi\"\r\n                className=\"relative z-10 h-full w-full object-contain\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","export const CYCLE_PHASES = {\r\n  MENSTRUATION: 'menstruation',\r\n  FOLLICULAR: 'follicular',\r\n  OVULATION: 'ovulation',\r\n  LUTEAL: 'luteal',\r\n};\r\n\r\nconst PHASE_LIST = Object.values(CYCLE_PHASES);\r\n\r\nexport const PHASE_NAMES = {\r\n  [CYCLE_PHASES.MENSTRUATION]: 'Menstruasi',\r\n  [CYCLE_PHASES.FOLLICULAR]: 'Folikuler',\r\n  [CYCLE_PHASES.OVULATION]: 'Ovulasi',\r\n  [CYCLE_PHASES.LUTEAL]: 'Luteal',\r\n};\r\n\r\nfunction toPositiveInteger(value, fallback) {\r\n  const numeric = Number.parseInt(value, 10);\r\n  if (Number.isFinite(numeric) && numeric > 0) return numeric;\r\n  return fallback;\r\n}\r\n\r\nexport function determineCyclePhase(dayInCycle, cycleLength = 28, periodLength = 5) {\r\n  const normalizedCycleLength = toPositiveInteger(cycleLength, 28);\r\n  const normalizedPeriodLength = Math.min(normalizedCycleLength, Math.max(1, toPositiveInteger(periodLength, 5)));\r\n\r\n  if (!dayInCycle) return CYCLE_PHASES.MENSTRUATION;\r\n\r\n  const day = ((Math.round(dayInCycle) - 1 + normalizedCycleLength) % normalizedCycleLength) + 1;\r\n\r\n  if (day <= normalizedPeriodLength) return CYCLE_PHASES.MENSTRUATION;\r\n\r\n  const ovulationDay = Math.min(normalizedCycleLength - 1, Math.max(normalizedPeriodLength + 1, normalizedCycleLength - 14));\r\n  const ovulationEnd = Math.min(normalizedCycleLength, ovulationDay + 1);\r\n\r\n  if (day >= ovulationDay && day <= ovulationEnd) return CYCLE_PHASES.OVULATION;\r\n  if (day < ovulationDay) return CYCLE_PHASES.FOLLICULAR;\r\n  return CYCLE_PHASES.LUTEAL;\r\n}\r\n\r\n/** Calculate the day in cycle for a given date */\r\nexport function calculateDayInCycle(date, cycleStartDate, cycleLength = 28) {\r\n  const normalizedCycleLength = toPositiveInteger(cycleLength, 28);\r\n  const dateObj = new Date(date);\r\n  const cycleStartObj = new Date(cycleStartDate);\r\n\r\n  if (Number.isNaN(dateObj.getTime()) || Number.isNaN(cycleStartObj.getTime())) return 1;\r\n\r\n  const diffTime = dateObj.getTime() - cycleStartObj.getTime();\r\n  const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24)) + 1; // 1-based\r\n\r\n  if (diffDays <= 0) {\r\n    const normalized = ((diffDays % normalizedCycleLength) + normalizedCycleLength) % normalizedCycleLength;\r\n    return normalized === 0 ? normalizedCycleLength : normalized;\r\n  }\r\n\r\n  return ((diffDays - 1) % normalizedCycleLength) + 1;\r\n}\r\n\r\nexport function analyzeMoodPatternsByPhase(logs = [], cycleSummary = {}) {\r\n  const lastPeriodStart = cycleSummary?.lastPeriodStart;\r\n  const averageCycleLength = toPositiveInteger(cycleSummary?.averageCycleLength, 28);\r\n  const averagePeriodLength = toPositiveInteger(cycleSummary?.averagePeriodLength, 5);\r\n\r\n  // Prepare containers\r\n  const byPhase = PHASE_LIST.reduce((acc, phase) => {\r\n    acc[phase] = {}; // mood -> count\r\n    return acc;\r\n  }, {});\r\n  const topMoodByPhase = PHASE_LIST.reduce((acc, phase) => {\r\n    acc[phase] = null;\r\n    return acc;\r\n  }, {});\r\n  const summary = PHASE_LIST.reduce((acc, phase) => {\r\n    acc[phase] = { total: 0, topMood: null, topCount: 0, topPercentage: 0, moodCounts: [] };\r\n    return acc;\r\n  }, {});\r\n\r\n  if (!Array.isArray(logs) || logs.length === 0 || !lastPeriodStart) {\r\n    return { byPhase, topMoodByPhase, summary, hasData: false };\r\n  }\r\n\r\n  // Tally per phase\r\n  logs.forEach((log = {}) => {\r\n    const moodKey = typeof log.mood === 'string' ? log.mood.toLowerCase() : null;\r\n    if (!moodKey) return;\r\n\r\n    const dayInCycle = calculateDayInCycle(log.date, lastPeriodStart, averageCycleLength);\r\n    const phase = determineCyclePhase(dayInCycle, averageCycleLength, averagePeriodLength);\r\n    const bucket = byPhase[phase];\r\n\r\n    bucket[moodKey] = (bucket[moodKey] || 0) + 1;\r\n  });\r\n\r\n  // Build summaries\r\n  let hasData = false;\r\n  PHASE_LIST.forEach((phase) => {\r\n    const moodCounts = byPhase[phase];\r\n    const entries = Object.entries(moodCounts)\r\n      .filter(([, count]) => count > 0)\r\n      .sort((a, b) => (b[1] === a[1] ? a[0].localeCompare(b[0]) : b[1] - a[1]));\r\n\r\n    const total = entries.reduce((s, [, c]) => s + c, 0);\r\n    const topEntry = entries[0] || null;\r\n\r\n    const detailedCounts = entries.map(([mood, count]) => ({\r\n      mood,\r\n      count,\r\n      percentage: total > 0 ? Math.round((count / total) * 100) : 0,\r\n    }));\r\n\r\n    summary[phase] = {\r\n      total,\r\n      topMood: topEntry ? topEntry[0] : null,\r\n      topCount: topEntry ? topEntry[1] : 0,\r\n      topPercentage: topEntry && total > 0 ? Math.round((topEntry[1] / total) * 100) : 0,\r\n      moodCounts: detailedCounts,\r\n    };\r\n\r\n    topMoodByPhase[phase] = summary[phase].topMood;\r\n    if (total > 0) hasData = true;\r\n  });\r\n\r\n  return { byPhase, topMoodByPhase, summary, hasData };\r\n}\r\n","import React, { useMemo } from 'react';\r\nimport useSiklusStore from '../../store/useSiklusStore';\r\n\r\nconst MONTHLY_TARGET = 30;\r\n\r\nfunction toLocalDateString(date) {\r\n  const y = date.getFullYear();\r\n  const m = String(date.getMonth() + 1).padStart(2, '0');\r\n  const d = String(date.getDate()).padStart(2, '0');\r\n  return `${y}-${m}-${d}`;\r\n}\r\n\r\nfunction addDaysISO(iso, delta) {\r\n  const [y, m, d] = iso.split('-').map(Number);\r\n  const dt = new Date(y, m - 1, d);\r\n  dt.setDate(dt.getDate() + delta);\r\n  return toLocalDateString(dt);\r\n}\r\n\r\nexport default function ConsistencyCard() {\r\n  const dailyLogs = useSiklusStore((s) => s.dailyLogs || []);\r\n\r\n  const { totalTrackedDays, trackedLast30, longestStreak, hasTodayDaily, consistencyPercent } = useMemo(() => {\r\n    if (!Array.isArray(dailyLogs) || dailyLogs.length === 0) {\r\n      return {\r\n        totalTrackedDays: 0,\r\n        trackedLast30: 0,\r\n        longestStreak: 0,\r\n        hasTodayDaily: false,\r\n        consistencyPercent: 0,\r\n      };\r\n    }\r\n\r\n    // Build a unique set of valid YYYY-MM-DD dates from daily logs\r\n    const dateSet = new Set(dailyLogs.map((l) => (l && typeof l.date === 'string' ? l.date : null)).filter(Boolean));\r\n\r\n    const totalTrackedDays = dateSet.size;\r\n\r\n    const today = new Date();\r\n    const todayKey = toLocalDateString(today);\r\n    const startKey = toLocalDateString(new Date(today.getTime() - 29 * 24 * 60 * 60 * 1000)); // 30-day window\r\n\r\n    // Count days within last 30 days\r\n    let trackedLast30 = 0;\r\n    for (const d of dateSet) {\r\n      if (d >= startKey && d <= todayKey) trackedLast30 += 1;\r\n    }\r\n\r\n    const hasTodayDaily = dateSet.has(todayKey);\r\n\r\n    // Compute longest consecutive-day streak from all-time logs\r\n    const allDatesSorted = Array.from(dateSet).sort(); // lex sort works for YYYY-MM-DD\r\n    let longestStreak = 0;\r\n    let currentStreak = 0;\r\n    let prev = null;\r\n\r\n    for (const iso of allDatesSorted) {\r\n      if (prev && iso === addDaysISO(prev, 1)) {\r\n        currentStreak += 1;\r\n      } else {\r\n        currentStreak = 1;\r\n      }\r\n      longestStreak = Math.max(longestStreak, currentStreak);\r\n      prev = iso;\r\n    }\r\n\r\n    const consistencyPercent = Math.min(100, Math.round((trackedLast30 / MONTHLY_TARGET) * 100));\r\n\r\n    return {\r\n      totalTrackedDays,\r\n      trackedLast30,\r\n      longestStreak,\r\n      hasTodayDaily,\r\n      consistencyPercent,\r\n    };\r\n  }, [dailyLogs]);\r\n\r\n  const progress = consistencyPercent;\r\n\r\n  return (\r\n    <article className=\"rounded-2xl border border-pink-100 bg-white p-5 shadow-sm dark:border-slate-800 dark:bg-slate-900\">\r\n      <div className=\"flex items-start justify-between gap-3\">\r\n        <h3 className=\"text-lg font-semibold text-slate-800 dark:text-slate-100\">Konsistensi pencatatan</h3>\r\n        {hasTodayDaily ? (\r\n          <span\r\n            className=\"inline-flex items-center rounded-full bg-pink-100 px-3 py-1 text-xs font-medium text-pink-700 dark:bg-pink-900/30 dark:text-pink-200\"\r\n            aria-label=\"Sudah membuat jurnal hari ini\"\r\n            title=\"Sudah membuat jurnal hari ini\"\r\n          >\r\n            Hari ini✔️\r\n          </span>\r\n        ) : null}\r\n      </div>\r\n\r\n      <div className=\"mt-2 flex items-end justify-between\">\r\n        <p className=\"text-3xl font-semibold text-slate-800 dark:text-slate-100\">{progress}%</p>\r\n        <p className=\"text-xs text-slate-500 dark:text-slate-400\">Target: catat setiap hari selama {MONTHLY_TARGET} hari</p>\r\n      </div>\r\n\r\n      <div className=\"mt-3\" role=\"progressbar\" aria-valuemin={0} aria-valuemax={100} aria-valuenow={progress} aria-label={`Kemajuan menuju ${MONTHLY_TARGET} hari log bulan ini`}>\r\n        <div className=\"h-1.5 w-full rounded-full bg-slate-100 dark:bg-slate-700\">\r\n          <div className=\"h-full rounded-full bg-pink-500\" style={{ width: `${progress}%` }} />\r\n        </div>\r\n      </div>\r\n\r\n      <dl className=\"mt-3 grid grid-cols-2 gap-3 text-sm\">\r\n        <div>\r\n          <dt className=\"text-slate-500 dark:text-slate-400\">Log 30 hari</dt>\r\n          <dd className=\"font-semibold text-slate-800 dark:text-slate-100\">{trackedLast30} hari</dd>\r\n        </div>\r\n        <div>\r\n          <dt className=\"text-slate-500 dark:text-slate-400\">Total hari tercatat</dt>\r\n          <dd className=\"font-semibold text-slate-800 dark:text-slate-100\">{totalTrackedDays}</dd>\r\n        </div>\r\n        <div>\r\n          <dt className=\"text-slate-500 dark:text-slate-400\">Streak terpanjang</dt>\r\n          <dd className=\"font-semibold text-slate-800 dark:text-slate-100\">{longestStreak} hari</dd>\r\n        </div>\r\n      </dl>\r\n    </article>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport useSiklusStore from '../../store/useSiklusStore';\r\n\r\nexport default function AchievementsCard() {\r\n  const achievements = useSiklusStore((state) => state.achievements || []);\r\n\r\n  if (!achievements || achievements.length === 0) {\r\n    return (\r\n      <div className=\"bg-white rounded-lg p-4 shadow-sm\">\r\n        <h3 className=\"text-lg font-medium mb-2\">Pencapaian</h3>\r\n        <p className=\"text-gray-500 text-sm\">\r\n          Catat suasana hatimu secara rutin untuk mendapatkan pencapaian.\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg p-4 shadow-sm\">\r\n      <h3 className=\"text-lg font-medium mb-3\">Pencapaian</h3>\r\n      \r\n      <div className=\"space-y-2\">\r\n        {achievements.map(achievement => (\r\n          <div key={achievement.id} className=\"flex items-center gap-2\">\r\n            <span className=\"inline-flex items-center justify-center w-8 h-8 rounded-full bg-yellow-100 text-yellow-800\">\r\n              ðŸ†\r\n            </span>\r\n            <div>\r\n              <p className=\"font-medium text-sm\">{achievement.title}</p>\r\n              <p className=\"text-xs text-gray-500\">{achievement.description}</p>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M8 2v4', key: '1cmpym' }],\n  ['path', { d: 'M16 2v4', key: '4m81vk' }],\n  ['rect', { width: '18', height: '18', x: '3', y: '4', rx: '2', key: '1hopcy' }],\n  ['path', { d: 'M3 10h18', key: '8toen8' }],\n];\n\n/**\n * @component @name Calendar\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNOCAydjQiIC8+CiAgPHBhdGggZD0iTTE2IDJ2NCIgLz4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjMiIHk9IjQiIHJ4PSIyIiAvPgogIDxwYXRoIGQ9Ik0zIDEwaDE4IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/calendar\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Calendar = createLucideIcon('calendar', __iconNode);\n\nexport default Calendar;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401',\n      key: 'kfwtm',\n    },\n  ],\n];\n\n/**\n * @component @name Moon\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjAuOTg1IDEyLjQ4NmE5IDkgMCAxIDEtOS40NzMtOS40NzJjLjQwNS0uMDIyLjYxNy40Ni40MDIuODAzYTYgNiAwIDAgMCA4LjI2OCA4LjI2OGMuMzQ0LS4yMTUuODI1LS4wMDQuODAzLjQwMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/moon\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Moon = createLucideIcon('moon', __iconNode);\n\nexport default Moon;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3',\n      key: '139s4v',\n    },\n  ],\n  ['path', { d: 'M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4', key: '1dlkgp' }],\n  ['path', { d: 'M5 21h14', key: '11awu3' }],\n];\n\n/**\n * @component @name Sprout\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTQgOS41MzZWN2E0IDQgMCAwIDEgNC00aDEuNWEuNS41IDAgMCAxIC41LjVWNWE0IDQgMCAwIDEtNCA0IDQgNCAwIDAgMC00IDRjMCAyIDEgMyAxIDVhNSA1IDAgMCAxLTEgMyIgLz4KICA8cGF0aCBkPSJNNCA5YTUgNSAwIDAgMSA4IDQgNSA1IDAgMCAxLTgtNCIgLz4KICA8cGF0aCBkPSJNNSAyMWgxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/sprout\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Sprout = createLucideIcon('sprout', __iconNode);\n\nexport default Sprout;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5',\n      key: 'mvr1a0',\n    },\n  ],\n];\n\n/**\n * @component @name Heart\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMiA5LjVhNS41IDUuNSAwIDAgMSA5LjU5MS0zLjY3Ni41Ni41NiAwIDAgMCAuODE4IDBBNS40OSA1LjQ5IDAgMCAxIDIyIDkuNWMwIDIuMjktMS41IDQtMyA1LjVsLTUuNDkyIDUuMzEzYTIgMiAwIDAgMS0zIC4wMTlMNSAxNWMtMS41LTEuNS0zLTMuMi0zLTUuNSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/heart\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Heart = createLucideIcon('heart', __iconNode);\n\nexport default Heart;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z',\n      key: '1ptgy4',\n    },\n  ],\n  [\n    'path',\n    {\n      d: 'M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97',\n      key: '1sl1rz',\n    },\n  ],\n];\n\n/**\n * @component @name Droplets\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNyAxNi4zYzIuMiAwIDQtMS44MyA0LTQuMDUgMC0xLjE2LS41Ny0yLjI2LTEuNzEtMy4xOVM3LjI5IDYuNzUgNyA1LjNjLS4yOSAxLjQ1LTEuMTQgMi44NC0yLjI5IDMuNzZTMyAxMS4xIDMgMTIuMjVjMCAyLjIyIDEuOCA0LjA1IDQgNC4wNXoiIC8+CiAgPHBhdGggZD0iTTEyLjU2IDYuNkExMC45NyAxMC45NyAwIDAgMCAxNCAzLjAyYy41IDIuNSAyIDQuOSA0IDYuNXMzIDMuNSAzIDUuNWE2Ljk4IDYuOTggMCAwIDEtMTEuOTEgNC45NyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/droplets\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Droplets = createLucideIcon('droplets', __iconNode);\n\nexport default Droplets;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719',\n      key: '1sd12s',\n    },\n  ],\n];\n\n/**\n * @component @name MessageCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMi45OTIgMTYuMzQyYTIgMiAwIDAgMSAuMDk0IDEuMTY3bC0xLjA2NSAzLjI5YTEgMSAwIDAgMCAxLjIzNiAxLjE2OGwzLjQxMy0uOTk4YTIgMiAwIDAgMSAxLjA5OS4wOTIgMTAgMTAgMCAxIDAtNC43NzctNC43MTkiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/message-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst MessageCircle = createLucideIcon('message-circle', __iconNode);\n\nexport default MessageCircle;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z',\n      key: 'c7niix',\n    },\n  ],\n];\n\n/**\n * @component @name Droplet\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMjJhNyA3IDAgMCAwIDctN2MwLTItMS0zLjktMy01LjVzLTMuNS00LTQtNi41Yy0uNSAyLjUtMiA0LjktNCA2LjVDNiAxMS4xIDUgMTMgNSAxNWE3IDcgMCAwIDAgNyA3eiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/droplet\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Droplet = createLucideIcon('droplet', __iconNode);\n\nexport default Droplet;\n"],"names":[],"mappings":"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","ignoreList":[0,1,2,3,4,27,28,29,30,31,32,33]}